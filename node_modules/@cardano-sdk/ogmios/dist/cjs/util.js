"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createInteractionContextWithLogger = exports.urlToConnectionConfig = void 0;
const client_1 = require("@cardano-ogmios/client");
const urlToConnectionConfig = (connectionURL) => ({
    host: connectionURL?.hostname,
    port: connectionURL ? Number.parseInt(connectionURL.port) : undefined,
    tls: connectionURL?.protocol === 'wss'
});
exports.urlToConnectionConfig = urlToConnectionConfig;
const createInteractionContextWithLogger = (logger, options, onUnexpectedClose) => (0, client_1.createInteractionContext)((error) => {
    logger.error({ error }, error.message);
}, async (code, reason) => {
    if (code === 1000) {
        logger.info({ code }, reason);
    }
    else {
        logger.error({ code }, 'Connection closed');
        await onUnexpectedClose?.();
    }
}, options);
exports.createInteractionContextWithLogger = createInteractionContextWithLogger;
//# sourceMappingURL=util.js.map
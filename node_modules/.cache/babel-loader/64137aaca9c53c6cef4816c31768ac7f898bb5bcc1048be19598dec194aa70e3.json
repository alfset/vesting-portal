{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ModeInfo = exports.SignerInfo = exports.AuthInfo = exports.TxBody = exports.Tx = void 0;\nvar PublicKey_1 = require(\"./PublicKey\");\nvar signing_1 = require(\"@terra-money/terra.proto/cosmos/tx/signing/v1beta1/signing\");\nvar tx_1 = require(\"@terra-money/terra.proto/cosmos/tx/v1beta1/tx\");\nvar CompactBitArray_1 = require(\"./CompactBitArray\");\nvar Msg_1 = require(\"./Msg\");\nvar Fee_1 = require(\"./Fee\");\nvar Long = __importStar(require(\"long\"));\nvar SignatureV2_1 = require(\"./SignatureV2\");\nvar Tx = /** @class */function () {\n  function Tx(body, auth_info, signatures) {\n    this.body = body;\n    this.auth_info = auth_info;\n    this.signatures = signatures;\n  }\n  Tx.fromAmino = function (data, isClassic) {\n    var signatures = data.value.signatures.map(function (s) {\n      return SignatureV2_1.SignatureV2.fromAmino(s);\n    });\n    return new Tx(new TxBody(data.value.msg.map(function (m) {\n      return Msg_1.Msg.fromAmino(m, isClassic);\n    }), data.value.memo, Number.parseInt(data.value.timeout_height)), new AuthInfo([], Fee_1.Fee.fromAmino(data.value.fee)), signatures.map(function (s) {\n      var _a;\n      return ((_a = s.data.single) === null || _a === void 0 ? void 0 : _a.signature) || '';\n    }));\n  };\n  Tx.fromData = function (data, isClassic) {\n    return new Tx(TxBody.fromData(data.body, isClassic), AuthInfo.fromData(data.auth_info), data.signatures);\n  };\n  Tx.prototype.toData = function (isClassic) {\n    return {\n      body: this.body.toData(isClassic),\n      auth_info: this.auth_info.toData(),\n      signatures: this.signatures\n    };\n  };\n  Tx.unpackAny = function (anyProto, isClassic) {\n    return this.fromProto(tx_1.Tx.decode(anyProto.value), isClassic);\n  };\n  Tx.fromProto = function (proto, isClassic) {\n    return new Tx(TxBody.fromProto(proto.body, isClassic), AuthInfo.fromProto(proto.authInfo), proto.signatures.map(function (sig) {\n      return Buffer.from(sig).toString('base64');\n    }));\n  };\n  Tx.prototype.toProto = function (isClassic) {\n    return tx_1.Tx.fromPartial({\n      body: this.body.toProto(isClassic),\n      authInfo: this.auth_info.toProto(),\n      signatures: this.signatures.map(function (s) {\n        return Buffer.from(s, 'base64');\n      })\n    });\n  };\n  Tx.prototype.toBytes = function (isClassic) {\n    return tx_1.Tx.encode(this.toProto(isClassic)).finish();\n  };\n  Tx.fromBuffer = function (buf, isClassic) {\n    return Tx.fromProto(tx_1.Tx.decode(buf), isClassic);\n  };\n  Tx.prototype.appendEmptySignatures = function (signers) {\n    var _this = this;\n    signers.forEach(function (signer) {\n      var signerInfo;\n      if (signer.publicKey) {\n        if (signer.publicKey instanceof PublicKey_1.LegacyAminoMultisigPublicKey) {\n          signerInfo = new SignerInfo(signer.publicKey, signer.sequenceNumber, new ModeInfo(new ModeInfo.Multi(CompactBitArray_1.CompactBitArray.fromBits(signer.publicKey.pubkeys.length), [])));\n        } else {\n          signerInfo = new SignerInfo(signer.publicKey, signer.sequenceNumber, new ModeInfo(new ModeInfo.Single(ModeInfo.SignMode.SIGN_MODE_DIRECT)));\n        }\n      } else {\n        signerInfo = new SignerInfo(new PublicKey_1.SimplePublicKey(''), signer.sequenceNumber, new ModeInfo(new ModeInfo.Single(ModeInfo.SignMode.SIGN_MODE_DIRECT)));\n      }\n      _this.auth_info.signer_infos.push(signerInfo);\n      _this.signatures.push('');\n    });\n  };\n  Tx.prototype.clearSignatures = function () {\n    this.auth_info.signer_infos = [];\n    this.signatures = [];\n  };\n  Tx.prototype.appendSignatures = function (signatures) {\n    for (var _i = 0, signatures_1 = signatures; _i < signatures_1.length; _i++) {\n      var signature = signatures_1[_i];\n      var _a = signature.data.toModeInfoAndSignature(),\n        modeInfo = _a[0],\n        sigBytes = _a[1];\n      this.signatures.push(Buffer.from(sigBytes).toString('base64'));\n      this.auth_info.signer_infos.push(new SignerInfo(signature.public_key, signature.sequence, modeInfo));\n    }\n  };\n  return Tx;\n}();\nexports.Tx = Tx;\nvar TxBody = /** @class */function () {\n  function TxBody(messages, memo, timeout_height) {\n    this.messages = messages;\n    this.memo = memo;\n    this.timeout_height = timeout_height;\n  }\n  TxBody.fromData = function (data, isClassic) {\n    return new TxBody(data.messages.map(function (m) {\n      return Msg_1.Msg.fromData(m, isClassic);\n    }), data.memo, Number.parseInt(data.timeout_height));\n  };\n  TxBody.prototype.toData = function (isClassic) {\n    var _a, _b;\n    return {\n      memo: (_a = this.memo) !== null && _a !== void 0 ? _a : '',\n      messages: this.messages.map(function (m) {\n        return m.toData(isClassic);\n      }),\n      timeout_height: ((_b = this.timeout_height) !== null && _b !== void 0 ? _b : 0).toFixed()\n    };\n  };\n  TxBody.fromProto = function (proto, isClassic) {\n    return new TxBody(proto.messages.map(function (m) {\n      return Msg_1.Msg.fromProto(m, isClassic);\n    }), proto.memo, proto.timeoutHeight.toNumber());\n  };\n  TxBody.prototype.toProto = function (isClassic) {\n    var _a;\n    return tx_1.TxBody.fromPartial({\n      memo: this.memo,\n      messages: this.messages.map(function (m) {\n        return m.packAny(isClassic);\n      }),\n      timeoutHeight: Long.fromNumber((_a = this.timeout_height) !== null && _a !== void 0 ? _a : 0)\n    });\n  };\n  TxBody.prototype.toBytes = function (isClassic) {\n    return tx_1.TxBody.encode(this.toProto(isClassic)).finish();\n  };\n  return TxBody;\n}();\nexports.TxBody = TxBody;\nvar AuthInfo = /** @class */function () {\n  function AuthInfo(signer_infos, fee) {\n    this.signer_infos = signer_infos;\n    this.fee = fee;\n  }\n  AuthInfo.fromData = function (data) {\n    return new AuthInfo(data.signer_infos.map(function (s) {\n      return SignerInfo.fromData(s);\n    }), Fee_1.Fee.fromData(data.fee));\n  };\n  AuthInfo.prototype.toData = function () {\n    return {\n      fee: this.fee.toData(),\n      signer_infos: this.signer_infos.map(function (info) {\n        return info.toData();\n      })\n    };\n  };\n  AuthInfo.fromProto = function (proto) {\n    return new AuthInfo(proto.signerInfos.map(function (s) {\n      return SignerInfo.fromProto(s);\n    }), Fee_1.Fee.fromProto(proto.fee));\n  };\n  AuthInfo.prototype.toProto = function () {\n    return tx_1.AuthInfo.fromPartial({\n      fee: this.fee.toProto(),\n      signerInfos: this.signer_infos.map(function (info) {\n        return info.toProto();\n      })\n    });\n  };\n  AuthInfo.prototype.toBytes = function () {\n    return tx_1.AuthInfo.encode(this.toProto()).finish();\n  };\n  return AuthInfo;\n}();\nexports.AuthInfo = AuthInfo;\nvar SignerInfo = /** @class */function () {\n  function SignerInfo(public_key, sequence, mode_info) {\n    this.public_key = public_key;\n    this.sequence = sequence;\n    this.mode_info = mode_info;\n  }\n  SignerInfo.fromData = function (data) {\n    var _a;\n    return new SignerInfo(PublicKey_1.PublicKey.fromData((_a = data.public_key) !== null && _a !== void 0 ? _a : new PublicKey_1.SimplePublicKey('').toData()), Number.parseInt(data.sequence), ModeInfo.fromData(data.mode_info));\n  };\n  SignerInfo.prototype.toData = function () {\n    var _a = this,\n      public_key = _a.public_key,\n      sequence = _a.sequence,\n      mode_info = _a.mode_info;\n    return {\n      mode_info: mode_info.toData(),\n      public_key: (public_key === null || public_key === void 0 ? void 0 : public_key.toData()) || null,\n      sequence: sequence.toFixed()\n    };\n  };\n  SignerInfo.fromProto = function (proto) {\n    var _a;\n    return new SignerInfo(PublicKey_1.PublicKey.fromProto((_a = proto.publicKey) !== null && _a !== void 0 ? _a : new PublicKey_1.SimplePublicKey('').packAny()), proto.sequence.toNumber(), ModeInfo.fromProto(proto.modeInfo));\n  };\n  SignerInfo.prototype.toProto = function () {\n    var _a = this,\n      public_key = _a.public_key,\n      sequence = _a.sequence,\n      mode_info = _a.mode_info;\n    return tx_1.SignerInfo.fromPartial({\n      modeInfo: mode_info.toProto(),\n      publicKey: public_key === null || public_key === void 0 ? void 0 : public_key.packAny(),\n      sequence: Long.fromNumber(sequence)\n    });\n  };\n  return SignerInfo;\n}();\nexports.SignerInfo = SignerInfo;\nvar ModeInfo = /** @class */function () {\n  function ModeInfo(mode_info) {\n    if (mode_info instanceof ModeInfo.Single) {\n      this.single = mode_info;\n    } else {\n      this.multi = mode_info;\n    }\n  }\n  ModeInfo.fromData = function (data) {\n    if (data.single) {\n      return new ModeInfo(ModeInfo.Single.fromData(data.single));\n    }\n    if (data.multi) {\n      return new ModeInfo(ModeInfo.Multi.fromData(data.multi));\n    }\n    throw new Error('must be one of single or multi');\n  };\n  ModeInfo.prototype.toData = function () {\n    var _a, _b;\n    return {\n      single: (_a = this.single) === null || _a === void 0 ? void 0 : _a.toData(),\n      multi: (_b = this.multi) === null || _b === void 0 ? void 0 : _b.toData()\n    };\n  };\n  ModeInfo.fromProto = function (proto) {\n    var singleMode = proto.single;\n    var multiMode = proto.multi;\n    return new ModeInfo(singleMode ? ModeInfo.Single.fromProto(singleMode) : ModeInfo.Multi.fromProto(multiMode));\n  };\n  ModeInfo.prototype.toProto = function () {\n    var _a, _b;\n    return tx_1.ModeInfo.fromPartial({\n      multi: (_a = this.multi) === null || _a === void 0 ? void 0 : _a.toProto(),\n      single: (_b = this.single) === null || _b === void 0 ? void 0 : _b.toProto()\n    });\n  };\n  return ModeInfo;\n}();\nexports.ModeInfo = ModeInfo;\n(function (ModeInfo) {\n  ModeInfo.SignMode = signing_1.SignMode;\n  var Single = /** @class */function () {\n    function Single(mode) {\n      this.mode = mode;\n    }\n    Single.fromData = function (data) {\n      return new Single((0, signing_1.signModeFromJSON)(data.mode));\n    };\n    Single.prototype.toData = function () {\n      return {\n        mode: (0, signing_1.signModeToJSON)(this.mode)\n      };\n    };\n    Single.fromProto = function (proto) {\n      return new Single(proto.mode);\n    };\n    Single.prototype.toProto = function () {\n      return tx_1.ModeInfo_Single.fromPartial({\n        mode: this.mode\n      });\n    };\n    return Single;\n  }();\n  ModeInfo.Single = Single;\n  var Multi = /** @class */function () {\n    function Multi(bitarray, modeInfos) {\n      this.bitarray = bitarray;\n      this.modeInfos = modeInfos;\n    }\n    Multi.fromData = function (proto) {\n      return new Multi(CompactBitArray_1.CompactBitArray.fromData(proto.bitarray), proto.mode_infos.map(function (m) {\n        return ModeInfo.fromData(m);\n      }));\n    };\n    Multi.prototype.toData = function () {\n      return {\n        bitarray: this.bitarray.toData(),\n        mode_infos: this.modeInfos.map(function (m) {\n          return m.toData();\n        })\n      };\n    };\n    Multi.fromProto = function (proto) {\n      return new Multi(CompactBitArray_1.CompactBitArray.fromProto(proto.bitarray), proto.modeInfos.map(function (m) {\n        return ModeInfo.fromProto(m);\n      }));\n    };\n    Multi.prototype.toProto = function () {\n      return tx_1.ModeInfo_Multi.fromPartial({\n        bitarray: this.bitarray.toProto(),\n        modeInfos: this.modeInfos.map(function (m) {\n          return m.toProto();\n        })\n      });\n    };\n    return Multi;\n  }();\n  ModeInfo.Multi = Multi;\n})(ModeInfo = exports.ModeInfo || (exports.ModeInfo = {}));\nexports.ModeInfo = ModeInfo;","map":{"version":3,"names":["PublicKey_1","require","signing_1","tx_1","CompactBitArray_1","Msg_1","Fee_1","Long","__importStar","SignatureV2_1","Tx","body","auth_info","signatures","fromAmino","data","isClassic","value","map","s","SignatureV2","TxBody","msg","m","Msg","memo","Number","parseInt","timeout_height","AuthInfo","Fee","fee","_a","single","signature","fromData","prototype","toData","unpackAny","anyProto","fromProto","decode","proto","authInfo","sig","Buffer","from","toString","toProto","fromPartial","toBytes","encode","finish","fromBuffer","buf","appendEmptySignatures","signers","_this","forEach","signer","signerInfo","publicKey","LegacyAminoMultisigPublicKey","SignerInfo","sequenceNumber","ModeInfo","Multi","CompactBitArray","fromBits","pubkeys","length","Single","SignMode","SIGN_MODE_DIRECT","SimplePublicKey","signer_infos","push","clearSignatures","appendSignatures","_i","signatures_1","toModeInfoAndSignature","modeInfo","sigBytes","public_key","sequence","exports","messages","_b","toFixed","timeoutHeight","toNumber","packAny","fromNumber","info","signerInfos","mode_info","PublicKey","multi","Error","singleMode","multiMode","mode","signModeFromJSON","signModeToJSON","ModeInfo_Single","bitarray","modeInfos","mode_infos","ModeInfo_Multi"],"sources":["../../src/core/Tx.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
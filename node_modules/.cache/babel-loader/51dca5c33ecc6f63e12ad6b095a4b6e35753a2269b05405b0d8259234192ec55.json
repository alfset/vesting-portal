{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Packet = void 0;\nvar channel_1 = require(\"@terra-money/terra.proto/ibc/core/channel/v1/channel\");\nvar long_1 = __importDefault(require(\"long\"));\nvar json_1 = require(\"../../../../util/json\");\nvar Height_1 = require(\"../client/Height\");\n/** Packet defines a type that carries data across different chains through IBC */\nvar Packet = /** @class */function (_super) {\n  __extends(Packet, _super);\n  /**\n   * @param port_id port on the counterparty chain which owns the other end of the channel.\n   * @param channel_id channel end on the counterparty chain\n   */\n  function Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height, timeout_timestamp) {\n    var _this = _super.call(this) || this;\n    _this.sequence = sequence;\n    _this.source_port = source_port;\n    _this.source_channel = source_channel;\n    _this.destination_port = destination_port;\n    _this.destination_channel = destination_channel;\n    _this.data = data;\n    _this.timeout_height = timeout_height;\n    _this.timeout_timestamp = timeout_timestamp;\n    return _this;\n  }\n  Packet.fromAmino = function (_data) {\n    var sequence = _data.sequence,\n      source_port = _data.source_port,\n      source_channel = _data.source_channel,\n      destination_port = _data.destination_port,\n      destination_channel = _data.destination_channel,\n      data = _data.data,\n      timeout_height = _data.timeout_height,\n      timeout_timestamp = _data.timeout_timestamp;\n    return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromAmino(timeout_height) : undefined, timeout_timestamp);\n  };\n  Packet.prototype.toAmino = function () {\n    var _a = this,\n      sequence = _a.sequence,\n      source_port = _a.source_port,\n      source_channel = _a.source_channel,\n      destination_port = _a.destination_port,\n      destination_channel = _a.destination_channel,\n      data = _a.data,\n      timeout_height = _a.timeout_height,\n      timeout_timestamp = _a.timeout_timestamp;\n    var res = {\n      sequence: sequence,\n      source_port: source_port,\n      source_channel: source_channel,\n      destination_port: destination_port,\n      destination_channel: destination_channel,\n      data: data,\n      timeout_height: timeout_height ? timeout_height.toAmino() : undefined,\n      timeout_timestamp: timeout_timestamp\n    };\n    return res;\n  };\n  Packet.fromData = function (_data) {\n    var sequence = _data.sequence,\n      source_port = _data.source_port,\n      source_channel = _data.source_channel,\n      destination_port = _data.destination_port,\n      destination_channel = _data.destination_channel,\n      data = _data.data,\n      timeout_height = _data.timeout_height,\n      timeout_timestamp = _data.timeout_timestamp;\n    return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromData(timeout_height) : undefined, Number.parseInt(timeout_timestamp));\n  };\n  Packet.prototype.toData = function () {\n    var _a = this,\n      sequence = _a.sequence,\n      source_port = _a.source_port,\n      source_channel = _a.source_channel,\n      destination_port = _a.destination_port,\n      destination_channel = _a.destination_channel,\n      data = _a.data,\n      timeout_height = _a.timeout_height,\n      timeout_timestamp = _a.timeout_timestamp;\n    var res = {\n      sequence: sequence,\n      source_port: source_port,\n      source_channel: source_channel,\n      destination_port: destination_port,\n      destination_channel: destination_channel,\n      data: data,\n      timeout_height: timeout_height ? timeout_height.toData() : undefined,\n      timeout_timestamp: timeout_timestamp.toFixed()\n    };\n    return res;\n  };\n  Packet.fromProto = function (proto) {\n    return new Packet(proto.sequence.toNumber(), proto.sourcePort, proto.sourceChannel, proto.destinationPort, proto.destinationChannel, Buffer.from(proto.data).toString('base64'), proto.timeoutHeight ? Height_1.Height.fromProto(proto.timeoutHeight) : undefined, proto.timeoutTimestamp.toNumber());\n  };\n  Packet.prototype.toProto = function () {\n    var _a = this,\n      sequence = _a.sequence,\n      source_port = _a.source_port,\n      source_channel = _a.source_channel,\n      destination_port = _a.destination_port,\n      destination_channel = _a.destination_channel,\n      data = _a.data,\n      timeout_height = _a.timeout_height,\n      timeout_timestamp = _a.timeout_timestamp;\n    return channel_1.Packet.fromPartial({\n      sequence: long_1.default.fromNumber(sequence),\n      sourcePort: source_port,\n      sourceChannel: source_channel,\n      destinationPort: destination_port,\n      destinationChannel: destination_channel,\n      data: Buffer.from(data, 'base64'),\n      timeoutHeight: timeout_height ? timeout_height.toProto() : undefined,\n      timeoutTimestamp: long_1.default.fromNumber(timeout_timestamp)\n    });\n  };\n  return Packet;\n}(json_1.JSONSerializable);\nexports.Packet = Packet;","map":{"version":3,"names":["channel_1","require","long_1","__importDefault","json_1","Height_1","Packet","_super","__extends","sequence","source_port","source_channel","destination_port","destination_channel","data","timeout_height","timeout_timestamp","_this","call","fromAmino","_data","Height","undefined","prototype","toAmino","_a","res","fromData","Number","parseInt","toData","toFixed","fromProto","proto","toNumber","sourcePort","sourceChannel","destinationPort","destinationChannel","Buffer","from","toString","timeoutHeight","timeoutTimestamp","toProto","fromPartial","default","fromNumber","JSONSerializable","exports"],"sources":["../../../../../src/core/ibc/core/channel/Packet.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
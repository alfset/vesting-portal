{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Authorization = exports.AuthorizationGrant = void 0;\nvar json_1 = require(\"../../../util/json\");\nvar GenericAuthorization_1 = require(\"./GenericAuthorization\");\nvar SendAuthorization_1 = require(\"./SendAuthorization\");\nvar StakeAuthorization_1 = require(\"./StakeAuthorization\");\nvar authz_1 = require(\"@terra-money/terra.proto/cosmos/authz/v1beta1/authz\");\nvar AuthorizationGrant = /** @class */function (_super) {\n  __extends(AuthorizationGrant, _super);\n  function AuthorizationGrant(authorization, expiration) {\n    var _this = _super.call(this) || this;\n    _this.authorization = authorization;\n    _this.expiration = expiration;\n    return _this;\n  }\n  AuthorizationGrant.fromAmino = function (amino, isClassic) {\n    var authorization = amino.authorization,\n      expiration = amino.expiration;\n    return new AuthorizationGrant(Authorization.fromAmino(authorization, isClassic), new Date(expiration));\n  };\n  AuthorizationGrant.prototype.toAmino = function (isClassic) {\n    var _a = this,\n      authorization = _a.authorization,\n      expiration = _a.expiration;\n    return {\n      authorization: authorization.toAmino(isClassic),\n      expiration: expiration.toISOString().replace(/\\.000Z$/, 'Z')\n    };\n  };\n  AuthorizationGrant.fromData = function (data, isClassic) {\n    var authorization = data.authorization,\n      expiration = data.expiration;\n    return new AuthorizationGrant(Authorization.fromData(authorization, isClassic), new Date(expiration));\n  };\n  AuthorizationGrant.prototype.toData = function (isClassic) {\n    var _a = this,\n      authorization = _a.authorization,\n      expiration = _a.expiration;\n    return {\n      authorization: authorization.toData(isClassic),\n      expiration: expiration.toISOString().replace(/\\.000Z$/, 'Z')\n    };\n  };\n  AuthorizationGrant.fromProto = function (proto, isClassic) {\n    return new AuthorizationGrant(Authorization.fromProto(proto.authorization, isClassic), proto.expiration);\n  };\n  AuthorizationGrant.prototype.toProto = function (isClassic) {\n    var _a = this,\n      authorization = _a.authorization,\n      expiration = _a.expiration;\n    return authz_1.Grant.fromPartial({\n      authorization: authorization.packAny(isClassic),\n      expiration: expiration\n    });\n  };\n  return AuthorizationGrant;\n}(json_1.JSONSerializable);\nexports.AuthorizationGrant = AuthorizationGrant;\nvar Authorization;\n(function (Authorization) {\n  function fromAmino(data, isClassic) {\n    switch (data.type) {\n      case 'msgauth/SendAuthorization':\n      case 'cosmos-sdk/SendAuthorization':\n        return SendAuthorization_1.SendAuthorization.fromAmino(data, isClassic);\n      case 'msgauth/GenericAuthorization':\n      case 'cosmos-sdk/GenericAuthorization':\n        return GenericAuthorization_1.GenericAuthorization.fromAmino(data, isClassic);\n    }\n  }\n  Authorization.fromAmino = fromAmino;\n  function fromData(data, isClassic) {\n    switch (data['@type']) {\n      case '/cosmos.authz.v1beta1.GenericAuthorization':\n        return GenericAuthorization_1.GenericAuthorization.fromData(data, isClassic);\n      case '/cosmos.bank.v1beta1.SendAuthorization':\n        return SendAuthorization_1.SendAuthorization.fromData(data, isClassic);\n      case '/cosmos.staking.v1beta1.StakeAuthorization':\n        return StakeAuthorization_1.StakeAuthorization.fromData(data, isClassic);\n    }\n  }\n  Authorization.fromData = fromData;\n  function fromProto(proto, isClassic) {\n    var typeUrl = proto.typeUrl;\n    switch (typeUrl) {\n      case '/cosmos.authz.v1beta1.GenericAuthorization':\n        return GenericAuthorization_1.GenericAuthorization.unpackAny(proto, isClassic);\n      case '/cosmos.bank.v1beta1.SendAuthorization':\n        return SendAuthorization_1.SendAuthorization.unpackAny(proto, isClassic);\n      case '/cosmos.staking.v1beta1.StakeAuthorization':\n        return StakeAuthorization_1.StakeAuthorization.unpackAny(proto, isClassic);\n    }\n    throw new Error(\"Authorization type \".concat(typeUrl, \" not recognized\"));\n  }\n  Authorization.fromProto = fromProto;\n})(Authorization = exports.Authorization || (exports.Authorization = {}));","map":{"version":3,"names":["json_1","require","GenericAuthorization_1","SendAuthorization_1","StakeAuthorization_1","authz_1","AuthorizationGrant","_super","__extends","authorization","expiration","_this","call","fromAmino","amino","isClassic","Authorization","Date","prototype","toAmino","_a","toISOString","replace","fromData","data","toData","fromProto","proto","toProto","Grant","fromPartial","packAny","JSONSerializable","exports","type","SendAuthorization","GenericAuthorization","StakeAuthorization","typeUrl","unpackAny","Error","concat"],"sources":["../../../../src/core/authz/authorizations/Authorization.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
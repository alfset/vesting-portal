{"ast":null,"code":"import { createContext, useContext } from 'react';\n// @ts-ignore\nexport const WalletContext = /*#__PURE__*/createContext();\nexport function useWallet() {\n  return useContext(WalletContext);\n}\n/**\n * can use insteadof useWallet() on the class component\n */\nexport const WalletConsumer = WalletContext.Consumer;","map":{"version":3,"names":["createContext","useContext","WalletContext","useWallet","WalletConsumer","Consumer"],"sources":["../../../src/@terra-dev/use-wallet/useWallet.ts"],"sourcesContent":["import { NetworkInfo, SignResult } from '@terra-dev/wallet-types';\nimport { CreateTxOptions } from '@terra-money/terra.js';\nimport { Consumer, Context, createContext, useContext } from 'react';\nimport { TxResult } from './tx';\nimport { Connection, ConnectType, WalletInfo, WalletStatus } from './types';\n\nexport interface Wallet {\n  /**\n   * current client status\n   *\n   * this will be one of WalletStatus.INITIALIZING | WalletStatus.WALLET_NOT_CONNECTED | WalletStatus.WALLET_CONNECTED\n   *\n   * INITIALIZING = checking that the session and the chrome extension installation. (show the loading to users)\n   * WALLET_NOT_CONNECTED = there is no connected wallet (show the connect and install options to users)\n   * WALLET_CONNECTED = there is aconnected wallet (show the wallet info and disconnect button to users)\n   *\n   * @see Wallet#recheckStatus\n   * @see WalletController#status\n   */\n  status: WalletStatus;\n\n  /**\n   * current selected network\n   *\n   * - if status is INITIALIZING or WALLET_NOT_CONNECTED = this will be the defaultNetwork\n   * - if status is WALLET_CONNECTED = this depends on the connected environment\n   *\n   * @see WalletProviderProps#defaultNetwork\n   * @see WalletController#network\n   */\n  network: NetworkInfo;\n\n  /**\n   * available connect types on the browser\n   *\n   * @see Wallet#connect\n   * @see WalletController#availableConnectTypes\n   */\n  availableConnectTypes: ConnectType[];\n\n  /**\n   * available connections includes identifier, name, icon\n   *\n   * @example\n   * ```\n   * const { availableConnections, connect } = useWallet()\n   *\n   * return (\n   *  <div>\n   *    {\n   *      availableConnections.map(({type, identifier, name, icon}) => (\n   *        <butotn key={`${type}:${identifier}`} onClick={() => connect(type, identifier)}>\n   *          <img src={icon} /> {name}\n   *        </button>\n   *      ))\n   *    }\n   *  </div>\n   * )\n   * ```\n   */\n  availableConnections: Connection[];\n\n  /**\n   * connect to wallet\n   *\n   * @example\n   * ```\n   * const { status, availableConnectTypes, connect } = useWallet()\n   *\n   * return status === WalletStatus.WALLET_NOT_CONNECTED &&\n   *        availableConnectTypes.includs(ConnectType.CHROME_EXTENSION) &&\n   *  <button onClick={() => connect(ConnectType.CHROME_EXTENSION)}>\n   *    Connct Chrome Extension\n   *  </button>\n   * ```\n   *\n   * @see Wallet#availableConnectTypes\n   * @see WalletController#connect\n   */\n  connect: (type: ConnectType, identifier?: string) => void;\n\n  /**\n   * manual connect to read only session\n   *\n   * @see Wallet#connectReadonly\n   */\n  connectReadonly: (terraAddress: string, network: NetworkInfo) => void;\n\n  /**\n   * available install types on the browser\n   *\n   * in this time, this only contains [ConnectType.CHROME_EXTENSION]\n   *\n   * @see Wallet#install\n   * @see WalletController#availableInstallTypes\n   */\n  availableInstallTypes: ConnectType[];\n\n  /**\n   * install for the connect type\n   *\n   * @example\n   * ```\n   * const { status, availableInstallTypes } = useWallet()\n   *\n   * return status === WalletStatus.WALLET_NOT_CONNECTED &&\n   *        availableInstallTypes.includes(ConnectType.CHROME_EXTENSION) &&\n   *  <button onClick={() => install(ConnectType.CHROME_EXTENSION)}>\n   *    Install Chrome Extension\n   *  </button>\n   * ```\n   *\n   * @see Wallet#availableInstallTypes\n   * @see WalletController#install\n   */\n  install: (type: ConnectType) => void;\n\n  /**\n   * connected wallets\n   *\n   * this will be like\n   * `[{ connectType: ConnectType.WALLETCONNECT, terraAddress: 'XXXXXXXXX' }]`\n   *\n   * in this time, you can get only one wallet. `wallets[0]`\n   *\n   * @see WalletController#wallets\n   */\n  wallets: WalletInfo[];\n\n  /**\n   * disconnect\n   *\n   * @example\n   * ```\n   * const { status, disconnect } = useWallet()\n   *\n   * return status === WalletStatus.WALLET_CONNECTED &&\n   *  <button onClick={() => disconnect()}>\n   *    Disconnect\n   *  </button>\n   * ```\n   */\n  disconnect: () => void;\n\n  /**\n   * reload the connected wallet status\n   *\n   * in this time, this only work on the chrome extension connection\n   *\n   * @see Wallet#status\n   */\n  recheckStatus: () => void;\n\n  /**\n   * post transaction\n   *\n   * @example\n   * ```\n   * const { post } = useWallet()\n   *\n   * const callback = useCallback(async () => {\n   *   try {\n   *    const result: TxResult = await post({...CreateTxOptions})\n   *    // DO SOMETHING...\n   *   } catch (error) {\n   *     if (error instanceof UserDenied) {\n   *       // DO SOMETHING...\n   *     } else {\n   *       // DO SOMETHING...\n   *     }\n   *   }\n   * }, [])\n   * ```\n   *\n   * @param { CreateTxOptions } tx transaction data\n   * @param { { terraAddress?: string } } txTarget - does not work at this time. for the future extension\n   *\n   * @return { Promise<TxResult> }\n   *\n   * @throws { UserDenied } user denied the tx\n   * @throws { CreateTxFailed } did not create txhash (error dose not broadcasted)\n   * @throws { TxFailed } created txhash (error broadcated)\n   * @throws { Timeout } user does not act anything in specific time\n   * @throws { TxUnspecifiedError } unknown error\n   *\n   * @see WalletController#post\n   */\n  post: (\n    tx: CreateTxOptions,\n    txTarget?: { terraAddress?: string },\n  ) => Promise<TxResult>;\n\n  /**\n   * sign transaction\n   *\n   * @example\n   * ```\n   * const { sign } = useWallet()\n   *\n   * const callback = useCallback(async () => {\n   *   try {\n   *    const result: SignResult = await sign({...CreateTxOptions})\n   *\n   *    // Broadcast SignResult\n   *    const { signature, public_key, stdSignMsgData } = result.result\n   *\n   *    const sig = StdSignature.fromData({\n   *      signature,\n   *      pub_key: public_key,\n   *    })\n   *\n   *    const stdSignMsg = StdSignMsg.fromData(stdSignMsgData)\n   *\n   *    const lcd = new LCDClient({\n   *      chainID: connectedWallet.network.chainID,\n   *      URL: connectedWallet.network.lcd,\n   *    })\n   *\n   *    const txResult = await lcd.tx.broadcastSync(\n   *      new StdTx(stdSignMsg.msgs, stdSignMsg.fee, [sig], stdSignMsg.memo),\n   *    )\n   *\n   *    // DO SOMETHING...\n   *   } catch (error) {\n   *     if (error instanceof UserDenied) {\n   *       // DO SOMETHING...\n   *     } else {\n   *       // DO SOMETHING...\n   *     }\n   *   }\n   * }, [])\n   * ```\n   *\n   * @param { CreateTxOptions } tx transaction data\n   * @param { { terraAddress?: string } } txTarget - does not work at this time. for the future extension\n   *\n   * @return { Promise<SignResult> }\n   *\n   * @throws { UserDenied } user denied the tx\n   * @throws { CreateTxFailed } did not create txhash (error dose not broadcasted)\n   * @throws { TxFailed } created txhash (error broadcated)\n   * @throws { Timeout } user does not act anything in specific time\n   * @throws { TxUnspecifiedError } unknown error\n   *\n   * @see WalletController#sign\n   */\n  sign: (\n    tx: CreateTxOptions,\n    txTarget?: { terraAddress?: string },\n  ) => Promise<SignResult>;\n\n  /**\n   * Some mobile wallet emulates the behavior of chrome extension.\n   * It confirms that the current connection environment is such a wallet.\n   * (If you are running connect() by checking availableConnectType, you do not need to use this API.)\n   */\n  isChromeExtensionCompatibleBrowser: () => boolean;\n}\n\n// @ts-ignore\nexport const WalletContext: Context<Wallet> = createContext<Wallet>();\n\nexport function useWallet(): Wallet {\n  return useContext(WalletContext);\n}\n\n/**\n * can use insteadof useWallet() on the class component\n */\nexport const WalletConsumer: Consumer<Wallet> = WalletContext.Consumer;\n"],"mappings":"AAEA,SAA4BA,aAAa,EAAEC,UAAU,QAAQ,OAAO;AAiQpE;AACA,OAAO,MAAMC,aAAa,gBAAoBF,aAAa,EAAU;AAErE,OAAM,SAAUG,SAASA,CAAA;EACvB,OAAOF,UAAU,CAACC,aAAa,CAAC;AAClC;AAEA;;;AAGA,OAAO,MAAME,cAAc,GAAqBF,aAAa,CAACG,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}
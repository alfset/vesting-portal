{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupTxExtension = void 0;\nconst proto_signing_1 = require(\"@cosmjs/proto-signing\");\nconst signing_1 = require(\"cosmjs-types/cosmos/tx/signing/v1beta1/signing\");\nconst service_1 = require(\"cosmjs-types/cosmos/tx/v1beta1/service\");\nconst tx_1 = require(\"cosmjs-types/cosmos/tx/v1beta1/tx\");\nconst long_1 = __importDefault(require(\"long\"));\nconst queryclient_1 = require(\"../../queryclient\");\nfunction setupTxExtension(base) {\n  // Use this service to get easy typed access to query methods\n  // This cannot be used for proof verification\n  const rpc = (0, queryclient_1.createProtobufRpcClient)(base);\n  const queryService = new service_1.ServiceClientImpl(rpc);\n  return {\n    tx: {\n      getTx: async txId => {\n        const request = {\n          hash: txId\n        };\n        const response = await queryService.GetTx(request);\n        return response;\n      },\n      simulate: async (messages, memo, signer, sequence) => {\n        const tx = tx_1.Tx.fromPartial({\n          authInfo: tx_1.AuthInfo.fromPartial({\n            fee: tx_1.Fee.fromPartial({}),\n            signerInfos: [{\n              publicKey: (0, proto_signing_1.encodePubkey)(signer),\n              sequence: long_1.default.fromNumber(sequence, true),\n              modeInfo: {\n                single: {\n                  mode: signing_1.SignMode.SIGN_MODE_UNSPECIFIED\n                }\n              }\n            }]\n          }),\n          body: tx_1.TxBody.fromPartial({\n            messages: Array.from(messages),\n            memo: memo\n          }),\n          signatures: [new Uint8Array()]\n        });\n        const request = service_1.SimulateRequest.fromPartial({\n          txBytes: tx_1.Tx.encode(tx).finish()\n        });\n        const response = await queryService.Simulate(request);\n        return response;\n      }\n    }\n  };\n}\nexports.setupTxExtension = setupTxExtension;","map":{"version":3,"names":["proto_signing_1","require","signing_1","service_1","tx_1","long_1","__importDefault","queryclient_1","setupTxExtension","base","rpc","createProtobufRpcClient","queryService","ServiceClientImpl","tx","getTx","txId","request","hash","response","GetTx","simulate","messages","memo","signer","sequence","Tx","fromPartial","authInfo","AuthInfo","fee","Fee","signerInfos","publicKey","encodePubkey","default","fromNumber","modeInfo","single","mode","SignMode","SIGN_MODE_UNSPECIFIED","body","TxBody","Array","from","signatures","Uint8Array","SimulateRequest","txBytes","encode","finish","Simulate","exports"],"sources":["../../../src/modules/tx/queries.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,SAAA,GAAAD,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AAOA,MAAAG,IAAA,GAAAH,OAAA;AAEA,MAAAI,MAAA,GAAAC,eAAA,CAAAL,OAAA;AAEA,MAAAM,aAAA,GAAAN,OAAA;AAiBA,SAAgBO,gBAAgBA,CAACC,IAAiB;EAChD;EACA;EACA,MAAMC,GAAG,GAAG,IAAAH,aAAA,CAAAI,uBAAuB,EAACF,IAAI,CAAC;EACzC,MAAMG,YAAY,GAAG,IAAIT,SAAA,CAAAU,iBAAiB,CAACH,GAAG,CAAC;EAE/C,OAAO;IACLI,EAAE,EAAE;MACFC,KAAK,EAAE,MAAOC,IAAY,IAAI;QAC5B,MAAMC,OAAO,GAAiB;UAC5BC,IAAI,EAAEF;SACP;QACD,MAAMG,QAAQ,GAAG,MAAMP,YAAY,CAACQ,KAAK,CAACH,OAAO,CAAC;QAClD,OAAOE,QAAQ;MACjB,CAAC;MACDE,QAAQ,EAAE,MAAAA,CACRC,QAAwB,EACxBC,IAAwB,EACxBC,MAAc,EACdC,QAAgB,KACd;QACF,MAAMX,EAAE,GAAGV,IAAA,CAAAsB,EAAE,CAACC,WAAW,CAAC;UACxBC,QAAQ,EAAExB,IAAA,CAAAyB,QAAQ,CAACF,WAAW,CAAC;YAC7BG,GAAG,EAAE1B,IAAA,CAAA2B,GAAG,CAACJ,WAAW,CAAC,EAAE,CAAC;YACxBK,WAAW,EAAE,CACX;cACEC,SAAS,EAAE,IAAAjC,eAAA,CAAAkC,YAAY,EAACV,MAAM,CAAC;cAC/BC,QAAQ,EAAEpB,MAAA,CAAA8B,OAAI,CAACC,UAAU,CAACX,QAAQ,EAAE,IAAI,CAAC;cACzCY,QAAQ,EAAE;gBAAEC,MAAM,EAAE;kBAAEC,IAAI,EAAErC,SAAA,CAAAsC,QAAQ,CAACC;gBAAqB;cAAE;aAC7D;WAEJ,CAAC;UACFC,IAAI,EAAEtC,IAAA,CAAAuC,MAAM,CAAChB,WAAW,CAAC;YACvBL,QAAQ,EAAEsB,KAAK,CAACC,IAAI,CAACvB,QAAQ,CAAC;YAC9BC,IAAI,EAAEA;WACP,CAAC;UACFuB,UAAU,EAAE,CAAC,IAAIC,UAAU,EAAE;SAC9B,CAAC;QACF,MAAM9B,OAAO,GAAGd,SAAA,CAAA6C,eAAe,CAACrB,WAAW,CAAC;UAC1CsB,OAAO,EAAE7C,IAAA,CAAAsB,EAAE,CAACwB,MAAM,CAACpC,EAAE,CAAC,CAACqC,MAAM;SAC9B,CAAC;QACF,MAAMhC,QAAQ,GAAG,MAAMP,YAAY,CAACwC,QAAQ,CAACnC,OAAO,CAAC;QACrD,OAAOE,QAAQ;MACjB;;GAEH;AACH;AA9CAkC,OAAA,CAAA7C,gBAAA,GAAAA,gBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}
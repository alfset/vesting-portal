{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.encode = exports.decode = void 0;\nconst bip66 = require('./bip66');\nconst types = require('./types');\nconst {\n  typeforce\n} = types;\nconst ZERO = Buffer.alloc(1, 0);\nfunction toDER(x) {\n  let i = 0;\n  while (x[i] === 0) ++i;\n  if (i === x.length) return ZERO;\n  x = x.slice(i);\n  if (x[0] & 0x80) return Buffer.concat([ZERO, x], 1 + x.length);\n  return x;\n}\nfunction fromDER(x) {\n  if (x[0] === 0x00) x = x.slice(1);\n  const buffer = Buffer.alloc(32, 0);\n  const bstart = Math.max(0, 32 - x.length);\n  x.copy(buffer, bstart);\n  return buffer;\n}\n// BIP62: 1 byte hashType flag (only 0x01, 0x02, 0x03, 0x81, 0x82 and 0x83 are allowed)\nfunction decode(buffer) {\n  const hashType = buffer.readUInt8(buffer.length - 1);\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4) throw new Error('Invalid hashType ' + hashType);\n  const decoded = bip66.decode(buffer.slice(0, -1));\n  const r = fromDER(decoded.r);\n  const s = fromDER(decoded.s);\n  const signature = Buffer.concat([r, s], 64);\n  return {\n    signature,\n    hashType\n  };\n}\nexports.decode = decode;\nfunction encode(signature, hashType) {\n  typeforce({\n    signature: types.BufferN(64),\n    hashType: types.UInt8\n  }, {\n    signature,\n    hashType\n  });\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4) throw new Error('Invalid hashType ' + hashType);\n  const hashTypeBuffer = Buffer.allocUnsafe(1);\n  hashTypeBuffer.writeUInt8(hashType, 0);\n  const r = toDER(signature.slice(0, 32));\n  const s = toDER(signature.slice(32, 64));\n  return Buffer.concat([bip66.encode(r, s), hashTypeBuffer]);\n}\nexports.encode = encode;","map":{"version":3,"names":["Object","defineProperty","exports","value","encode","decode","bip66","require","types","typeforce","ZERO","Buffer","alloc","toDER","x","i","length","slice","concat","fromDER","buffer","bstart","Math","max","copy","hashType","readUInt8","hashTypeMod","Error","decoded","r","s","signature","BufferN","UInt8","hashTypeBuffer","allocUnsafe","writeUInt8"],"sources":["/workspace/Planq-Dapps/vesting-portal/node_modules/bitcoinjs-lib/src/script_signature.js"],"sourcesContent":["'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.encode = exports.decode = void 0;\nconst bip66 = require('./bip66');\nconst types = require('./types');\nconst { typeforce } = types;\nconst ZERO = Buffer.alloc(1, 0);\nfunction toDER(x) {\n  let i = 0;\n  while (x[i] === 0) ++i;\n  if (i === x.length) return ZERO;\n  x = x.slice(i);\n  if (x[0] & 0x80) return Buffer.concat([ZERO, x], 1 + x.length);\n  return x;\n}\nfunction fromDER(x) {\n  if (x[0] === 0x00) x = x.slice(1);\n  const buffer = Buffer.alloc(32, 0);\n  const bstart = Math.max(0, 32 - x.length);\n  x.copy(buffer, bstart);\n  return buffer;\n}\n// BIP62: 1 byte hashType flag (only 0x01, 0x02, 0x03, 0x81, 0x82 and 0x83 are allowed)\nfunction decode(buffer) {\n  const hashType = buffer.readUInt8(buffer.length - 1);\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const decoded = bip66.decode(buffer.slice(0, -1));\n  const r = fromDER(decoded.r);\n  const s = fromDER(decoded.s);\n  const signature = Buffer.concat([r, s], 64);\n  return { signature, hashType };\n}\nexports.decode = decode;\nfunction encode(signature, hashType) {\n  typeforce(\n    {\n      signature: types.BufferN(64),\n      hashType: types.UInt8,\n    },\n    { signature, hashType },\n  );\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const hashTypeBuffer = Buffer.allocUnsafe(1);\n  hashTypeBuffer.writeUInt8(hashType, 0);\n  const r = toDER(signature.slice(0, 32));\n  const s = toDER(signature.slice(32, 64));\n  return Buffer.concat([bip66.encode(r, s), hashTypeBuffer]);\n}\nexports.encode = encode;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
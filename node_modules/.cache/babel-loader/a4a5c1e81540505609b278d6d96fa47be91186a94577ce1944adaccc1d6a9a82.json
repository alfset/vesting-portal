{"ast":null,"code":"import { AbstractConnector } from \"@web3-react/abstract-connector\";\nimport warning from \"tiny-warning\";\n\n// import { SendReturnResult, SendReturn, Send, SendOld } from \"./types\";\n\nfunction parseSendReturn(sendReturn) {\n  return sendReturn.hasOwnProperty(\"result\") ? sendReturn.result : sendReturn;\n}\nexport class NoTallyProviderError extends Error {\n  constructor() {\n    var _this$constructor$nam, _this$constructor;\n    super();\n    this.name = (_this$constructor$nam = this === null || this === void 0 ? void 0 : (_this$constructor = this.constructor) === null || _this$constructor === void 0 ? void 0 : _this$constructor.name) !== null && _this$constructor$nam !== void 0 ? _this$constructor$nam : '';\n    this.message = \"No Tally provider was found on window.tally.\";\n  }\n}\nexport class UserRejectedRequestError extends Error {\n  constructor() {\n    var _this$constructor$nam2, _this$constructor2;\n    super();\n    this.name = (_this$constructor$nam2 = this === null || this === void 0 ? void 0 : (_this$constructor2 = this.constructor) === null || _this$constructor2 === void 0 ? void 0 : _this$constructor2.name) !== null && _this$constructor$nam2 !== void 0 ? _this$constructor$nam2 : '';\n    this.message = \"The user rejected the request.\";\n  }\n}\nexport class TallyConnector extends AbstractConnector {\n  constructor(kwargs) {\n    super(kwargs);\n    this.handleNetworkChanged = this.handleNetworkChanged.bind(this);\n    this.handleChainChanged = this.handleChainChanged.bind(this);\n    this.handleAccountsChanged = this.handleAccountsChanged.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n  }\n  handleChainChanged(chainId) {\n    if (__DEV__) {\n      console.log(\"Handling 'chainChanged' event with payload\", chainId);\n    }\n    this.emitUpdate({\n      chainId,\n      provider: window.tally.ethereum\n    });\n  }\n  handleAccountsChanged(accounts) {\n    if (__DEV__) {\n      console.log(\"Handling 'accountsChanged' event with payload\", accounts);\n    }\n    if (accounts.length === 0) {\n      this.emitDeactivate();\n    } else {\n      this.emitUpdate({\n        account: accounts[0]\n      });\n    }\n  }\n  handleClose(code, reason) {\n    if (__DEV__) {\n      console.log(\"Handling 'close' event with payload\", code, reason);\n    }\n    this.emitDeactivate();\n  }\n  handleNetworkChanged(networkId) {\n    if (__DEV__) {\n      console.log(\"Handling 'networkChanged' event with payload\", networkId);\n    }\n    this.emitUpdate({\n      chainId: networkId,\n      provider: window.tally.ethereum\n    });\n  }\n  async activate() {\n    var _window, _window$tally, _window6, _window6$tally, _window10, _window10$tally;\n    if (!((_window = window) === null || _window === void 0 ? void 0 : (_window$tally = _window.tally) === null || _window$tally === void 0 ? void 0 : _window$tally.ethereum)) {\n      throw new NoTallyProviderError();\n    }\n    if (window.tally.ethereum.on) {\n      var _window2, _window2$tally, _window3, _window3$tally, _window4, _window4$tally, _window5, _window5$tally;\n      (_window2 = window) === null || _window2 === void 0 ? void 0 : (_window2$tally = _window2.tally) === null || _window2$tally === void 0 ? void 0 : _window2$tally.ethereum.on(\"chainChanged\", this.handleChainChanged);\n      (_window3 = window) === null || _window3 === void 0 ? void 0 : (_window3$tally = _window3.tally) === null || _window3$tally === void 0 ? void 0 : _window3$tally.ethereum.on(\"accountsChanged\", this.handleAccountsChanged);\n      (_window4 = window) === null || _window4 === void 0 ? void 0 : (_window4$tally = _window4.tally) === null || _window4$tally === void 0 ? void 0 : _window4$tally.ethereum.on(\"close\", this.handleClose);\n      (_window5 = window) === null || _window5 === void 0 ? void 0 : (_window5$tally = _window5.tally) === null || _window5$tally === void 0 ? void 0 : _window5$tally.ethereum.on(\"networkChanged\", this.handleNetworkChanged);\n    }\n    if (((_window6 = window) === null || _window6 === void 0 ? void 0 : (_window6$tally = _window6.tally) === null || _window6$tally === void 0 ? void 0 : _window6$tally.ethereum).isMetaMask) {\n      var _window7, _window7$tally;\n      ((_window7 = window) === null || _window7 === void 0 ? void 0 : (_window7$tally = _window7.tally) === null || _window7$tally === void 0 ? void 0 : _window7$tally.ethereum).autoRefreshOnNetworkChange = false;\n    }\n\n    // try to activate + get account via eth_requestAccounts\n    let account;\n    try {\n      var _window8, _window8$tally;\n      account = await ((_window8 = window) === null || _window8 === void 0 ? void 0 : (_window8$tally = _window8.tally) === null || _window8$tally === void 0 ? void 0 : _window8$tally.ethereum.send)(\"eth_requestAccounts\").then(sendReturn => parseSendReturn(sendReturn)[0]);\n    } catch (error) {\n      if (error.code === 4001) {\n        throw new UserRejectedRequestError();\n      }\n      warning(false, \"eth_requestAccounts was unsuccessful, falling back to enable\");\n    }\n\n    // if unsuccessful, try enable\n    if (!account) {\n      var _window9, _window9$tally;\n      // if enable is successful but doesn't return accounts, fall back to getAccount (not happy i have to do this...)\n      account = await ((_window9 = window) === null || _window9 === void 0 ? void 0 : (_window9$tally = _window9.tally) === null || _window9$tally === void 0 ? void 0 : _window9$tally.ethereum.enable().then(sendReturn => sendReturn && parseSendReturn(sendReturn)[0]));\n    }\n    return {\n      provider: (_window10 = window) === null || _window10 === void 0 ? void 0 : (_window10$tally = _window10.tally) === null || _window10$tally === void 0 ? void 0 : _window10$tally.ethereum,\n      ...(account ? {\n        account\n      } : {})\n    };\n  }\n  async getProvider() {\n    var _window11, _window11$tally;\n    return (_window11 = window) === null || _window11 === void 0 ? void 0 : (_window11$tally = _window11.tally) === null || _window11$tally === void 0 ? void 0 : _window11$tally.ethereum;\n  }\n  async getChainId() {\n    var _window12, _window12$tally;\n    if (!((_window12 = window) === null || _window12 === void 0 ? void 0 : (_window12$tally = _window12.tally) === null || _window12$tally === void 0 ? void 0 : _window12$tally.ethereum)) {\n      throw new NoTallyProviderError();\n    }\n    let chainId;\n    try {\n      var _window13, _window13$tally;\n      chainId = await ((_window13 = window) === null || _window13 === void 0 ? void 0 : (_window13$tally = _window13.tally) === null || _window13$tally === void 0 ? void 0 : _window13$tally.ethereum.send)(\"eth_chainId\").then(parseSendReturn);\n    } catch {\n      warning(false, \"eth_chainId was unsuccessful, falling back to net_version\");\n    }\n    if (!chainId) {\n      try {\n        var _window14, _window14$tally;\n        // window?.tally?.ethereum.send('net_version').then((res:any) => {\n        //   console.log(res)\n        // })\n        // chainId = await (window?.tally?.ethereum.send as Send)(\"net_version\").then(\n        //   parseSendReturn\n        // );\n        chainId = await ((_window14 = window) === null || _window14 === void 0 ? void 0 : (_window14$tally = _window14.tally) === null || _window14$tally === void 0 ? void 0 : _window14$tally.ethereum.send('net_version'));\n      } catch {\n        warning(false, \"net_version was unsuccessful, falling back to net version v2\");\n      }\n    }\n    if (!chainId) {\n      try {\n        var _window15, _window15$tally;\n        // chainId = parseSendReturn(\n        //   (window?.tally?.ethereum.send as any)({ method: \"net_version\" })\n        // );\n        chainId = await ((_window15 = window) === null || _window15 === void 0 ? void 0 : (_window15$tally = _window15.tally) === null || _window15$tally === void 0 ? void 0 : _window15$tally.ethereum.send('net_version'));\n      } catch {\n        warning(false, \"net_version v2 was unsuccessful, falling back to manual matches and static properties\");\n      }\n    }\n    if (!chainId) {\n      var _window16, _window16$tally;\n      if (((_window16 = window) === null || _window16 === void 0 ? void 0 : (_window16$tally = _window16.tally) === null || _window16$tally === void 0 ? void 0 : _window16$tally.ethereum).isDapper) {\n        var _window17, _window17$tally;\n        chainId = parseSendReturn(((_window17 = window) === null || _window17 === void 0 ? void 0 : (_window17$tally = _window17.tally) === null || _window17$tally === void 0 ? void 0 : _window17$tally.ethereum).cachedResults.net_version);\n      } else {\n        var _window18, _window18$tally, _window19, _window19$tally, _window20, _window20$tally, _window21, _window21$tally;\n        chainId = ((_window18 = window) === null || _window18 === void 0 ? void 0 : (_window18$tally = _window18.tally) === null || _window18$tally === void 0 ? void 0 : _window18$tally.ethereum).chainId || ((_window19 = window) === null || _window19 === void 0 ? void 0 : (_window19$tally = _window19.tally) === null || _window19$tally === void 0 ? void 0 : _window19$tally.ethereum).netVersion || ((_window20 = window) === null || _window20 === void 0 ? void 0 : (_window20$tally = _window20.tally) === null || _window20$tally === void 0 ? void 0 : _window20$tally.ethereum).networkVersion || ((_window21 = window) === null || _window21 === void 0 ? void 0 : (_window21$tally = _window21.tally) === null || _window21$tally === void 0 ? void 0 : _window21$tally.ethereum)._chainId;\n      }\n    }\n    return chainId;\n  }\n  async getAccount() {\n    var _window22, _window22$tally;\n    if (!((_window22 = window) === null || _window22 === void 0 ? void 0 : (_window22$tally = _window22.tally) === null || _window22$tally === void 0 ? void 0 : _window22$tally.ethereum)) {\n      throw new NoTallyProviderError();\n    }\n    let account;\n    try {\n      var _window23, _window23$tally;\n      // account = await (window?.tally?.ethereum.send as Send)(\"eth_accounts\").then(\n      //   (sendReturn) => parseSendReturn(sendReturn)[0]\n      // );\n      account = await ((_window23 = window) === null || _window23 === void 0 ? void 0 : (_window23$tally = _window23.tally) === null || _window23$tally === void 0 ? void 0 : _window23$tally.ethereum.send('eth_accounts'));\n    } catch {\n      warning(false, \"eth_accounts was unsuccessful, falling back to enable\");\n    }\n    if (!account) {\n      try {\n        var _window24, _window24$tally;\n        account = await ((_window24 = window) === null || _window24 === void 0 ? void 0 : (_window24$tally = _window24.tally) === null || _window24$tally === void 0 ? void 0 : _window24$tally.ethereum.enable().then(sendReturn => parseSendReturn(sendReturn)[0]));\n      } catch {\n        warning(false, \"enable was unsuccessful, falling back to eth_accounts v2\");\n      }\n    }\n    if (!account) {\n      var _window25, _window25$tally;\n      account = parseSendReturn(((_window25 = window) === null || _window25 === void 0 ? void 0 : (_window25$tally = _window25.tally) === null || _window25$tally === void 0 ? void 0 : _window25$tally.ethereum.send)({\n        method: \"eth_accounts\"\n      }))[0];\n    }\n    return account;\n  }\n  deactivate() {\n    var _window26, _window26$tally, _window27, _window27$tally;\n    if (((_window26 = window) === null || _window26 === void 0 ? void 0 : (_window26$tally = _window26.tally) === null || _window26$tally === void 0 ? void 0 : _window26$tally.ethereum) && ((_window27 = window) === null || _window27 === void 0 ? void 0 : (_window27$tally = _window27.tally) === null || _window27$tally === void 0 ? void 0 : _window27$tally.ethereum.removeListener)) {\n      var _window28, _window28$tally, _window29, _window29$tally, _window30, _window30$tally, _window31, _window31$tally;\n      (_window28 = window) === null || _window28 === void 0 ? void 0 : (_window28$tally = _window28.tally) === null || _window28$tally === void 0 ? void 0 : _window28$tally.ethereum.removeListener(\"chainChanged\", this.handleChainChanged);\n      (_window29 = window) === null || _window29 === void 0 ? void 0 : (_window29$tally = _window29.tally) === null || _window29$tally === void 0 ? void 0 : _window29$tally.ethereum.removeListener(\"accountsChanged\", this.handleAccountsChanged);\n      (_window30 = window) === null || _window30 === void 0 ? void 0 : (_window30$tally = _window30.tally) === null || _window30$tally === void 0 ? void 0 : _window30$tally.ethereum.removeListener(\"close\", this.handleClose);\n      (_window31 = window) === null || _window31 === void 0 ? void 0 : (_window31$tally = _window31.tally) === null || _window31$tally === void 0 ? void 0 : _window31$tally.ethereum.removeListener(\"networkChanged\", this.handleNetworkChanged);\n    }\n  }\n  async isAuthorized() {\n    var _window32, _window32$tally;\n    if (!((_window32 = window) === null || _window32 === void 0 ? void 0 : (_window32$tally = _window32.tally) === null || _window32$tally === void 0 ? void 0 : _window32$tally.ethereum)) {\n      return false;\n    }\n    try {\n      var _window33, _window33$tally;\n      return await ((_window33 = window) === null || _window33 === void 0 ? void 0 : (_window33$tally = _window33.tally) === null || _window33$tally === void 0 ? void 0 : _window33$tally.ethereum.send)(\"eth_accounts\").then(sendReturn => {\n        if (parseSendReturn(sendReturn).length > 0) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n    } catch {\n      return false;\n    }\n  }\n}","map":{"version":3,"names":["AbstractConnector","warning","parseSendReturn","sendReturn","hasOwnProperty","result","NoTallyProviderError","Error","constructor","_this$constructor$nam","_this$constructor","name","message","UserRejectedRequestError","_this$constructor$nam2","_this$constructor2","TallyConnector","kwargs","handleNetworkChanged","bind","handleChainChanged","handleAccountsChanged","handleClose","chainId","__DEV__","console","log","emitUpdate","provider","window","tally","ethereum","accounts","length","emitDeactivate","account","code","reason","networkId","activate","_window","_window$tally","_window6","_window6$tally","_window10","_window10$tally","on","_window2","_window2$tally","_window3","_window3$tally","_window4","_window4$tally","_window5","_window5$tally","isMetaMask","_window7","_window7$tally","autoRefreshOnNetworkChange","_window8","_window8$tally","send","then","error","_window9","_window9$tally","enable","getProvider","_window11","_window11$tally","getChainId","_window12","_window12$tally","_window13","_window13$tally","_window14","_window14$tally","_window15","_window15$tally","_window16","_window16$tally","isDapper","_window17","_window17$tally","cachedResults","net_version","_window18","_window18$tally","_window19","_window19$tally","_window20","_window20$tally","_window21","_window21$tally","netVersion","networkVersion","_chainId","getAccount","_window22","_window22$tally","_window23","_window23$tally","_window24","_window24$tally","_window25","_window25$tally","method","deactivate","_window26","_window26$tally","_window27","_window27$tally","removeListener","_window28","_window28$tally","_window29","_window29$tally","_window30","_window30$tally","_window31","_window31$tally","isAuthorized","_window32","_window32$tally","_window33","_window33$tally"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/connectors/tally/index.ts"],"sourcesContent":["import { AbstractConnectorArguments, ConnectorUpdate } from \"@web3-react/types\";\nimport { AbstractConnector } from \"@web3-react/abstract-connector\";\nimport warning from \"tiny-warning\";\n\n// import { SendReturnResult, SendReturn, Send, SendOld } from \"./types\";\nexport type SendReturnResult = { result: any }\nexport type SendReturn = any\n\nexport type Send = (method: string, params?: any[]) => Promise<SendReturnResult | SendReturn>\nexport type SendOld = ({ method }: { method: string }) => Promise<SendReturnResult | SendReturn>\n\nfunction parseSendReturn(sendReturn: SendReturnResult | SendReturn): any {\n  return sendReturn.hasOwnProperty(\"result\") ? sendReturn.result : sendReturn;\n}\n\nexport class NoTallyProviderError extends Error {\n  public constructor() {\n    super();\n    this.name = this?.constructor?.name ?? '';\n    this.message = \"No Tally provider was found on window.tally.\";\n  }\n}\n\nexport class UserRejectedRequestError extends Error {\n  public constructor() {\n    super();\n    this.name = this?.constructor?.name ?? '';\n    this.message = \"The user rejected the request.\";\n  }\n}\n\nexport class TallyConnector extends AbstractConnector {\n  constructor(kwargs: AbstractConnectorArguments) {\n    super(kwargs);\n\n    this.handleNetworkChanged = this.handleNetworkChanged.bind(this);\n    this.handleChainChanged = this.handleChainChanged.bind(this);\n    this.handleAccountsChanged = this.handleAccountsChanged.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  private handleChainChanged(chainId: string | number): void {\n    if (__DEV__) {\n      console.log(\"Handling 'chainChanged' event with payload\", chainId);\n    }\n    this.emitUpdate({ chainId, provider: window.tally.ethereum });\n  }\n\n  private handleAccountsChanged(accounts: string[]): void {\n    if (__DEV__) {\n      console.log(\"Handling 'accountsChanged' event with payload\", accounts);\n    }\n    if (accounts.length === 0) {\n      this.emitDeactivate();\n    } else {\n      this.emitUpdate({ account: accounts[0] });\n    }\n  }\n\n  private handleClose(code: number, reason: string): void {\n    if (__DEV__) {\n      console.log(\"Handling 'close' event with payload\", code, reason);\n    }\n    this.emitDeactivate();\n  }\n\n  private handleNetworkChanged(networkId: string | number): void {\n    if (__DEV__) {\n      console.log(\"Handling 'networkChanged' event with payload\", networkId);\n    }\n    this.emitUpdate({ chainId: networkId, provider: window.tally.ethereum });\n  }\n\n  public async activate(): Promise<ConnectorUpdate> {\n    if (!window?.tally?.ethereum) {\n      throw new NoTallyProviderError();\n    }\n\n    if (window.tally.ethereum.on) {\n      window?.tally?.ethereum.on(\"chainChanged\", this.handleChainChanged);\n      window?.tally?.ethereum.on(\"accountsChanged\", this.handleAccountsChanged);\n      window?.tally?.ethereum.on(\"close\", this.handleClose);\n      window?.tally?.ethereum.on(\"networkChanged\", this.handleNetworkChanged);\n    }\n\n    if ((window?.tally?.ethereum as any).isMetaMask) {\n      (window?.tally?.ethereum as any).autoRefreshOnNetworkChange = false;\n    }\n\n    // try to activate + get account via eth_requestAccounts\n    let account;\n    try {\n      account = await (window?.tally?.ethereum.send as Send)(\n        \"eth_requestAccounts\"\n      ).then((sendReturn) => parseSendReturn(sendReturn)[0]);\n    } catch (error) {\n      if ((error as any).code === 4001) {\n        throw new UserRejectedRequestError();\n      }\n      warning(\n        false,\n        \"eth_requestAccounts was unsuccessful, falling back to enable\"\n      );\n    }\n\n    // if unsuccessful, try enable\n    if (!account) {\n      // if enable is successful but doesn't return accounts, fall back to getAccount (not happy i have to do this...)\n      account = await window?.tally?.ethereum.enable().then(\n        (sendReturn:any) => sendReturn && parseSendReturn(sendReturn)[0]\n      );\n    }\n\n    return { provider: window?.tally?.ethereum, ...(account ? { account } : {}) };\n  }\n\n  public async getProvider(): Promise<any> {\n    return window?.tally?.ethereum;\n  }\n\n  public async getChainId(): Promise<number | string> {\n    if (!window?.tally?.ethereum) {\n      throw new NoTallyProviderError();\n    }\n\n    let chainId;\n    try {\n      chainId = await (window?.tally?.ethereum.send as Send)(\"eth_chainId\").then(\n        parseSendReturn\n      );\n    } catch {\n      warning(\n        false,\n        \"eth_chainId was unsuccessful, falling back to net_version\"\n      );\n    }\n\n    if (!chainId) {\n      try {\n        // window?.tally?.ethereum.send('net_version').then((res:any) => {\n        //   console.log(res)\n        // })\n        // chainId = await (window?.tally?.ethereum.send as Send)(\"net_version\").then(\n        //   parseSendReturn\n        // );\n        chainId = await window?.tally?.ethereum.send('net_version')\n      } catch {\n        warning(\n          false,\n          \"net_version was unsuccessful, falling back to net version v2\"\n        );\n      }\n    }\n\n    if (!chainId) {\n      try {\n        // chainId = parseSendReturn(\n        //   (window?.tally?.ethereum.send as any)({ method: \"net_version\" })\n        // );\n        chainId = await window?.tally?.ethereum.send('net_version')\n      } catch {\n        warning(\n          false,\n          \"net_version v2 was unsuccessful, falling back to manual matches and static properties\"\n        );\n      }\n    }\n\n    if (!chainId) {\n      if ((window?.tally?.ethereum as any).isDapper) {\n        chainId = parseSendReturn(\n          (window?.tally?.ethereum as any).cachedResults.net_version\n        );\n      } else {\n        chainId =\n          (window?.tally?.ethereum as any).chainId ||\n          (window?.tally?.ethereum as any).netVersion ||\n          (window?.tally?.ethereum as any).networkVersion ||\n          (window?.tally?.ethereum as any)._chainId;\n      }\n    }\n\n    return chainId;\n  }\n\n  public async getAccount(): Promise<null | string> {\n    if (!window?.tally?.ethereum) {\n      throw new NoTallyProviderError();\n    }\n\n    let account;\n    try {\n      // account = await (window?.tally?.ethereum.send as Send)(\"eth_accounts\").then(\n      //   (sendReturn) => parseSendReturn(sendReturn)[0]\n      // );\n      account = await window?.tally?.ethereum.send('eth_accounts')\n    } catch {\n      warning(false, \"eth_accounts was unsuccessful, falling back to enable\");\n    }\n\n    if (!account) {\n      try {\n        account = await window?.tally?.ethereum.enable().then(\n          (sendReturn:any) => parseSendReturn(sendReturn)[0]\n        );\n      } catch {\n        warning(\n          false,\n          \"enable was unsuccessful, falling back to eth_accounts v2\"\n        );\n      }\n    }\n\n    if (!account) {\n      account = parseSendReturn(\n        (window?.tally?.ethereum.send as SendOld)({ method: \"eth_accounts\" })\n      )[0];\n    }\n\n    return account;\n  }\n\n  public deactivate() {\n    if (window?.tally?.ethereum && window?.tally?.ethereum.removeListener) {\n      window?.tally?.ethereum.removeListener(\n        \"chainChanged\",\n        this.handleChainChanged\n      );\n      window?.tally?.ethereum.removeListener(\n        \"accountsChanged\",\n        this.handleAccountsChanged\n      );\n      window?.tally?.ethereum.removeListener(\"close\", this.handleClose);\n      window?.tally?.ethereum.removeListener(\n        \"networkChanged\",\n        this.handleNetworkChanged\n      );\n    }\n  }\n\n  public async isAuthorized(): Promise<boolean> {\n    if (!window?.tally?.ethereum) {\n      return false;\n    }\n\n    try {\n      return await (window?.tally?.ethereum.send as Send)(\"eth_accounts\").then(\n        (sendReturn) => {\n          if (parseSendReturn(sendReturn).length > 0) {\n            return true;\n          } else {\n            return false;\n          }\n        }\n      );\n    } catch {\n      return false;\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{namehash}from'ethers/lib/utils';import{useMemo}from'react';import{useSingleCallResult}from'../state/multicall/hooks';import{isAddress}from'../utils';import isZero from'../utils/isZero';import{useENSRegistrarContract,useENSResolverContract}from'./useContract';import useDebounce from'./useDebounce';/**\n * 对地址执行反向查找以查找其名称。\n * 注意，这与查找ENS名称以查找地址不同。\n */export default function useENSName(address){var _resolverAddress$resu,_name$result$,_name$result;const debouncedAddress=useDebounce(address,200);const ensNodeArgument=useMemo(()=>{if(!debouncedAddress||!isAddress(debouncedAddress))return[undefined];try{return debouncedAddress?[namehash(\"\".concat(debouncedAddress.toLowerCase().substr(2),\".addr.reverse\"))]:[undefined];}catch(error){return[undefined];}},[debouncedAddress]);const registrarContract=useENSRegistrarContract(false);// console.log('ensNodeArgument', ensNodeArgument)\nconst resolverAddress=useSingleCallResult(registrarContract,'resolver',ensNodeArgument);const resolverAddressResult=(_resolverAddress$resu=resolverAddress.result)===null||_resolverAddress$resu===void 0?void 0:_resolverAddress$resu[0];// console.log('resolverAddressResult',resolverAddressResult)\nconst resolverContract=useENSResolverContract(resolverAddressResult&&!isZero(resolverAddressResult)?resolverAddressResult:undefined,false);const name=useSingleCallResult(resolverContract,'name',ensNodeArgument);// console.log('name',name)\nconst changed=debouncedAddress!==address;return{ENSName:changed?null:(_name$result$=(_name$result=name.result)===null||_name$result===void 0?void 0:_name$result[0])!==null&&_name$result$!==void 0?_name$result$:null,loading:changed||resolverAddress.loading||name.loading};}","map":{"version":3,"names":["namehash","useMemo","useSingleCallResult","isAddress","isZero","useENSRegistrarContract","useENSResolverContract","useDebounce","useENSName","address","_resolverAddress$resu","_name$result$","_name$result","debouncedAddress","ensNodeArgument","undefined","concat","toLowerCase","substr","error","registrarContract","resolverAddress","resolverAddressResult","result","resolverContract","name","changed","ENSName","loading"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/hooks/useENSName.ts"],"sourcesContent":["import { namehash } from 'ethers/lib/utils'\nimport { useMemo } from 'react'\nimport { useSingleCallResult } from '../state/multicall/hooks'\nimport { isAddress } from '../utils'\nimport isZero from '../utils/isZero'\nimport { useENSRegistrarContract, useENSResolverContract } from './useContract'\nimport useDebounce from './useDebounce'\n\n/**\n * 对地址执行反向查找以查找其名称。\n * 注意，这与查找ENS名称以查找地址不同。\n */\nexport default function useENSName(address?: string): { ENSName: string | null; loading: boolean } {\n  const debouncedAddress = useDebounce(address, 200)\n  const ensNodeArgument = useMemo(() => {\n    if (!debouncedAddress || !isAddress(debouncedAddress)) return [undefined]\n    try {\n      return debouncedAddress ? [namehash(`${debouncedAddress.toLowerCase().substr(2)}.addr.reverse`)] : [undefined]\n    } catch (error) {\n      return [undefined]\n    }\n  }, [debouncedAddress])\n  const registrarContract = useENSRegistrarContract(false)\n  // console.log('ensNodeArgument', ensNodeArgument)\n  const resolverAddress = useSingleCallResult(registrarContract, 'resolver', ensNodeArgument)\n  const resolverAddressResult = resolverAddress.result?.[0]\n  // console.log('resolverAddressResult',resolverAddressResult)\n  const resolverContract = useENSResolverContract(\n    resolverAddressResult && !isZero(resolverAddressResult) ? resolverAddressResult : undefined,\n    false\n  )\n  const name = useSingleCallResult(resolverContract, 'name', ensNodeArgument)\n    // console.log('name',name)\n  const changed = debouncedAddress !== address\n  return {\n    ENSName: changed ? null : name.result?.[0] ?? null,\n    loading: changed || resolverAddress.loading || name.loading\n  }\n}\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,OAAO,CAC/B,OAASC,mBAAmB,KAAQ,0BAA0B,CAC9D,OAASC,SAAS,KAAQ,UAAU,CACpC,MAAO,CAAAC,MAAM,KAAM,iBAAiB,CACpC,OAASC,uBAAuB,CAAEC,sBAAsB,KAAQ,eAAe,CAC/E,MAAO,CAAAC,WAAW,KAAM,eAAe,CAEvC;AACA;AACA;AACA,GACA,cAAe,SAAS,CAAAC,UAAUA,CAACC,OAAgB,CAAgD,KAAAC,qBAAA,CAAAC,aAAA,CAAAC,YAAA,CACjG,KAAM,CAAAC,gBAAgB,CAAGN,WAAW,CAACE,OAAO,CAAE,GAAG,CAAC,CAClD,KAAM,CAAAK,eAAe,CAAGb,OAAO,CAAC,IAAM,CACpC,GAAI,CAACY,gBAAgB,EAAI,CAACV,SAAS,CAACU,gBAAgB,CAAC,CAAE,MAAO,CAACE,SAAS,CAAC,CACzE,GAAI,CACF,MAAO,CAAAF,gBAAgB,CAAG,CAACb,QAAQ,IAAAgB,MAAA,CAAIH,gBAAgB,CAACI,WAAW,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,iBAAe,CAAC,CAAC,CAAG,CAACH,SAAS,CAAC,CAChH,CAAE,MAAOI,KAAK,CAAE,CACd,MAAO,CAACJ,SAAS,CAAC,CACpB,CACF,CAAC,CAAE,CAACF,gBAAgB,CAAC,CAAC,CACtB,KAAM,CAAAO,iBAAiB,CAAGf,uBAAuB,CAAC,KAAK,CAAC,CACxD;AACA,KAAM,CAAAgB,eAAe,CAAGnB,mBAAmB,CAACkB,iBAAiB,CAAE,UAAU,CAAEN,eAAe,CAAC,CAC3F,KAAM,CAAAQ,qBAAqB,EAAAZ,qBAAA,CAAGW,eAAe,CAACE,MAAM,UAAAb,qBAAA,iBAAtBA,qBAAA,CAAyB,CAAC,CAAC,CACzD;AACA,KAAM,CAAAc,gBAAgB,CAAGlB,sBAAsB,CAC7CgB,qBAAqB,EAAI,CAAClB,MAAM,CAACkB,qBAAqB,CAAC,CAAGA,qBAAqB,CAAGP,SAAS,CAC3F,KACF,CAAC,CACD,KAAM,CAAAU,IAAI,CAAGvB,mBAAmB,CAACsB,gBAAgB,CAAE,MAAM,CAAEV,eAAe,CAAC,CACzE;AACF,KAAM,CAAAY,OAAO,CAAGb,gBAAgB,GAAKJ,OAAO,CAC5C,MAAO,CACLkB,OAAO,CAAED,OAAO,CAAG,IAAI,EAAAf,aAAA,EAAAC,YAAA,CAAGa,IAAI,CAACF,MAAM,UAAAX,YAAA,iBAAXA,YAAA,CAAc,CAAC,CAAC,UAAAD,aAAA,UAAAA,aAAA,CAAI,IAAI,CAClDiB,OAAO,CAAEF,OAAO,EAAIL,eAAe,CAACO,OAAO,EAAIH,IAAI,CAACG,OACtD,CAAC,CACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{AbstractConnector}from\"@web3-react/abstract-connector\";import warning from\"tiny-warning\";// import { SendReturnResult, SendReturn, Send, SendOld } from \"./types\";\nfunction parseSendReturn(sendReturn){return sendReturn.hasOwnProperty(\"result\")?sendReturn.result:sendReturn;}export class NoTallyProviderError extends Error{constructor(){var _this$constructor$nam,_this$constructor;super();this.name=(_this$constructor$nam=this===null||this===void 0?void 0:(_this$constructor=this.constructor)===null||_this$constructor===void 0?void 0:_this$constructor.name)!==null&&_this$constructor$nam!==void 0?_this$constructor$nam:'';this.message=\"No Tally provider was found on window.tally.\";}}export class UserRejectedRequestError extends Error{constructor(){var _this$constructor$nam2,_this$constructor2;super();this.name=(_this$constructor$nam2=this===null||this===void 0?void 0:(_this$constructor2=this.constructor)===null||_this$constructor2===void 0?void 0:_this$constructor2.name)!==null&&_this$constructor$nam2!==void 0?_this$constructor$nam2:'';this.message=\"The user rejected the request.\";}}export class TallyConnector extends AbstractConnector{constructor(kwargs){super(kwargs);this.handleNetworkChanged=this.handleNetworkChanged.bind(this);this.handleChainChanged=this.handleChainChanged.bind(this);this.handleAccountsChanged=this.handleAccountsChanged.bind(this);this.handleClose=this.handleClose.bind(this);}handleChainChanged(chainId){if(__DEV__){console.log(\"Handling 'chainChanged' event with payload\",chainId);}this.emitUpdate({chainId,provider:window.tally.ethereum});}handleAccountsChanged(accounts){if(__DEV__){console.log(\"Handling 'accountsChanged' event with payload\",accounts);}if(accounts.length===0){this.emitDeactivate();}else{this.emitUpdate({account:accounts[0]});}}handleClose(code,reason){if(__DEV__){console.log(\"Handling 'close' event with payload\",code,reason);}this.emitDeactivate();}handleNetworkChanged(networkId){if(__DEV__){console.log(\"Handling 'networkChanged' event with payload\",networkId);}this.emitUpdate({chainId:networkId,provider:window.tally.ethereum});}async activate(){var _window,_window$tally,_window6,_window6$tally,_window10,_window10$tally;if(!((_window=window)===null||_window===void 0?void 0:(_window$tally=_window.tally)===null||_window$tally===void 0?void 0:_window$tally.ethereum)){throw new NoTallyProviderError();}if(window.tally.ethereum.on){var _window2,_window2$tally,_window3,_window3$tally,_window4,_window4$tally,_window5,_window5$tally;(_window2=window)===null||_window2===void 0?void 0:(_window2$tally=_window2.tally)===null||_window2$tally===void 0?void 0:_window2$tally.ethereum.on(\"chainChanged\",this.handleChainChanged);(_window3=window)===null||_window3===void 0?void 0:(_window3$tally=_window3.tally)===null||_window3$tally===void 0?void 0:_window3$tally.ethereum.on(\"accountsChanged\",this.handleAccountsChanged);(_window4=window)===null||_window4===void 0?void 0:(_window4$tally=_window4.tally)===null||_window4$tally===void 0?void 0:_window4$tally.ethereum.on(\"close\",this.handleClose);(_window5=window)===null||_window5===void 0?void 0:(_window5$tally=_window5.tally)===null||_window5$tally===void 0?void 0:_window5$tally.ethereum.on(\"networkChanged\",this.handleNetworkChanged);}if(((_window6=window)===null||_window6===void 0?void 0:(_window6$tally=_window6.tally)===null||_window6$tally===void 0?void 0:_window6$tally.ethereum).isMetaMask){var _window7,_window7$tally;((_window7=window)===null||_window7===void 0?void 0:(_window7$tally=_window7.tally)===null||_window7$tally===void 0?void 0:_window7$tally.ethereum).autoRefreshOnNetworkChange=false;}// try to activate + get account via eth_requestAccounts\nlet account;try{var _window8,_window8$tally;account=await((_window8=window)===null||_window8===void 0?void 0:(_window8$tally=_window8.tally)===null||_window8$tally===void 0?void 0:_window8$tally.ethereum.send)(\"eth_requestAccounts\").then(sendReturn=>parseSendReturn(sendReturn)[0]);}catch(error){if(error.code===4001){throw new UserRejectedRequestError();}warning(false,\"eth_requestAccounts was unsuccessful, falling back to enable\");}// if unsuccessful, try enable\nif(!account){var _window9,_window9$tally;// if enable is successful but doesn't return accounts, fall back to getAccount (not happy i have to do this...)\naccount=await((_window9=window)===null||_window9===void 0?void 0:(_window9$tally=_window9.tally)===null||_window9$tally===void 0?void 0:_window9$tally.ethereum.enable().then(sendReturn=>sendReturn&&parseSendReturn(sendReturn)[0]));}return{provider:(_window10=window)===null||_window10===void 0?void 0:(_window10$tally=_window10.tally)===null||_window10$tally===void 0?void 0:_window10$tally.ethereum,...(account?{account}:{})};}async getProvider(){var _window11,_window11$tally;return(_window11=window)===null||_window11===void 0?void 0:(_window11$tally=_window11.tally)===null||_window11$tally===void 0?void 0:_window11$tally.ethereum;}async getChainId(){var _window12,_window12$tally;if(!((_window12=window)===null||_window12===void 0?void 0:(_window12$tally=_window12.tally)===null||_window12$tally===void 0?void 0:_window12$tally.ethereum)){throw new NoTallyProviderError();}let chainId;try{var _window13,_window13$tally;chainId=await((_window13=window)===null||_window13===void 0?void 0:(_window13$tally=_window13.tally)===null||_window13$tally===void 0?void 0:_window13$tally.ethereum.send)(\"eth_chainId\").then(parseSendReturn);}catch{warning(false,\"eth_chainId was unsuccessful, falling back to net_version\");}if(!chainId){try{var _window14,_window14$tally;// window?.tally?.ethereum.send('net_version').then((res:any) => {\n//   console.log(res)\n// })\n// chainId = await (window?.tally?.ethereum.send as Send)(\"net_version\").then(\n//   parseSendReturn\n// );\nchainId=await((_window14=window)===null||_window14===void 0?void 0:(_window14$tally=_window14.tally)===null||_window14$tally===void 0?void 0:_window14$tally.ethereum.send('net_version'));}catch{warning(false,\"net_version was unsuccessful, falling back to net version v2\");}}if(!chainId){try{var _window15,_window15$tally;// chainId = parseSendReturn(\n//   (window?.tally?.ethereum.send as any)({ method: \"net_version\" })\n// );\nchainId=await((_window15=window)===null||_window15===void 0?void 0:(_window15$tally=_window15.tally)===null||_window15$tally===void 0?void 0:_window15$tally.ethereum.send('net_version'));}catch{warning(false,\"net_version v2 was unsuccessful, falling back to manual matches and static properties\");}}if(!chainId){var _window16,_window16$tally;if(((_window16=window)===null||_window16===void 0?void 0:(_window16$tally=_window16.tally)===null||_window16$tally===void 0?void 0:_window16$tally.ethereum).isDapper){var _window17,_window17$tally;chainId=parseSendReturn(((_window17=window)===null||_window17===void 0?void 0:(_window17$tally=_window17.tally)===null||_window17$tally===void 0?void 0:_window17$tally.ethereum).cachedResults.net_version);}else{var _window18,_window18$tally,_window19,_window19$tally,_window20,_window20$tally,_window21,_window21$tally;chainId=((_window18=window)===null||_window18===void 0?void 0:(_window18$tally=_window18.tally)===null||_window18$tally===void 0?void 0:_window18$tally.ethereum).chainId||((_window19=window)===null||_window19===void 0?void 0:(_window19$tally=_window19.tally)===null||_window19$tally===void 0?void 0:_window19$tally.ethereum).netVersion||((_window20=window)===null||_window20===void 0?void 0:(_window20$tally=_window20.tally)===null||_window20$tally===void 0?void 0:_window20$tally.ethereum).networkVersion||((_window21=window)===null||_window21===void 0?void 0:(_window21$tally=_window21.tally)===null||_window21$tally===void 0?void 0:_window21$tally.ethereum)._chainId;}}return chainId;}async getAccount(){var _window22,_window22$tally;if(!((_window22=window)===null||_window22===void 0?void 0:(_window22$tally=_window22.tally)===null||_window22$tally===void 0?void 0:_window22$tally.ethereum)){throw new NoTallyProviderError();}let account;try{var _window23,_window23$tally;// account = await (window?.tally?.ethereum.send as Send)(\"eth_accounts\").then(\n//   (sendReturn) => parseSendReturn(sendReturn)[0]\n// );\naccount=await((_window23=window)===null||_window23===void 0?void 0:(_window23$tally=_window23.tally)===null||_window23$tally===void 0?void 0:_window23$tally.ethereum.send('eth_accounts'));}catch{warning(false,\"eth_accounts was unsuccessful, falling back to enable\");}if(!account){try{var _window24,_window24$tally;account=await((_window24=window)===null||_window24===void 0?void 0:(_window24$tally=_window24.tally)===null||_window24$tally===void 0?void 0:_window24$tally.ethereum.enable().then(sendReturn=>parseSendReturn(sendReturn)[0]));}catch{warning(false,\"enable was unsuccessful, falling back to eth_accounts v2\");}}if(!account){var _window25,_window25$tally;account=parseSendReturn(((_window25=window)===null||_window25===void 0?void 0:(_window25$tally=_window25.tally)===null||_window25$tally===void 0?void 0:_window25$tally.ethereum.send)({method:\"eth_accounts\"}))[0];}return account;}deactivate(){var _window26,_window26$tally,_window27,_window27$tally;if(((_window26=window)===null||_window26===void 0?void 0:(_window26$tally=_window26.tally)===null||_window26$tally===void 0?void 0:_window26$tally.ethereum)&&((_window27=window)===null||_window27===void 0?void 0:(_window27$tally=_window27.tally)===null||_window27$tally===void 0?void 0:_window27$tally.ethereum.removeListener)){var _window28,_window28$tally,_window29,_window29$tally,_window30,_window30$tally,_window31,_window31$tally;(_window28=window)===null||_window28===void 0?void 0:(_window28$tally=_window28.tally)===null||_window28$tally===void 0?void 0:_window28$tally.ethereum.removeListener(\"chainChanged\",this.handleChainChanged);(_window29=window)===null||_window29===void 0?void 0:(_window29$tally=_window29.tally)===null||_window29$tally===void 0?void 0:_window29$tally.ethereum.removeListener(\"accountsChanged\",this.handleAccountsChanged);(_window30=window)===null||_window30===void 0?void 0:(_window30$tally=_window30.tally)===null||_window30$tally===void 0?void 0:_window30$tally.ethereum.removeListener(\"close\",this.handleClose);(_window31=window)===null||_window31===void 0?void 0:(_window31$tally=_window31.tally)===null||_window31$tally===void 0?void 0:_window31$tally.ethereum.removeListener(\"networkChanged\",this.handleNetworkChanged);}}async isAuthorized(){var _window32,_window32$tally;if(!((_window32=window)===null||_window32===void 0?void 0:(_window32$tally=_window32.tally)===null||_window32$tally===void 0?void 0:_window32$tally.ethereum)){return false;}try{var _window33,_window33$tally;return await((_window33=window)===null||_window33===void 0?void 0:(_window33$tally=_window33.tally)===null||_window33$tally===void 0?void 0:_window33$tally.ethereum.send)(\"eth_accounts\").then(sendReturn=>{if(parseSendReturn(sendReturn).length>0){return true;}else{return false;}});}catch{return false;}}}","map":{"version":3,"names":["AbstractConnector","warning","parseSendReturn","sendReturn","hasOwnProperty","result","NoTallyProviderError","Error","constructor","_this$constructor$nam","_this$constructor","name","message","UserRejectedRequestError","_this$constructor$nam2","_this$constructor2","TallyConnector","kwargs","handleNetworkChanged","bind","handleChainChanged","handleAccountsChanged","handleClose","chainId","__DEV__","console","log","emitUpdate","provider","window","tally","ethereum","accounts","length","emitDeactivate","account","code","reason","networkId","activate","_window","_window$tally","_window6","_window6$tally","_window10","_window10$tally","on","_window2","_window2$tally","_window3","_window3$tally","_window4","_window4$tally","_window5","_window5$tally","isMetaMask","_window7","_window7$tally","autoRefreshOnNetworkChange","_window8","_window8$tally","send","then","error","_window9","_window9$tally","enable","getProvider","_window11","_window11$tally","getChainId","_window12","_window12$tally","_window13","_window13$tally","_window14","_window14$tally","_window15","_window15$tally","_window16","_window16$tally","isDapper","_window17","_window17$tally","cachedResults","net_version","_window18","_window18$tally","_window19","_window19$tally","_window20","_window20$tally","_window21","_window21$tally","netVersion","networkVersion","_chainId","getAccount","_window22","_window22$tally","_window23","_window23$tally","_window24","_window24$tally","_window25","_window25$tally","method","deactivate","_window26","_window26$tally","_window27","_window27$tally","removeListener","_window28","_window28$tally","_window29","_window29$tally","_window30","_window30$tally","_window31","_window31$tally","isAuthorized","_window32","_window32$tally","_window33","_window33$tally"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/connectors/tally/index.ts"],"sourcesContent":["import { AbstractConnectorArguments, ConnectorUpdate } from \"@web3-react/types\";\nimport { AbstractConnector } from \"@web3-react/abstract-connector\";\nimport warning from \"tiny-warning\";\n\n// import { SendReturnResult, SendReturn, Send, SendOld } from \"./types\";\nexport type SendReturnResult = { result: any }\nexport type SendReturn = any\n\nexport type Send = (method: string, params?: any[]) => Promise<SendReturnResult | SendReturn>\nexport type SendOld = ({ method }: { method: string }) => Promise<SendReturnResult | SendReturn>\n\nfunction parseSendReturn(sendReturn: SendReturnResult | SendReturn): any {\n  return sendReturn.hasOwnProperty(\"result\") ? sendReturn.result : sendReturn;\n}\n\nexport class NoTallyProviderError extends Error {\n  public constructor() {\n    super();\n    this.name = this?.constructor?.name ?? '';\n    this.message = \"No Tally provider was found on window.tally.\";\n  }\n}\n\nexport class UserRejectedRequestError extends Error {\n  public constructor() {\n    super();\n    this.name = this?.constructor?.name ?? '';\n    this.message = \"The user rejected the request.\";\n  }\n}\n\nexport class TallyConnector extends AbstractConnector {\n  constructor(kwargs: AbstractConnectorArguments) {\n    super(kwargs);\n\n    this.handleNetworkChanged = this.handleNetworkChanged.bind(this);\n    this.handleChainChanged = this.handleChainChanged.bind(this);\n    this.handleAccountsChanged = this.handleAccountsChanged.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  private handleChainChanged(chainId: string | number): void {\n    if (__DEV__) {\n      console.log(\"Handling 'chainChanged' event with payload\", chainId);\n    }\n    this.emitUpdate({ chainId, provider: window.tally.ethereum });\n  }\n\n  private handleAccountsChanged(accounts: string[]): void {\n    if (__DEV__) {\n      console.log(\"Handling 'accountsChanged' event with payload\", accounts);\n    }\n    if (accounts.length === 0) {\n      this.emitDeactivate();\n    } else {\n      this.emitUpdate({ account: accounts[0] });\n    }\n  }\n\n  private handleClose(code: number, reason: string): void {\n    if (__DEV__) {\n      console.log(\"Handling 'close' event with payload\", code, reason);\n    }\n    this.emitDeactivate();\n  }\n\n  private handleNetworkChanged(networkId: string | number): void {\n    if (__DEV__) {\n      console.log(\"Handling 'networkChanged' event with payload\", networkId);\n    }\n    this.emitUpdate({ chainId: networkId, provider: window.tally.ethereum });\n  }\n\n  public async activate(): Promise<ConnectorUpdate> {\n    if (!window?.tally?.ethereum) {\n      throw new NoTallyProviderError();\n    }\n\n    if (window.tally.ethereum.on) {\n      window?.tally?.ethereum.on(\"chainChanged\", this.handleChainChanged);\n      window?.tally?.ethereum.on(\"accountsChanged\", this.handleAccountsChanged);\n      window?.tally?.ethereum.on(\"close\", this.handleClose);\n      window?.tally?.ethereum.on(\"networkChanged\", this.handleNetworkChanged);\n    }\n\n    if ((window?.tally?.ethereum as any).isMetaMask) {\n      (window?.tally?.ethereum as any).autoRefreshOnNetworkChange = false;\n    }\n\n    // try to activate + get account via eth_requestAccounts\n    let account;\n    try {\n      account = await (window?.tally?.ethereum.send as Send)(\n        \"eth_requestAccounts\"\n      ).then((sendReturn) => parseSendReturn(sendReturn)[0]);\n    } catch (error) {\n      if ((error as any).code === 4001) {\n        throw new UserRejectedRequestError();\n      }\n      warning(\n        false,\n        \"eth_requestAccounts was unsuccessful, falling back to enable\"\n      );\n    }\n\n    // if unsuccessful, try enable\n    if (!account) {\n      // if enable is successful but doesn't return accounts, fall back to getAccount (not happy i have to do this...)\n      account = await window?.tally?.ethereum.enable().then(\n        (sendReturn:any) => sendReturn && parseSendReturn(sendReturn)[0]\n      );\n    }\n\n    return { provider: window?.tally?.ethereum, ...(account ? { account } : {}) };\n  }\n\n  public async getProvider(): Promise<any> {\n    return window?.tally?.ethereum;\n  }\n\n  public async getChainId(): Promise<number | string> {\n    if (!window?.tally?.ethereum) {\n      throw new NoTallyProviderError();\n    }\n\n    let chainId;\n    try {\n      chainId = await (window?.tally?.ethereum.send as Send)(\"eth_chainId\").then(\n        parseSendReturn\n      );\n    } catch {\n      warning(\n        false,\n        \"eth_chainId was unsuccessful, falling back to net_version\"\n      );\n    }\n\n    if (!chainId) {\n      try {\n        // window?.tally?.ethereum.send('net_version').then((res:any) => {\n        //   console.log(res)\n        // })\n        // chainId = await (window?.tally?.ethereum.send as Send)(\"net_version\").then(\n        //   parseSendReturn\n        // );\n        chainId = await window?.tally?.ethereum.send('net_version')\n      } catch {\n        warning(\n          false,\n          \"net_version was unsuccessful, falling back to net version v2\"\n        );\n      }\n    }\n\n    if (!chainId) {\n      try {\n        // chainId = parseSendReturn(\n        //   (window?.tally?.ethereum.send as any)({ method: \"net_version\" })\n        // );\n        chainId = await window?.tally?.ethereum.send('net_version')\n      } catch {\n        warning(\n          false,\n          \"net_version v2 was unsuccessful, falling back to manual matches and static properties\"\n        );\n      }\n    }\n\n    if (!chainId) {\n      if ((window?.tally?.ethereum as any).isDapper) {\n        chainId = parseSendReturn(\n          (window?.tally?.ethereum as any).cachedResults.net_version\n        );\n      } else {\n        chainId =\n          (window?.tally?.ethereum as any).chainId ||\n          (window?.tally?.ethereum as any).netVersion ||\n          (window?.tally?.ethereum as any).networkVersion ||\n          (window?.tally?.ethereum as any)._chainId;\n      }\n    }\n\n    return chainId;\n  }\n\n  public async getAccount(): Promise<null | string> {\n    if (!window?.tally?.ethereum) {\n      throw new NoTallyProviderError();\n    }\n\n    let account;\n    try {\n      // account = await (window?.tally?.ethereum.send as Send)(\"eth_accounts\").then(\n      //   (sendReturn) => parseSendReturn(sendReturn)[0]\n      // );\n      account = await window?.tally?.ethereum.send('eth_accounts')\n    } catch {\n      warning(false, \"eth_accounts was unsuccessful, falling back to enable\");\n    }\n\n    if (!account) {\n      try {\n        account = await window?.tally?.ethereum.enable().then(\n          (sendReturn:any) => parseSendReturn(sendReturn)[0]\n        );\n      } catch {\n        warning(\n          false,\n          \"enable was unsuccessful, falling back to eth_accounts v2\"\n        );\n      }\n    }\n\n    if (!account) {\n      account = parseSendReturn(\n        (window?.tally?.ethereum.send as SendOld)({ method: \"eth_accounts\" })\n      )[0];\n    }\n\n    return account;\n  }\n\n  public deactivate() {\n    if (window?.tally?.ethereum && window?.tally?.ethereum.removeListener) {\n      window?.tally?.ethereum.removeListener(\n        \"chainChanged\",\n        this.handleChainChanged\n      );\n      window?.tally?.ethereum.removeListener(\n        \"accountsChanged\",\n        this.handleAccountsChanged\n      );\n      window?.tally?.ethereum.removeListener(\"close\", this.handleClose);\n      window?.tally?.ethereum.removeListener(\n        \"networkChanged\",\n        this.handleNetworkChanged\n      );\n    }\n  }\n\n  public async isAuthorized(): Promise<boolean> {\n    if (!window?.tally?.ethereum) {\n      return false;\n    }\n\n    try {\n      return await (window?.tally?.ethereum.send as Send)(\"eth_accounts\").then(\n        (sendReturn) => {\n          if (parseSendReturn(sendReturn).length > 0) {\n            return true;\n          } else {\n            return false;\n          }\n        }\n      );\n    } catch {\n      return false;\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
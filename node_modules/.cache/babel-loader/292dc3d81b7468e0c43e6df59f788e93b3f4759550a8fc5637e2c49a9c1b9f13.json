{"ast":null,"code":"import{useCallback,// useEffect,\nuseMemo// useState\n}from\"react\";// import axios from \"axios\";\nimport{useTranslation}from'react-i18next';import{useVeMULTIContract,useVeShareContract}from'../../hooks/useContract';import{useActiveWeb3React}from'../../hooks';import{useTxnsErrorTipOpen}from'../../state/application/hooks';import{useTransactionAdder}from'../../state/transactions/hooks';import{BigAmount}from'../../utils/formatBignumber';import{ChainId}from\"../../config/chainConfig/chainId\";import{spportChainArr}from'../../config/chainConfig';import{getNftImage}from'../../utils/getNFTimage';export let WrapType=/*#__PURE__*/function(WrapType){WrapType[WrapType[\"NOT_APPLICABLE\"]=0]=\"NOT_APPLICABLE\";WrapType[WrapType[\"WRAP\"]=1]=\"WRAP\";WrapType[WrapType[\"UNWRAP\"]=2]=\"UNWRAP\";WrapType[WrapType[\"NOCONNECT\"]=3]=\"NOCONNECT\";return WrapType;}({});const NOT_APPLICABLE={wrapType:WrapType.NOT_APPLICABLE};function useChain(data){const list={};// console.log(spportChainArr)\nfor(const c in data){if(!spportChainArr.includes(c))continue;list[c]={...data[c]};}return list;}export const VENFT_BASE_INFO={name:'veDELTA NFT',symbol:'veDELTA',decimals:18};export const veSHARE=useChain({[ChainId.BNB_TEST]:{...VENFT_BASE_INFO,address:'0x4d2E8b5FA1bB62C2e9bBA2b2b23902bf06230345'},[ChainId.BNB]:{...VENFT_BASE_INFO,address:'0x55F8D898760240E6Eff3c2cc23974Ae8C8fcEEfD'}});export const REWARD_TOKEN=useChain({[ChainId.BNB_TEST]:{name:'USDCoin',symbol:'USDC',decimals:18,address:'0x86e2c741Bf2BC6772Fed68a75eaa5bfab4a76d16'},[ChainId.BNB]:{name:'USDCoin',symbol:'USDC',decimals:18,address:'0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d'}});export const VESHARE=useChain({[ChainId.BNB_TEST]:{address:'0x76c11a1de011de898802b1C81bce768d22B431b1'},[ChainId.BNB]:{address:'0x13Ee726D95742D437ebb664Bf0d3fEff8Dbe2a26'}});export function useVeshare(){const{account,chainId}=useActiveWeb3React();// const useLockToken:any = useMemo(() => {\n//   // console.log(MULTI_TOKEN)\n//   // console.log(chainId)\n//   if (chainId && MULTI_TOKEN[chainId]) {\n//     return MULTI_TOKEN[chainId]\n//   }\n//   return undefined\n// }, [chainId])\nconst useVeMultiToken=useMemo(()=>{// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nif(chainId&&veSHARE[chainId])return veSHARE[chainId];return undefined;},[chainId]);const useVeshareToken=useMemo(()=>{// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nif(chainId&&VESHARE[chainId])return VESHARE[chainId];return undefined;},[chainId]);const useRewardToken=useMemo(()=>{// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nif(chainId&&REWARD_TOKEN[chainId])return REWARD_TOKEN[chainId];return undefined;},[chainId]);const veshareMultiContract=useVeMULTIContract(useVeMultiToken===null||useVeMultiToken===void 0?void 0:useVeMultiToken.address);// const rewardContract = useVeMULTIRewardContract(useVeMultiRewardToken?.address)\nconst veshareContract=useVeShareContract(useVeshareToken===null||useVeshareToken===void 0?void 0:useVeshareToken.address);const getVeshareNFTs=useCallback(async()=>{return new Promise(async resolve=>{if(veshareMultiContract&&account&&veshareContract){let nftsLength='';try{nftsLength=await veshareMultiContract.balanceOf(account);}catch(error){console.log(error);}const arr=Array.from({length:parseInt(nftsLength)},(v,i)=>i);try{const nfts=await Promise.all(arr.map(async idx=>{var _reward;const tokenIndex=await veshareMultiContract.tokenOfOwnerByIndex(account,idx);const locked=await veshareContract.tokenInfo(tokenIndex);const endTime=locked['endTime'].toNumber();const tokenURI=await veshareMultiContract.tokenURI(tokenIndex);const data=await getNftImage(tokenURI);// console.log(tokenURI)\n// console.log(test)\n// const url = tokenURI.indexOf('ipfs://') === 0 ? tokenURI.replace('ipfs://', 'https://gateway.pinata.cloud/ipfs/') : ''\n// const {data} = await axios.get(url)\n// console.log(data)\nlet reward;try{// reward = await veshareContract.claimable(idx)\nreward=await veshareContract.claimable(tokenIndex);}catch(error){console.log(error);}return{// ...data,ipfs://QmdfCJixsGErp33CTCom3QiZt24N4q8qFZ58zkVbxQzcyF\n// image: tokenURI.indexOf('ipfs://') === 0 ? tokenURI.replace('ipfs://', 'https://gateway.pinata.cloud/ipfs/') : '',\n// image: 'https://bafybeifin45dnnplmrtj66yxl4xkp6yxoxc52mh64pg5gck7kbuaeeri3u.ipfs.dweb.link/',\nimage:data.imageUrl,index:idx,id:tokenIndex===null||tokenIndex===void 0?void 0:tokenIndex.toString(),lockEnds:endTime,lockStart:locked['startTime'].toNumber(),lockAmount:BigAmount.format(useVeMultiToken.decimals,locked['share'].toString()).toExact(),reward:reward?BigAmount.format(useRewardToken.decimals,(_reward=reward)===null||_reward===void 0?void 0:_reward.toString()).toExact():0,type:'VESHARE'};}));console.log(nfts);// setvestNFTs(nfts)\nresolve(nfts);}catch(error){console.log(error);resolve([]);}}else{resolve([]);}});},[veshareMultiContract,account,veshareContract,useRewardToken]);// useEffect(() => {\n//   getVestNFTs()\n// }, [veshareMultiContract, account, useLockToken, veshareContract, useRewardToken])\n// useInterval(getVestNFTs, 1000 * 10)\nreturn{getVeshareNFTs,useVeshareRewardToken:useRewardToken};}export function useClaimVeshareRewardCallback(claimReward){const{chainId}=useActiveWeb3React();const rewardToken=useMemo(()=>{// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nif(chainId&&VESHARE[chainId])return VESHARE[chainId].address;return undefined;},[chainId]);const contract=useVeShareContract(rewardToken);// const {onChangeViewDtil} = useTxnsDtilOpen()\nconst{onChangeViewErrorTip}=useTxnsErrorTipOpen();const{t}=useTranslation();// console.log(balance?.raw.toString(16))\n// console.log(inputCurrency)\n// 我们总是可以解析输入货币的金额，因为包装是1:1\nconst addTransaction=useTransactionAdder();return useMemo(()=>{// console.log(veMULTI)\n// console.log(contract)\nif(!contract||!chainId||!claimReward)return NOT_APPLICABLE;console.log(claimReward);return{wrapType:WrapType.WRAP,execute:async()=>{const results={};try{const txReceipt=await contract.claimReward(Number(claimReward.id));addTransaction(txReceipt,{summary:\"Claim Reward\"});results.hash=txReceipt===null||txReceipt===void 0?void 0:txReceipt.hash;// onChangeViewDtil(txReceipt?.hash, true)\n}catch(error){console.error('Could not swapout',error);onChangeViewErrorTip(error,true);}return results;},inputError:undefined};},[contract,chainId,addTransaction,t,claimReward]);}","map":{"version":3,"names":["useCallback","useMemo","useTranslation","useVeMULTIContract","useVeShareContract","useActiveWeb3React","useTxnsErrorTipOpen","useTransactionAdder","BigAmount","ChainId","spportChainArr","getNftImage","WrapType","NOT_APPLICABLE","wrapType","useChain","data","list","c","includes","VENFT_BASE_INFO","name","symbol","decimals","veSHARE","BNB_TEST","address","BNB","REWARD_TOKEN","VESHARE","useVeshare","account","chainId","useVeMultiToken","undefined","useVeshareToken","useRewardToken","veshareMultiContract","veshareContract","getVeshareNFTs","Promise","resolve","nftsLength","balanceOf","error","console","log","arr","Array","from","length","parseInt","v","i","nfts","all","map","idx","_reward","tokenIndex","tokenOfOwnerByIndex","locked","tokenInfo","endTime","toNumber","tokenURI","reward","claimable","image","imageUrl","index","id","toString","lockEnds","lockStart","lockAmount","format","toExact","type","useVeshareRewardToken","useClaimVeshareRewardCallback","claimReward","rewardToken","contract","onChangeViewErrorTip","t","addTransaction","WRAP","execute","results","txReceipt","Number","summary","hash","inputError"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/pages/Vest/veshare.ts"],"sourcesContent":["import {\n  useCallback,\n  // useEffect,\n  useMemo,\n  // useState\n} from \"react\";\n// import axios from \"axios\";\nimport { useTranslation } from 'react-i18next'\n\nimport { \n  useVeMULTIContract,\n  useVeShareContract\n} from '../../hooks/useContract'\nimport { useActiveWeb3React } from '../../hooks'\nimport {useTxnsErrorTipOpen} from '../../state/application/hooks'\nimport { useTransactionAdder } from '../../state/transactions/hooks'\nimport {BigAmount} from '../../utils/formatBignumber'\n\nimport { ChainId } from \"../../config/chainConfig/chainId\"\nimport {spportChainArr} from '../../config/chainConfig'\n\nimport {getNftImage} from '../../utils/getNFTimage'\n\nexport enum WrapType {\n  NOT_APPLICABLE,\n  WRAP,\n  UNWRAP,\n  NOCONNECT\n}\n\nconst NOT_APPLICABLE = { wrapType: WrapType.NOT_APPLICABLE }\n\nfunction useChain (data:any) {\n  const list:any = {}\n  // console.log(spportChainArr)\n  for (const c in  data) {\n    if (!spportChainArr.includes(c)) continue\n    list[c] = {\n      ...data[c]\n    }\n  }\n  return list\n}\n\nexport const VENFT_BASE_INFO = {\n  name: 'veDELTA NFT',\n  symbol: 'veDELTA',\n  decimals: 18\n}\n\n\nexport const veSHARE:any = useChain({\n  [ChainId.BNB_TEST]: {\n    ...VENFT_BASE_INFO,\n    address: '0x4d2E8b5FA1bB62C2e9bBA2b2b23902bf06230345'\n  },\n  [ChainId.BNB]: {\n    ...VENFT_BASE_INFO,\n    address: '0x55F8D898760240E6Eff3c2cc23974Ae8C8fcEEfD'\n  },\n})\n\nexport const REWARD_TOKEN:any = useChain({\n  [ChainId.BNB_TEST]: {\n    name: 'USDCoin',\n    symbol: 'USDC',\n    decimals: 18,\n    address: '0x86e2c741Bf2BC6772Fed68a75eaa5bfab4a76d16'\n  },\n  [ChainId.BNB]: {\n    name: 'USDCoin',\n    symbol: 'USDC',\n    decimals: 18,\n    address: '0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d'\n  },\n})\n\nexport const VESHARE:any = useChain({\n  [ChainId.BNB_TEST]: {\n    address: '0x76c11a1de011de898802b1C81bce768d22B431b1'\n  },\n  [ChainId.BNB]: {\n    address: '0x13Ee726D95742D437ebb664Bf0d3fEff8Dbe2a26'\n  },\n})\n\nexport function useVeshare () {\n  const { account, chainId } = useActiveWeb3React()\n  // const useLockToken:any = useMemo(() => {\n  //   // console.log(MULTI_TOKEN)\n  //   // console.log(chainId)\n  //   if (chainId && MULTI_TOKEN[chainId]) {\n  //     return MULTI_TOKEN[chainId]\n  //   }\n  //   return undefined\n  // }, [chainId])\n  const useVeMultiToken = useMemo(() => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (chainId && veSHARE[chainId]) return veSHARE[chainId]\n    return undefined\n  }, [chainId])\n  const useVeshareToken = useMemo(() => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (chainId && VESHARE[chainId]) return VESHARE[chainId]\n    return undefined\n  }, [chainId])\n  const useRewardToken = useMemo(() => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (chainId && REWARD_TOKEN[chainId]) return REWARD_TOKEN[chainId]\n    return undefined\n  }, [chainId])\n  \n  const veshareMultiContract = useVeMULTIContract(useVeMultiToken?.address)\n  // const rewardContract = useVeMULTIRewardContract(useVeMultiRewardToken?.address)\n  const veshareContract = useVeShareContract(useVeshareToken?.address)\n  const getVeshareNFTs = useCallback(async() => {\n    return new Promise(async(resolve) => {\n\n      if (\n        veshareMultiContract\n        && account\n        && veshareContract\n      ) {\n        let nftsLength:any = ''\n        try {\n          nftsLength = await veshareMultiContract.balanceOf(account)\n        } catch (error) {\n          console.log(error)\n        }\n        \n        const arr = Array.from({length: parseInt(nftsLength)}, (v, i) => i)\n        try {\n          const nfts = await Promise.all(\n            arr.map(async (idx) => {\n      \n              const tokenIndex = await veshareMultiContract.tokenOfOwnerByIndex(account, idx)\n              const locked = await veshareContract.tokenInfo(tokenIndex)\n              const endTime = locked['endTime'].toNumber()\n              const tokenURI = await veshareMultiContract.tokenURI(tokenIndex)\n              const data:any = await getNftImage(tokenURI)\n              // console.log(tokenURI)\n              // console.log(test)\n              // const url = tokenURI.indexOf('ipfs://') === 0 ? tokenURI.replace('ipfs://', 'https://gateway.pinata.cloud/ipfs/') : ''\n              // const {data} = await axios.get(url)\n              // console.log(data)\n              let reward:any\n              try {\n                // reward = await veshareContract.claimable(idx)\n                reward = await veshareContract.claimable(tokenIndex)\n              } catch (error) {\n                \n                console.log(error)\n              }\n              return {\n                // ...data,ipfs://QmdfCJixsGErp33CTCom3QiZt24N4q8qFZ58zkVbxQzcyF\n                // image: tokenURI.indexOf('ipfs://') === 0 ? tokenURI.replace('ipfs://', 'https://gateway.pinata.cloud/ipfs/') : '',\n                // image: 'https://bafybeifin45dnnplmrtj66yxl4xkp6yxoxc52mh64pg5gck7kbuaeeri3u.ipfs.dweb.link/',\n                image: data.imageUrl,\n                index: idx,\n                id: tokenIndex?.toString(),\n                lockEnds: endTime,\n                lockStart: locked['startTime'].toNumber(),\n                lockAmount: BigAmount.format(useVeMultiToken.decimals, locked['share'].toString()).toExact(),\n                reward: reward ? BigAmount.format(useRewardToken.decimals, reward?.toString()).toExact() : 0,\n                type: 'VESHARE'\n              }\n            })\n          )\n          console.log(nfts)\n          // setvestNFTs(nfts)\n          resolve(nfts)\n        } catch (error) {\n          console.log(error)\n          resolve([])\n        }\n      } else {\n        resolve([])\n      }\n    })\n  }, [veshareMultiContract, account, veshareContract, useRewardToken])\n  // useEffect(() => {\n  //   getVestNFTs()\n  // }, [veshareMultiContract, account, useLockToken, veshareContract, useRewardToken])\n  // useInterval(getVestNFTs, 1000 * 10)\n  return {\n    getVeshareNFTs,\n    useVeshareRewardToken: useRewardToken\n  }\n}\n\nexport function useClaimVeshareRewardCallback(\n  claimReward: any,\n): { wrapType: WrapType; execute?: undefined | (() => Promise<any>); inputError?: string } {\n  const { chainId } = useActiveWeb3React()\n  const rewardToken = useMemo(() => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (chainId && VESHARE[chainId]) return VESHARE[chainId].address\n    return undefined\n  }, [chainId])\n  const contract = useVeShareContract(rewardToken)\n  // const {onChangeViewDtil} = useTxnsDtilOpen()\n  const {onChangeViewErrorTip} = useTxnsErrorTipOpen()\n  const { t } = useTranslation()\n  // console.log(balance?.raw.toString(16))\n  // console.log(inputCurrency)\n  // 我们总是可以解析输入货币的金额，因为包装是1:1\n  const addTransaction = useTransactionAdder()\n  return useMemo(() => {\n    // console.log(veMULTI)\n    // console.log(contract)\n    if (!contract || !chainId || !claimReward) return NOT_APPLICABLE\n    console.log(claimReward)\n    return {\n      wrapType: WrapType.WRAP,\n      execute:\n        async () => {\n          const results:any = {}\n          try {\n            const txReceipt = await contract.claimReward( Number(claimReward.id) )\n            addTransaction(txReceipt, {\n              summary: `Claim Reward`,\n            })\n            results.hash = txReceipt?.hash\n            // onChangeViewDtil(txReceipt?.hash, true)\n          } catch (error) {\n            console.error('Could not swapout', error)\n            onChangeViewErrorTip(error, true)\n          }\n          return results\n        },\n      inputError: undefined\n    }\n  }, [contract, chainId, addTransaction, t, claimReward])\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TradeAggregationCallBuilder = void 0;\nvar tslib_1 = require(\"tslib\");\nvar call_builder_1 = require(\"./call_builder\");\nvar errors_1 = require(\"./errors\");\nvar allowedResolutions = [60000, 300000, 900000, 3600000, 86400000, 604800000];\nvar TradeAggregationCallBuilder = function (_super) {\n  tslib_1.__extends(TradeAggregationCallBuilder, _super);\n  function TradeAggregationCallBuilder(serverUrl, base, counter, start_time, end_time, resolution, offset) {\n    var _this = _super.call(this, serverUrl) || this;\n    _this.url.segment(\"trade_aggregations\");\n    if (!base.isNative()) {\n      _this.url.setQuery(\"base_asset_type\", base.getAssetType());\n      _this.url.setQuery(\"base_asset_code\", base.getCode());\n      _this.url.setQuery(\"base_asset_issuer\", base.getIssuer());\n    } else {\n      _this.url.setQuery(\"base_asset_type\", \"native\");\n    }\n    if (!counter.isNative()) {\n      _this.url.setQuery(\"counter_asset_type\", counter.getAssetType());\n      _this.url.setQuery(\"counter_asset_code\", counter.getCode());\n      _this.url.setQuery(\"counter_asset_issuer\", counter.getIssuer());\n    } else {\n      _this.url.setQuery(\"counter_asset_type\", \"native\");\n    }\n    if (typeof start_time !== \"number\" || typeof end_time !== \"number\") {\n      throw new errors_1.BadRequestError(\"Invalid time bounds\", [start_time, end_time]);\n    } else {\n      _this.url.setQuery(\"start_time\", start_time.toString());\n      _this.url.setQuery(\"end_time\", end_time.toString());\n    }\n    if (!_this.isValidResolution(resolution)) {\n      throw new errors_1.BadRequestError(\"Invalid resolution\", resolution);\n    } else {\n      _this.url.setQuery(\"resolution\", resolution.toString());\n    }\n    if (!_this.isValidOffset(offset, resolution)) {\n      throw new errors_1.BadRequestError(\"Invalid offset\", offset);\n    } else {\n      _this.url.setQuery(\"offset\", offset.toString());\n    }\n    return _this;\n  }\n  TradeAggregationCallBuilder.prototype.isValidResolution = function (resolution) {\n    for (var _i = 0, allowedResolutions_1 = allowedResolutions; _i < allowedResolutions_1.length; _i++) {\n      var allowed = allowedResolutions_1[_i];\n      if (allowed === resolution) {\n        return true;\n      }\n    }\n    return false;\n  };\n  TradeAggregationCallBuilder.prototype.isValidOffset = function (offset, resolution) {\n    var hour = 3600000;\n    return !(offset > resolution || offset >= 24 * hour || offset % hour !== 0);\n  };\n  return TradeAggregationCallBuilder;\n}(call_builder_1.CallBuilder);\nexports.TradeAggregationCallBuilder = TradeAggregationCallBuilder;","map":{"version":3,"names":["call_builder_1","require","errors_1","allowedResolutions","TradeAggregationCallBuilder","_super","tslib_1","__extends","serverUrl","base","counter","start_time","end_time","resolution","offset","_this","call","url","segment","isNative","setQuery","getAssetType","getCode","getIssuer","BadRequestError","toString","isValidResolution","isValidOffset","prototype","_i","allowedResolutions_1","length","allowed","hour","CallBuilder","exports"],"sources":["../src/trade_aggregation_call_builder.ts"],"sourcesContent":[null],"mappings":";;;;;;;AAEA,IAAAA,cAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAIA,IAAME,kBAAkB,GAAG,CACzB,KAAK,EACL,MAAM,EACN,MAAM,EACN,OAAO,EACP,QAAQ,EACR,SAAS,CACV;AAiBD,IAAAC,2BAAA,aAAAC,MAAA;EAAiDC,OAAA,CAAAC,SAAA,CAAAH,2BAAA,EAAAC,MAAA;EAG/C,SAAAD,4BACEI,SAAc,EACdC,IAAW,EACXC,OAAc,EACdC,UAAkB,EAClBC,QAAgB,EAChBC,UAAkB,EAClBC,MAAc;IAPhB,IAAAC,KAAA,GASEV,MAAA,CAAAW,IAAA,OAAMR,SAAS,CAAC;IAEhBO,KAAI,CAACE,GAAG,CAACC,OAAO,CAAC,oBAAoB,CAAC;IACtC,IAAI,CAACT,IAAI,CAACU,QAAQ,EAAE,EAAE;MACpBJ,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,iBAAiB,EAAEX,IAAI,CAACY,YAAY,EAAE,CAAC;MACzDN,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,iBAAiB,EAAEX,IAAI,CAACa,OAAO,EAAE,CAAC;MACpDP,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,mBAAmB,EAAEX,IAAI,CAACc,SAAS,EAAE,CAAC;KACzD,MAAM;MACLR,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,iBAAiB,EAAE,QAAQ,CAAC;;IAEhD,IAAI,CAACV,OAAO,CAACS,QAAQ,EAAE,EAAE;MACvBJ,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,oBAAoB,EAAEV,OAAO,CAACW,YAAY,EAAE,CAAC;MAC/DN,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,oBAAoB,EAAEV,OAAO,CAACY,OAAO,EAAE,CAAC;MAC1DP,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,sBAAsB,EAAEV,OAAO,CAACa,SAAS,EAAE,CAAC;KAC/D,MAAM;MACLR,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,oBAAoB,EAAE,QAAQ,CAAC;;IAEnD,IAAI,OAAOT,UAAU,KAAK,QAAQ,IAAI,OAAOC,QAAQ,KAAK,QAAQ,EAAE;MAClE,MAAM,IAAIV,QAAA,CAAAsB,eAAe,CAAC,qBAAqB,EAAE,CAACb,UAAU,EAAEC,QAAQ,CAAC,CAAC;KACzE,MAAM;MACLG,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,YAAY,EAAET,UAAU,CAACc,QAAQ,EAAE,CAAC;MACtDV,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,UAAU,EAAER,QAAQ,CAACa,QAAQ,EAAE,CAAC;;IAEpD,IAAI,CAACV,KAAI,CAACW,iBAAiB,CAACb,UAAU,CAAC,EAAE;MACvC,MAAM,IAAIX,QAAA,CAAAsB,eAAe,CAAC,oBAAoB,EAAEX,UAAU,CAAC;KAC5D,MAAM;MACLE,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,YAAY,EAAEP,UAAU,CAACY,QAAQ,EAAE,CAAC;;IAExD,IAAI,CAACV,KAAI,CAACY,aAAa,CAACb,MAAM,EAAED,UAAU,CAAC,EAAE;MAC3C,MAAM,IAAIX,QAAA,CAAAsB,eAAe,CAAC,gBAAgB,EAAEV,MAAM,CAAC;KACpD,MAAM;MACLC,KAAI,CAACE,GAAG,CAACG,QAAQ,CAAC,QAAQ,EAAEN,MAAM,CAACW,QAAQ,EAAE,CAAC;;;EAElD;EAOQrB,2BAAA,CAAAwB,SAAA,CAAAF,iBAAiB,GAAzB,UAA0Bb,UAAkB;IAC1C,KAAsB,IAAAgB,EAAA,IAAkB,EAAlBC,oBAAA,GAAA3B,kBAAkB,EAAlB0B,EAAA,GAAAC,oBAAA,CAAAC,MAAkB,EAAlBF,EAAA,EAAkB,EAAE;MAArC,IAAMG,OAAO,GAAAF,oBAAA,CAAAD,EAAA;MAChB,IAAIG,OAAO,KAAKnB,UAAU,EAAE;QAC1B,OAAO,IAAI;;;IAGf,OAAO,KAAK;EACd,CAAC;EAQOT,2BAAA,CAAAwB,SAAA,CAAAD,aAAa,GAArB,UAAsBb,MAAc,EAAED,UAAkB;IACtD,IAAMoB,IAAI,GAAG,OAAO;IACpB,OAAO,EAAEnB,MAAM,GAAGD,UAAU,IAAIC,MAAM,IAAI,EAAE,GAAGmB,IAAI,IAAInB,MAAM,GAAGmB,IAAI,KAAK,CAAC,CAAC;EAC7E,CAAC;EACH,OAAA7B,2BAAC;AAAD,CAAC,CAvEgDJ,cAAA,CAAAkC,WAAW;AAA/CC,OAAA,CAAA/B,2BAAA,GAAAA,2BAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}
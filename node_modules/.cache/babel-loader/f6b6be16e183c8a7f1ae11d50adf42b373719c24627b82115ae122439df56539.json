{"ast":null,"code":"import _taggedTemplateLiteral from\"/workspace/Planq-Dapps/vesting-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16;import React,{useCallback,useEffect,useMemo,useRef,useState}from\"react\";import styled from\"styled-components\";import{useTranslation}from'react-i18next';import moment from'moment';import{useActiveWeb3React}from'../../hooks';import{useVeMULTIContract,useVeMULTIRewardContract,useTokenContract// useMulticallContract\n}from'../../hooks/useContract';import useInterval from'../../hooks/useInterval';import{useUserSelectChainId}from'../../state/user/hooks';import{BigAmount}from'../../utils/formatBignumber';// import { useApproveCallback, ApprovalState } from '../../hooks/useApproveCallback'\nimport TokenLogo from'../../components/TokenLogo';import{ButtonLight}from'../../components/Button';// import Modal from \"../../components/Modal\";\nimport ModalContent from\"../../components/Modal/ModalContent\";import QuestionHelper from'../../components/QuestionHelper';import{BottomGrouping}from'../../components/swap/styleds';import{ButtonPrimary}from'../../components/Button';import{getLabelPrice}from'../../utils/tools/getPrice';import AppBody from'../AppBody';// import GifIon from '../../assets/images/icon/GIF.svg'\n// import BulbIcon from '../../assets/images/icon/bulb.svg'\nimport{DBTables,DBThead,DBTh,DBTbody,DBTd,TokenTableCoinBox,TokenTableLogo,TokenNameBox,MyBalanceBox,TokenActionBtn,Flex// ChainCardList\n}from'../Dashboard/styleds';import{veMULTI,MULTI_TOKEN,REWARD,REWARD_TOKEN}from'./data';import{useVeshare,useClaimVeshareRewardCallback,veSHARE}from'./veshare';import{useClaimRewardCallback,useWithdrawCallback}from'./hooks';import axios from\"axios\";import{thousandBit}from'../../utils/tools/tools';import config from'../../config';import{selectNetwork}from'../../config/tools/methods';// import {VE_MULTI_REWARD_INTERFACE} from '../../constants/abis/veMULTIReward'\nconst VestContent=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\",\";\\n  width: 100%;\\n  max-width: 1200px;\\n  padding: 30px;\\n\"])),_ref=>{let{theme}=_ref;return theme.flexC;});const CreateLock=styled(TokenActionBtn)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  background:\",\";\\n  width: 120px;\\n  color:#fff;\\n  // margin-bottom:10px;\\n  // padding-left: 12px;\\n  // padding-right: 12px;\\n  padding: 20px var(--space-medium-400, 32px);\\n  font-size: 1rem;\\n  font-weight: bold;\\n  color: \",\";\\n  &.disabled {\\n    opacity: 0.2;\\n  }\\n  &:hover,\\n  &:focus,\\n  &:active {\\n    background: \",\";\\n    opacity: 0.99\\n  }\\n  \",\"\\n\"])),_ref2=>{let{theme}=_ref2;return theme.primary1;},_ref3=>{let{theme}=_ref3;return theme.text5;},_ref4=>{let{theme}=_ref4;return theme.primary1;},_ref5=>{let{theme}=_ref5;return theme.mediaWidth.upToMedium(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n    height: 28px;\\n    margin-bottom: 10px;\\n  \"])));});const CreateLock1=styled(ButtonLight)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  width: auto;\\n  height: 38px;\\n  border-radius: 30px;\\n  background: \",\";\\n  margin: 0 5px 10px;\\n  padding: 20px var(--space-medium-400, 32px);\\n  font-size: 1rem;\\n  font-weight: bold;\\n  color: \",\";\\n  &.disabled {\\n    opacity: 0.2;\\n  }\\n  &:hover,\\n  &:focus,\\n  &:active {\\n    background: \",\";\\n    opacity: 0.99\\n  }\\n  \",\"\\n\"])),_ref6=>{let{theme}=_ref6;return theme.primary1;},_ref7=>{let{theme}=_ref7;return theme.text5;},_ref8=>{let{theme}=_ref8;return theme.primary1;},_ref9=>{let{theme}=_ref9;return theme.mediaWidth.upToMedium(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n    height: 28px;\\n    margin-bottom: 10px;\\n  \"])));});const TokenActionBtn1=styled(ButtonLight)(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  \",\";\\n  font-family: 'Manrope';\\n  min-width: auto!important;\\n  max-width: auto!important;\\n  width: auto;\\n  height: 38px;\\n  padding: 0 15px;\\n  word-break:break-all!important;\\n\\n  border-radius: 0.5625rem;\\n  background: \",\";\\n  margin-right: 0.125rem;\\n\\n  font-size: 0.75rem;\\n  font-weight: 500;\\n\\n  line-height: 1;\\n\\n  color: \",\";\\n  box-shadow: none;\\n  // padding: 0 8px;\\n  text-decoration: none;\\n  &:hover,\\n  &:focus,\\n  &:active {\\n    background: \",\";\\n  }\\n  &.disabled {\\n    opacity: 0.2;\\n  }\\n  \",\"\\n\"])),_ref10=>{let{theme}=_ref10;return theme.flexC;},_ref11=>{let{theme}=_ref11;return theme.selectedBg;},_ref12=>{let{theme}=_ref12;return theme.textColorBold;},_ref13=>{let{theme}=_ref13;return theme.selectedBg;},_ref14=>{let{theme}=_ref14;return theme.mediaWidth.upToMedium(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n    height: 28px;\\n    margin-bottom: 10px;\\n  \"])));});const TokenActionBtn2=styled(TokenActionBtn)(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  min-width: auto!important;\\n  max-width: auto!important;\\n  width: auto;\\n  height: 38px;\\n  padding: 0 15px;\\n  &.disabled {\\n    opacity: 0.2;\\n  }\\n  \",\"\\n\"])),_ref15=>{let{theme}=_ref15;return theme.mediaWidth.upToMedium(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n    height: 28px;\\n    margin-bottom: 10px;\\n  \"])));});const RewardView=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  width:100%;\\n  \",\";\\n  padding: 30px 0;\\n\"])),_ref16=>{let{theme}=_ref16;return theme.flexC;});const RewardLoading=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  \",\";\\n  width: 100%;\\n  padding: 50px 0;\\n  color: \",\";\\n\"])),_ref17=>{let{theme}=_ref17;return theme.flexC;},_ref18=>{let{theme}=_ref18;return theme.textColorBold;});const LogoBox=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  \",\";\\n  width: 46px;\\n  height: 46px;\\n  object-fit: contain;\\n  box-shadow: 0 0.125rem 0.25rem 0 rgba(0, 0, 0, 0.04);\\n  border: solid 0.5px rgba(0, 0, 0, 0.1);\\n  border-radius:100%;\\n  margin: auto;\\n\\n  img{\\n    // height: 24px;\\n    // width: 24px;\\n    display:block;\\n  }\\n\"])),_ref19=>{let{theme}=_ref19;return theme.flexC;});const DataViews=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  \\n  .list {\\n    width: 100%;\\n    \",\";\\n    flex-wrap: wrap;\\n\\n    .item {\\n      width: 32%;\\n      padding: 10px 0;\\n\\n      .content {\\n        width: 100%;\\n        box-shadow: 0.4375rem 0.125rem 1.625rem 0 rgba(0, 0, 0, 0.06);\\n        background-color: \",\";\\n        border-radius: 10px;\\n        padding: 1rem 2.5rem;\\n        min-height: 20vh;\\n\\n        .title {\\n          font-size: 18px;\\n          color: \",\";\\n          margin: 0 0 15px;\\n          font-weight: bold;\\n          white-space: nowrap;\\n          text-align: center;\\n\\n          \",\"\\n        }\\n\\n        .value {\\n          font-size: 12px;\\n          color: \",\";\\n          margin-bottom: 0;\\n          font-weight: 400;\\n          text-align: center;\\n          white-space: nowrap;\\n        }\\n\\n        .loading {\\n          font-size: 14px;\\n          color: \",\";\\n          margin-bottom: 0;\\n          text-align: center;\\n        }\\n      }\\n    }\\n  }\\n\\n  \",\"\\n\"])),_ref20=>{let{theme}=_ref20;return theme.flexBC;},_ref21=>{let{theme}=_ref21;return theme.contentBg;},_ref22=>{let{theme}=_ref22;return theme.text4;},_ref23=>{let{theme}=_ref23;return theme.mediaWidth.upToSmall(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n            font-size: 10px;\\n          \"])));},_ref24=>{let{theme}=_ref24;return theme.textColorBold;},_ref25=>{let{theme}=_ref25;return theme.text1;},_ref26=>{let{theme}=_ref26;return theme.mediaWidth.upToMedium(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n    .list {\\n      .item {\\n        width: 48%;\\n\\n        .content {\\n          padding: 1rem 1rem;\\n\\n          .title {\\n            white-space: nowrap;\\n          }\\n        }\\n      }\\n    }\\n  \"])));});const TokenTableLogoWrapper=styled(TokenTableLogo)(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  img {\\n    max-width: 100%;\\n    max-height: 100%;\\n  }\\n\"])));export default function Vest(){const{t}=useTranslation();const{account,chainId}=useActiveWeb3React();const{setUserSelectNetwork}=useUserSelectChainId();const{getVeshareNFTs,useVeshareRewardToken}=useVeshare();const[vestNFTs,setvestNFTs]=useState();const[veshareNFTs,setVeshareNFTs]=useState();const[modalOpen,setModalOpen]=useState(false);const[claimRewardId,setClaimRewardId]=useState();const[loadingStatus,setLoadingStatus]=useState(0);const[veMultiTotalSupply,setVeMultiTotalSupply]=useState();const[LockedMULTI,setLockedMULTI]=useState();const[circulatingsupply,setCirculatingsupply]=useState();const[curEpochInfo,setCurEpochInfo]=useState();const[totalPower,setTotalPower]=useState();const[epochId,setEpochId]=useState();const[rewardList,setRewardList]=useState();const[latestEpochInfo,setlatestEpochInfo]=useState();const[price,setPrice]=useState(12);const[nftLogoModel,setNftLogoModel]=useState(false);const[nftLogo,setNftLogo]=useState();const[totalAPR,setTotalAPR]=useState();const[disabled,setDisabled]=useState(false);// const viewDatas = useRef<any>({})\nconst supportChainList=useMemo(()=>{const arr=[];for(const c in veSHARE){if(arr.includes(c))continue;arr.push(c);}for(const c in veMULTI){if(arr.includes(c))continue;arr.push(c);}return arr;},[veSHARE,veMULTI]);//console.log(supportChainList)\nconst useVeMultiToken=useMemo(()=>{// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nif(chainId&&veMULTI[chainId])return veMULTI[chainId];return undefined;},[chainId]);const useVeMultiRewardToken=useMemo(()=>{// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nif(chainId&&REWARD[chainId])return REWARD[chainId];return undefined;},[chainId]);const useRewardToken=useMemo(()=>{// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nif(chainId&&REWARD_TOKEN[chainId])return REWARD_TOKEN[chainId];return undefined;},[chainId]);const useLockToken=useMemo(()=>{// console.log(MULTI_TOKEN)\n// console.log(chainId)\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nif(chainId&&MULTI_TOKEN[chainId]){// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nreturn MULTI_TOKEN[chainId];}return undefined;},[chainId]);// console.log(useLockToken)\nconst rewardInfo=useMemo(()=>{if((claimRewardId===null||claimRewardId===void 0?void 0:claimRewardId.id)&&rewardList&&rewardList[claimRewardId===null||claimRewardId===void 0?void 0:claimRewardId.id]){setLoadingStatus(1);return{...rewardList[claimRewardId===null||claimRewardId===void 0?void 0:claimRewardId.id],id:claimRewardId===null||claimRewardId===void 0?void 0:claimRewardId.id};}setLoadingStatus(0);return undefined;},[claimRewardId,rewardList]);// const isSupport = useMemo(() => {\n//   if (!useLockToken) {\n//     return false\n//   }\n//   return true\n// }, [useLockToken])\nconst nftList=useMemo(()=>{const arr=[];if(vestNFTs){arr.push(...vestNFTs);}if(veshareNFTs){arr.push(...veshareNFTs);}return arr;},[veshareNFTs,vestNFTs]);const contract=useVeMULTIContract(useVeMultiToken===null||useVeMultiToken===void 0?void 0:useVeMultiToken.address);const rewardContract=useVeMULTIRewardContract(useVeMultiRewardToken===null||useVeMultiRewardToken===void 0?void 0:useVeMultiRewardToken.address);const ercContract=useTokenContract(useLockToken===null||useLockToken===void 0?void 0:useLockToken.address);// const multicallContract = useMulticallContract()\nconst{execute:onWrap}=useClaimRewardCallback(useVeMultiRewardToken===null||useVeMultiRewardToken===void 0?void 0:useVeMultiRewardToken.address,rewardInfo===null||rewardInfo===void 0?void 0:rewardInfo.id,rewardInfo===null||rewardInfo===void 0?void 0:rewardInfo.list);const{execute:onVeshareWrap}=useClaimVeshareRewardCallback(claimRewardId);const{execute:onWithdrarWrap}=useWithdrawCallback(useVeMultiToken===null||useVeMultiToken===void 0?void 0:useVeMultiToken.address);const rewardEpochIdList=useRef({});// const [approval, approveCallback] = useApproveCallback(formatInputBridgeValue ?? undefined, useVeMultiToken)\nconst getPendingReward=useCallback(async nfts=>{if(rewardContract&&(nfts===null||nfts===void 0?void 0:nfts.id)&&epochId){var _totalReward;// console.log(nfts.id)\nconst arr=[];let totalReward='';const limit=30;// const limit = 10\nconst len=Number(epochId)+1;const initStart=(rewardEpochIdList===null||rewardEpochIdList===void 0?void 0:rewardEpochIdList.current)&&(rewardEpochIdList===null||rewardEpochIdList===void 0?void 0:rewardEpochIdList.current[nfts===null||nfts===void 0?void 0:nfts.id])?rewardEpochIdList.current[nfts===null||nfts===void 0?void 0:nfts.id]:0;for(let i=initStart;i<len;i+=limit){const nextIndex=i+limit>len?len:i+limit;// console.log(nfts.id, i, nextIndex - 1)\ntry{let data=await rewardContract.pendingReward(nfts.id,i,nextIndex-1);data=data&&data[0]?data[0]:'';if(!data)continue;if(!totalReward&&data.reward){// console.log(1)\ntotalReward=data.reward;}else if(data.reward){// console.log(2)\ntotalReward=totalReward.add(data.reward);}arr.push({startEpoch:data.startEpoch.toString(),endEpoch:data.endEpoch.toString(),reward:data.reward.toString()});}catch(error){// console.log(i)\nif(!rewardEpochIdList.current[nfts===null||nfts===void 0?void 0:nfts.id])rewardEpochIdList.current[nfts===null||nfts===void 0?void 0:nfts.id]=nextIndex;else rewardEpochIdList.current[nfts===null||nfts===void 0?void 0:nfts.id]=nextIndex;}}const arr1=[];for(const item of arr){if(arr1.length===0){arr1.push({startEpoch:item.startEpoch,endEpoch:item.endEpoch});}else{const len=arr1.length-1;const obj=arr1[len];if(Number(obj.endEpoch)===Number(item.startEpoch)-1){if(Number(item.endEpoch)-Number(arr1[len].startEpoch)<=limit){arr1[len].endEpoch=item.endEpoch;}else if(Number(item.endEpoch)-Number(arr1[len].startEpoch)>limit){const a1s=Number(arr1[len].startEpoch);arr1[len].endEpoch=a1s+limit-1+'';arr1.push({startEpoch:a1s+limit+'',endEpoch:item.endEpoch});}else{arr1.push({startEpoch:item.startEpoch,endEpoch:item.endEpoch});}}else{arr1.push({startEpoch:item.startEpoch,endEpoch:item.endEpoch});}}}return{list:arr1,totalReward:(_totalReward=totalReward)===null||_totalReward===void 0?void 0:_totalReward.toString()};}return undefined;},[rewardContract,epochId]);const getAllRewards=useCallback(async()=>{if(epochId&&vestNFTs&&vestNFTs.length>0){const list={};for(const obj of vestNFTs){const data=await getPendingReward(obj);if(data){list[obj.id]=data;}}console.log(list);setRewardList(list);}},[epochId,vestNFTs]);useEffect(()=>{getAllRewards();},[epochId,vestNFTs]);const getVestNFTs=useCallback(async()=>{// console.log(useVeMultiToken)\nif(contract&&account&&useLockToken){// console.log(contract)\n// console.log(account)\nconst nftsLength=await contract.balanceOf(account);const totalSupply=await contract.totalSupply();// viewDatas.current['veMultiTotalSupply'] = totalSupply?.toString()\n// setViewDatas({\n//   ...viewDatas,\n//   veMultiTotalSupply: totalSupply?.toString()\n// })\nsetVeMultiTotalSupply(totalSupply===null||totalSupply===void 0?void 0:totalSupply.toString());// console.log('totalSupply',totalSupply.toString())\nconst arr=Array.from({length:parseInt(nftsLength)},(v,i)=>i);// console.log(nftsLength)\n// console.log(arr)\ntry{const nfts=await Promise.all(arr.map(async idx=>{const tokenIndex=await contract.tokenOfOwnerByIndex(account,idx);const locked=await contract.locked(tokenIndex);const lockValue=await contract.balanceOfNFT(tokenIndex);const tokenURI=await contract.tokenURI(tokenIndex);const{data}=await axios.get(tokenURI);// console.log(tokenURI)\n// console.log(data)\n// probably do some decimals math before returning info. Maybe get more info. I don't know what it returns.\nreturn{...data,index:idx,id:tokenIndex===null||tokenIndex===void 0?void 0:tokenIndex.toString(),lockEnds:locked.end.toNumber(),lockAmount:BigAmount.format(useLockToken.decimals,locked.amount).toExact(),lockValue:BigAmount.format(useVeMultiToken.decimals,lockValue).toExact(),type:'VEDELTA'};}));console.log(nfts);setvestNFTs(nfts);}catch(error){console.log(error);}}getVeshareNFTs().then(res=>{// console.log(res)\nsetVeshareNFTs(res);});},[contract,account,useLockToken]);const getAllNft=useCallback(()=>{getVestNFTs();getVeshareNFTs().then(res=>{// console.log(res)\nsetVeshareNFTs(res);});},[getVeshareNFTs,getVestNFTs]);useEffect(()=>{getAllNft();},[contract,account,useLockToken]);useInterval(getAllNft,1000*10);const getCurrentEpochId=useCallback(()=>{console.log(rewardContract);if(rewardContract){rewardContract.getCurrentEpochId().then(res=>{console.log(res.toString());setEpochId(res.toString());}).catch(err=>{console.log(err);setEpochId('0');});}},[rewardContract]);useEffect(()=>{getCurrentEpochId();},[rewardContract]);useInterval(getCurrentEpochId,1000*10);const getCirc=useCallback(()=>{axios.get(\"https://evm.planq.network/api?module=stats&action=tokensupply&contractaddress=0x6aF48997671584672e084Bf2296473677598ee58\").then(res=>{console.log(res);if(res.data){setCirculatingsupply(res.data);}});},[]);useEffect(()=>{getCirc();},[]);useEffect(()=>{if(useLockToken===null||useLockToken===void 0?void 0:useLockToken.label){getLabelPrice(useLockToken===null||useLockToken===void 0?void 0:useLockToken.label).then(res=>{// console.log(useLockToken)\n// console.log(res)\nif(res){setPrice(res);}});}},[useLockToken]);const DataList=useMemo(()=>{const list=[];if(veMultiTotalSupply&&useVeMultiToken){list.push({name:'veDELTA Supply',value:thousandBit(BigAmount.format(useVeMultiToken.decimals,veMultiTotalSupply).toExact(),2),loading:false});}else{list.push({name:'veDELTA Supply',value:'',loading:true});}if(LockedMULTI&&useLockToken){// console.log(BigAmount.format(0,'10').toExact())\nconst value=BigAmount.format(useLockToken.decimals,LockedMULTI).toExact();list.push({name:'Locked DELTA',value:thousandBit(value,2),// value: value.toString().replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,').toLocaleString(),\nloading:false});}else{list.push({name:'Locked DELTA',value:'',loading:true});}if(LockedMULTI&&circulatingsupply&&useLockToken){const value=Number(BigAmount.format(useLockToken.decimals,LockedMULTI).toExact())/circulatingsupply;list.push({name:'% Circ. DELTA Locked',value:thousandBit(value*100,2)+'%',loading:false});}else{list.push({name:'% Circ. DELTA Locked',value:'',loading:true});}if(veMultiTotalSupply&&LockedMULTI&&useVeMultiToken&&useLockToken){// if (totalPower && LockedMULTI) {\n// const tp = BigAmount.format(useVeMultiToken.decimals, totalPower)\n// const lm = BigAmount.format(useLockToken.decimals, LockedMULTI)\n// const fourYear:any = 60*60*24*1460\n// const oneYear = BigAmount.format(0, (60*60*24*365) + '')\n// const value = tp.divide(lm).multiply(BigAmount.format(1, fourYear)).divide(oneYear)\nconst vms=BigAmount.format(useVeMultiToken.decimals,veMultiTotalSupply);const lm=BigAmount.format(useLockToken.decimals,LockedMULTI);const fourYear=BigAmount.format(0,60*60*24*1460+'');const oneYear=BigAmount.format(0,60*60*24*365+'');const value=vms.divide(lm).multiply(fourYear).divide(oneYear);list.push({name:'Avg. Lock Time (years)',value:value.toSignificant(2),loading:false});}else{list.push({name:'Avg. Lock Time (years)',value:'',loading:true});}if(curEpochInfo&&useRewardToken){// const oneYear = BigAmount.format(1, (60*60*24*365) + '')\n// console.log(curEpochInfo)\nconst time=Number(curEpochInfo.endTime)-Number(curEpochInfo.startTime);const weektime=60*60*24*7;const per=weektime/time;const value=BigAmount.format(useRewardToken.decimals,curEpochInfo.totalReward).toExact();// console.log(time)\n// console.log(per)\nlist.push({name:'Est. Yield Per Week',value:thousandBit(Number(value)*per,2)+' '+useRewardToken.symbol,loading:false});}else{list.push({name:'Est. Yield Per Week',value:'',loading:true});}if((latestEpochInfo||curEpochInfo)&&totalPower&&price&&useRewardToken&&useVeMultiToken){const usrEpochInfo=latestEpochInfo&&(latestEpochInfo===null||latestEpochInfo===void 0?void 0:latestEpochInfo.totalReward)!=='0'?latestEpochInfo:curEpochInfo;const tr=BigAmount.format(useRewardToken.decimals,(usrEpochInfo===null||usrEpochInfo===void 0?void 0:usrEpochInfo.totalReward)?usrEpochInfo===null||usrEpochInfo===void 0?void 0:usrEpochInfo.totalReward:'0');const tp=BigAmount.format(useVeMultiToken.decimals,totalPower);const tokenPrice=BigAmount.format(0,parseInt(price)+'');const oneYear=BigAmount.format(0,60*60*24*365+'');const time=BigAmount.format(0,(usrEpochInfo===null||usrEpochInfo===void 0?void 0:usrEpochInfo.endTime)?Number(usrEpochInfo.endTime)-Number(usrEpochInfo.startTime)+'':'0');const per=BigAmount.format(0,'100');// console.log(latestEpochInfo)\n// console.log(curEpochInfo)\n// console.log(tr.toExact())\n// console.log(tp.toExact())\nif(tr.greaterThan('0')&&tokenPrice.greaterThan('0')&&time.greaterThan('0')&&tp.greaterThan('0')){const apr=tr.divide(tokenPrice).multiply(oneYear).divide(time).divide(tp).multiply(per);list.push({name:'APR',value:apr.toSignificant(2)+'%',loading:false,question:'Assumes 1 veDELTA = 1 DELTA (1 DELTA locked 4 years)'});setTotalAPR(apr.toSignificant(2)+'%');}else{list.push({name:'APR',value:'- %',loading:false,question:'Assumes 1 veDELTA = 1 DELTA (1 DELTA locked 4 years)'});}}else{list.push({name:'APR',value:'',loading:true,question:'Assumes veDELTA = 1 DELTA (1 DELTA locked 4 years)'});}// console.log(list)\nreturn list;},[totalPower,curEpochInfo,circulatingsupply,LockedMULTI,veMultiTotalSupply,latestEpochInfo,price,useVeMultiToken,useLockToken]);const getMultiInfo=useCallback(()=>{if(ercContract){if(useVeMultiToken===null||useVeMultiToken===void 0?void 0:useVeMultiToken.address){ercContract.balanceOf(useVeMultiToken===null||useVeMultiToken===void 0?void 0:useVeMultiToken.address).then(res=>{setLockedMULTI(res===null||res===void 0?void 0:res.toString());});}}},[ercContract,useVeMultiToken]);useEffect(()=>{getMultiInfo();},[ercContract]);useInterval(getMultiInfo,1000*10);const getEpochInfo=useCallback(async()=>{console.log(epochId);if(rewardContract&&epochId){// const EpochId = await rewardContract.getCurrentEpochId()\nrewardContract.getEpochInfo(epochId).then(res=>{// console.log(res)\nconst data={startTime:res[0].toString(),endTime:res[1].toString(),totalReward:res[2].toString()};setCurEpochInfo(data);setlatestEpochInfo(data);}).catch(err=>{console.log(err);setCurEpochInfo('');});// rewardContract.getEpochInfo(Number(epochId) === 0 ? 0 : Number(epochId) + 1).then((res:any) => {\n//   // console.log(res)\n//   setlatestEpochInfo({\n//     startTime: res[0].toString(),\n//     endTime: res[1].toString(),\n//     totalReward: res[2].toString(),\n//   })\n// }).catch((err:any) => {\n//   console.log(err)\n// })\nrewardContract.getEpochTotalPower(epochId).then(res=>{// console.log(res)\nsetTotalPower(res.toString());}).catch(err=>{console.log(err);setTotalPower('');});}},[rewardContract,epochId]);useEffect(()=>{getEpochInfo();},[rewardContract,epochId]);useInterval(getEpochInfo,1000*10);function getUserAPR(UserPower,UserMulti){// const usrEpochInfo = latestEpochInfo ? latestEpochInfo : curEpochInfo\nconst usrEpochInfo=latestEpochInfo&&(latestEpochInfo===null||latestEpochInfo===void 0?void 0:latestEpochInfo.totalReward)!=='0'?latestEpochInfo:curEpochInfo;const tr=(usrEpochInfo===null||usrEpochInfo===void 0?void 0:usrEpochInfo.totalReward)&&useRewardToken.decimals?BigAmount.format(useRewardToken.decimals,usrEpochInfo.totalReward).toExact():'';const time=usrEpochInfo?Number(usrEpochInfo.endTime)-Number(usrEpochInfo.startTime):'';const tokenPrice=price?Number(price):'';const tp=totalPower&&useVeMultiToken.decimals?BigAmount.format(useVeMultiToken.decimals,totalPower).toExact():'';const oneYear=60*60*24*365;if(tr&&tokenPrice&&tp&&Number(tp)>0&&UserPower&&UserMulti&&time){const apr=Number(tr)/tokenPrice*Number(UserPower)/Number(tp)*oneYear/time/Number(UserMulti)*100;// console.log(apr)\nreturn thousandBit(apr,2)+'%';}return'-';}function ClaimView(stutus){if((claimRewardId===null||claimRewardId===void 0?void 0:claimRewardId.type)==='VESHARE'){const totalReward=(claimRewardId===null||claimRewardId===void 0?void 0:claimRewardId.reward)&&useVeshareRewardToken?thousandBit(claimRewardId===null||claimRewardId===void 0?void 0:claimRewardId.reward,2):'';console.log(totalReward);if(!totalReward||!Number(totalReward)){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RewardLoading,null,t('No reward.')));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(LogoBox,null,/*#__PURE__*/React.createElement(TokenLogo,{symbol:useVeshareRewardToken===null||useVeshareRewardToken===void 0?void 0:useVeshareRewardToken.symbol,size:'3rem'})),/*#__PURE__*/React.createElement(RewardView,null,totalReward,\" \",useVeshareRewardToken===null||useVeshareRewardToken===void 0?void 0:useVeshareRewardToken.symbol),/*#__PURE__*/React.createElement(BottomGrouping,null,/*#__PURE__*/React.createElement(ButtonPrimary,{disabled:disabled,onClick:()=>{if(onVeshareWrap){setDisabled(true);onVeshareWrap().then(()=>{setDisabled(false);setModalOpen(false);});}}},t('Claim Reward'))));}if(stutus===0){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RewardLoading,null,t('Reward query in progress...')));}else if(stutus===2){return/*#__PURE__*/React.createElement(React.Fragment,null,\"Error\");}else{const totalReward=(rewardInfo===null||rewardInfo===void 0?void 0:rewardInfo.totalReward)&&useRewardToken?BigAmount.format(useRewardToken===null||useRewardToken===void 0?void 0:useRewardToken.decimals,rewardInfo===null||rewardInfo===void 0?void 0:rewardInfo.totalReward).toSignificant(6):'';if((latestEpochInfo===null||latestEpochInfo===void 0?void 0:latestEpochInfo.startTime)&&!totalReward){const time=Number(latestEpochInfo===null||latestEpochInfo===void 0?void 0:latestEpochInfo.startTime)-parseInt(Date.now()/1000+'');let timeView='';if(time<60&&time>0){timeView=time+'s';}else if(time>=60&&time<60*60){timeView=(time/60).toFixed(2)+'min';}else if(time>=60*60&&time<60*60*24){timeView=(time/(60*60)).toFixed(2)+'h';}else if(time>=60*60*24){timeView=(time/(60*60*24)).toFixed(2)+'D';}if(!timeView){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RewardLoading,null,t('No reward.')));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RewardLoading,null,\"Remaining time for next collection:\",timeView));}else if(!totalReward){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RewardLoading,null,t('No reward.')));}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(LogoBox,null,/*#__PURE__*/React.createElement(TokenLogo,{symbol:useRewardToken===null||useRewardToken===void 0?void 0:useRewardToken.symbol,size:'3rem'})),/*#__PURE__*/React.createElement(RewardView,null,totalReward,\" \",useRewardToken===null||useRewardToken===void 0?void 0:useRewardToken.symbol),/*#__PURE__*/React.createElement(BottomGrouping,null,/*#__PURE__*/React.createElement(ButtonPrimary,{disabled:disabled,onClick:()=>{if(onWrap){setDisabled(true);onWrap().then(()=>{setDisabled(false);setModalOpen(false);});}}},t('Claim Reward'))));}}return/*#__PURE__*/React.createElement(AppBody,null,/*#__PURE__*/React.createElement(ModalContent,{isOpen:modalOpen,onDismiss:()=>{setClaimRewardId('');setModalOpen(false);},title:t('Claim Reward')},ClaimView(loadingStatus)),/*#__PURE__*/React.createElement(ModalContent,{isOpen:nftLogoModel,onDismiss:()=>{setNftLogo('');setNftLogoModel(false);},title:t('NFT')},/*#__PURE__*/React.createElement(\"img\",{src:nftLogo,style:{width:'100%'}})),/*#__PURE__*/React.createElement(DataViews,null,/*#__PURE__*/React.createElement(\"div\",{className:\"list\"},DataList.map((item,index)=>{return/*#__PURE__*/React.createElement(\"div\",{className:\"item\",key:index},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"title\"},item.name,item.question?/*#__PURE__*/React.createElement(QuestionHelper,{text:item.question}):''),item.loading?/*#__PURE__*/React.createElement(\"p\",{className:\"loading\"},\"Loading..\"):/*#__PURE__*/React.createElement(\"p\",{className:\"value\"},item.value)));}))),/*#__PURE__*/React.createElement(VestContent,null,// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n!chainId||!supportChainList.includes(chainId.toString())?/*#__PURE__*/React.createElement(React.Fragment,null,supportChainList.slice(0,1).map((item,index)=>{return/*#__PURE__*/React.createElement(CreateLock1,{key:index,onClick:()=>{if(setUserSelectNetwork){var _config$getCurChainIn;setUserSelectNetwork({chainId:config.getCurChainInfo(item).chainID,label:(_config$getCurChainIn=config.getCurChainInfo(item))===null||_config$getCurChainIn===void 0?void 0:_config$getCurChainIn.chainType});}selectNetwork(item).then(res=>{console.log(res);if(res.msg==='Error'){alert(t('changeMetamaskNetwork',{label:config.getCurChainInfo(item).networkName}));}});}},t('ConnectedWith')+' '+config.getCurChainInfo(item).name);})):/*#__PURE__*/React.createElement(CreateLock,{to:'/vest/create'},t('Create Lock'))),/*#__PURE__*/React.createElement(MyBalanceBox,null,/*#__PURE__*/React.createElement(DBTables,null,/*#__PURE__*/React.createElement(DBThead,null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(DBTh,{className:\"l\"},t('NFT ID')),/*#__PURE__*/React.createElement(DBTh,{className:\"l\"},t('Vest Amount')),/*#__PURE__*/React.createElement(DBTh,{className:\"l\"},t('Vest Value')),/*#__PURE__*/React.createElement(DBTh,{className:\"c\"},t('Vest Expires')),/*#__PURE__*/React.createElement(DBTh,{className:\"c\"},t('APR')),/*#__PURE__*/React.createElement(DBTh,{className:\"c\"},t('Action')))),/*#__PURE__*/React.createElement(DBTbody,null,// vestNFTs && vestNFTs.map((item:any, index:any) => {\nnftList.length>0?nftList.map((item,index)=>{return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(DBTd,null,/*#__PURE__*/React.createElement(TokenTableCoinBox,null,/*#__PURE__*/React.createElement(TokenTableLogoWrapper,{onClick:()=>{setNftLogo(item===null||item===void 0?void 0:item.image);setNftLogoModel(true);},style:{cursor:'pointer'}},/*#__PURE__*/React.createElement(\"img\",{src:item===null||item===void 0?void 0:item.image})),/*#__PURE__*/React.createElement(TokenNameBox,null,/*#__PURE__*/React.createElement(\"h3\",null,item.id)))),/*#__PURE__*/React.createElement(DBTd,{className:\"l\"},item.lockAmount?thousandBit(item.lockAmount,2):'-'),/*#__PURE__*/React.createElement(DBTd,{className:\"l\"},item.lockValue?thousandBit(item.lockValue,2):'-'),/*#__PURE__*/React.createElement(DBTd,{className:\"c\"},item.lockEnds?moment.unix(item.lockEnds).format('YYYY-MM-DD'):''),/*#__PURE__*/React.createElement(DBTd,{className:\"l\"},item.type==='VEDELTA'?getUserAPR(item.lockValue,item.lockAmount):totalAPR?totalAPR:'-'),/*#__PURE__*/React.createElement(DBTd,{className:\"c\",width:'260px'},/*#__PURE__*/React.createElement(Flex,null,/*#__PURE__*/React.createElement(TokenActionBtn2,{className:item.type==='VESHARE'?'disabled':'',to:item.type==='VESHARE'?\"/vest\":\"/vest/manger?id=\"+item.index},\"Manage\"),/*#__PURE__*/React.createElement(TokenActionBtn1,{onClick:()=>{setClaimRewardId(item);setModalOpen(true);}},t('Claim')),/*#__PURE__*/React.createElement(TokenActionBtn1,{disabled:parseInt(Date.now()/1000+'')<Number(item.lockEnds)||disabled||item.type==='VESHARE',onClick:()=>{var _rewardList$item$id;// console.log(rewardList)\n// console.log(item)\nconst rewardCount=(useVeMultiToken===null||useVeMultiToken===void 0?void 0:useVeMultiToken.decimals)&&(rewardList===null||rewardList===void 0?void 0:(_rewardList$item$id=rewardList[item.id])===null||_rewardList$item$id===void 0?void 0:_rewardList$item$id.totalReward)?BigAmount.format(useVeMultiToken.decimals,rewardList[item.id].totalReward).toExact():'';if(rewardCount&&Number(rewardCount)>=0.001){console.log(rewardCount);alert('Please claim the reward first');}else if(!rewardList||!rewardList[item.id]||parseInt(Date.now()/1000+'')<Number(item.lockEnds)){alert('Loading');}else{const now=parseInt(Date.now()/1000+'');if(now>=Number(item.lockEnds)){if(onWithdrarWrap){// console.log(1)\nsetDisabled(true);onWithdrarWrap(item.id).then(()=>{setDisabled(false);});}}}}},t('Withdraw')))));}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(DBTd,{colSpan:6,style:{textAlign:'center',padding:'20px',fontSize:'12px'}},\"No NFTs to display.\"))))));}","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","styled","useTranslation","moment","useActiveWeb3React","useVeMULTIContract","useVeMULTIRewardContract","useTokenContract","useInterval","useUserSelectChainId","BigAmount","TokenLogo","ButtonLight","ModalContent","QuestionHelper","BottomGrouping","ButtonPrimary","getLabelPrice","AppBody","DBTables","DBThead","DBTh","DBTbody","DBTd","TokenTableCoinBox","TokenTableLogo","TokenNameBox","MyBalanceBox","TokenActionBtn","Flex","veMULTI","MULTI_TOKEN","REWARD","REWARD_TOKEN","useVeshare","useClaimVeshareRewardCallback","veSHARE","useClaimRewardCallback","useWithdrawCallback","axios","thousandBit","config","selectNetwork","VestContent","div","_templateObject","_taggedTemplateLiteral","_ref","theme","flexC","CreateLock","_templateObject2","_ref2","primary1","_ref3","text5","_ref4","_ref5","mediaWidth","upToMedium","_templateObject3","CreateLock1","_templateObject4","_ref6","_ref7","_ref8","_ref9","_templateObject5","TokenActionBtn1","_templateObject6","_ref10","_ref11","selectedBg","_ref12","textColorBold","_ref13","_ref14","_templateObject7","TokenActionBtn2","_templateObject8","_ref15","_templateObject9","RewardView","_templateObject10","_ref16","RewardLoading","_templateObject11","_ref17","_ref18","LogoBox","_templateObject12","_ref19","DataViews","_templateObject13","_ref20","flexBC","_ref21","contentBg","_ref22","text4","_ref23","upToSmall","_templateObject14","_ref24","_ref25","text1","_ref26","_templateObject15","TokenTableLogoWrapper","_templateObject16","Vest","t","account","chainId","setUserSelectNetwork","getVeshareNFTs","useVeshareRewardToken","vestNFTs","setvestNFTs","veshareNFTs","setVeshareNFTs","modalOpen","setModalOpen","claimRewardId","setClaimRewardId","loadingStatus","setLoadingStatus","veMultiTotalSupply","setVeMultiTotalSupply","LockedMULTI","setLockedMULTI","circulatingsupply","setCirculatingsupply","curEpochInfo","setCurEpochInfo","totalPower","setTotalPower","epochId","setEpochId","rewardList","setRewardList","latestEpochInfo","setlatestEpochInfo","price","setPrice","nftLogoModel","setNftLogoModel","nftLogo","setNftLogo","totalAPR","setTotalAPR","disabled","setDisabled","supportChainList","arr","c","includes","push","useVeMultiToken","undefined","useVeMultiRewardToken","useRewardToken","useLockToken","rewardInfo","id","nftList","contract","address","rewardContract","ercContract","execute","onWrap","list","onVeshareWrap","onWithdrarWrap","rewardEpochIdList","getPendingReward","nfts","_totalReward","totalReward","limit","len","Number","initStart","current","i","nextIndex","data","pendingReward","reward","add","startEpoch","toString","endEpoch","error","arr1","item","length","obj","a1s","getAllRewards","console","log","getVestNFTs","nftsLength","balanceOf","totalSupply","Array","from","parseInt","v","Promise","all","map","idx","tokenIndex","tokenOfOwnerByIndex","locked","lockValue","balanceOfNFT","tokenURI","get","index","lockEnds","end","toNumber","lockAmount","format","decimals","amount","toExact","type","then","res","getAllNft","getCurrentEpochId","catch","err","getCirc","label","DataList","name","value","loading","vms","lm","fourYear","oneYear","divide","multiply","toSignificant","time","endTime","startTime","weektime","per","symbol","usrEpochInfo","tr","tp","tokenPrice","greaterThan","apr","question","getMultiInfo","getEpochInfo","getEpochTotalPower","getUserAPR","UserPower","UserMulti","ClaimView","stutus","createElement","Fragment","size","onClick","Date","now","timeView","toFixed","isOpen","onDismiss","title","src","style","width","className","key","text","slice","_config$getCurChainIn","getCurChainInfo","chainID","chainType","msg","alert","networkName","to","image","cursor","unix","_rewardList$item$id","rewardCount","colSpan","textAlign","padding","fontSize"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/pages/Vest/index.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\n\nimport styled from \"styled-components\"\nimport { useTranslation } from 'react-i18next'\nimport moment from 'moment';\n\nimport { useActiveWeb3React } from '../../hooks'\nimport { \n  useVeMULTIContract,\n  useVeMULTIRewardContract,\n  useTokenContract,\n  // useMulticallContract\n} from '../../hooks/useContract'\nimport useInterval from '../../hooks/useInterval'\nimport { useUserSelectChainId } from '../../state/user/hooks'\n\nimport {BigAmount} from '../../utils/formatBignumber'\n// import { useApproveCallback, ApprovalState } from '../../hooks/useApproveCallback'\n\nimport TokenLogo from '../../components/TokenLogo'\nimport { ButtonLight } from '../../components/Button'\n// import Modal from \"../../components/Modal\";\nimport ModalContent from \"../../components/Modal/ModalContent\";\nimport QuestionHelper from '../../components/QuestionHelper'\n\nimport {\n  BottomGrouping\n} from '../../components/swap/styleds'\nimport { ButtonPrimary } from '../../components/Button'\n\nimport {getLabelPrice} from '../../utils/tools/getPrice'\n\nimport AppBody from '../AppBody'\n\n// import GifIon from '../../assets/images/icon/GIF.svg'\n// import BulbIcon from '../../assets/images/icon/bulb.svg'\n\nimport {\n  DBTables,\n  DBThead,\n  DBTh,\n  DBTbody,\n  DBTd,\n  TokenTableCoinBox,\n  TokenTableLogo,\n  TokenNameBox,\n  MyBalanceBox,\n  TokenActionBtn,\n  Flex,\n  // ChainCardList\n} from '../Dashboard/styleds'\n\nimport {veMULTI,MULTI_TOKEN,REWARD,REWARD_TOKEN} from './data'\nimport {\n  useVeshare,\n  useClaimVeshareRewardCallback,\n  veSHARE\n} from './veshare'\n\nimport {useClaimRewardCallback, useWithdrawCallback} from './hooks'\nimport axios from \"axios\";\nimport {thousandBit} from '../../utils/tools/tools'\n\n\nimport config from '../../config'\nimport {selectNetwork} from '../../config/tools/methods'\n\n// import {VE_MULTI_REWARD_INTERFACE} from '../../constants/abis/veMULTIReward'\n\nconst VestContent = styled.div`\n${({ theme }) => theme.flexC};\n  width: 100%;\n  max-width: 1200px;\n  padding: 30px;\n`\n\nconst CreateLock = styled(TokenActionBtn)`\n  background:${({ theme }) => theme.primary1};\n  width: 120px;\n  color:#fff;\n  // margin-bottom:10px;\n  // padding-left: 12px;\n  // padding-right: 12px;\n  padding: 20px var(--space-medium-400, 32px);\n  font-size: 1rem;\n  font-weight: bold;\n  color: ${({ theme }) => theme.text5};\n  &.disabled {\n    opacity: 0.2;\n  }\n  &:hover,\n  &:focus,\n  &:active {\n    background: ${({ theme }) => theme.primary1};\n    opacity: 0.99\n  }\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    height: 28px;\n    margin-bottom: 10px;\n  `}\n`\n\nconst CreateLock1 = styled(ButtonLight)`\n  width: auto;\n  height: 38px;\n  border-radius: 30px;\n  background: ${({ theme }) => theme.primary1};\n  margin: 0 5px 10px;\n  padding: 20px var(--space-medium-400, 32px);\n  font-size: 1rem;\n  font-weight: bold;\n  color: ${({ theme }) => theme.text5};\n  &.disabled {\n    opacity: 0.2;\n  }\n  &:hover,\n  &:focus,\n  &:active {\n    background: ${({ theme }) => theme.primary1};\n    opacity: 0.99\n  }\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    height: 28px;\n    margin-bottom: 10px;\n  `}\n`\n\nconst TokenActionBtn1 = styled(ButtonLight)`\n  ${({ theme }) => theme.flexC};\n  font-family: 'Manrope';\n  min-width: auto!important;\n  max-width: auto!important;\n  width: auto;\n  height: 38px;\n  padding: 0 15px;\n  word-break:break-all!important;\n\n  border-radius: 0.5625rem;\n  background: ${({ theme }) => theme.selectedBg};\n  margin-right: 0.125rem;\n\n  font-size: 0.75rem;\n  font-weight: 500;\n\n  line-height: 1;\n\n  color: ${({ theme }) => theme.textColorBold};\n  box-shadow: none;\n  // padding: 0 8px;\n  text-decoration: none;\n  &:hover,\n  &:focus,\n  &:active {\n    background: ${({ theme }) => theme.selectedBg};\n  }\n  &.disabled {\n    opacity: 0.2;\n  }\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    height: 28px;\n    margin-bottom: 10px;\n  `}\n`\n\nconst TokenActionBtn2 = styled(TokenActionBtn)`\n  min-width: auto!important;\n  max-width: auto!important;\n  width: auto;\n  height: 38px;\n  padding: 0 15px;\n  &.disabled {\n    opacity: 0.2;\n  }\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    height: 28px;\n    margin-bottom: 10px;\n  `}\n`\n\nconst RewardView = styled.div`\n  width:100%;\n  ${({ theme }) => theme.flexC};\n  padding: 30px 0;\n`\n\nconst RewardLoading = styled.div`\n  ${({ theme }) => theme.flexC};\n  width: 100%;\n  padding: 50px 0;\n  color: ${({ theme }) => theme.textColorBold};\n`\n\nconst LogoBox = styled.div`\n  ${({ theme }) => theme.flexC};\n  width: 46px;\n  height: 46px;\n  object-fit: contain;\n  box-shadow: 0 0.125rem 0.25rem 0 rgba(0, 0, 0, 0.04);\n  border: solid 0.5px rgba(0, 0, 0, 0.1);\n  border-radius:100%;\n  margin: auto;\n\n  img{\n    // height: 24px;\n    // width: 24px;\n    display:block;\n  }\n`\n\nconst DataViews = styled.div`\n  width: 100%;\n  \n  .list {\n    width: 100%;\n    ${({ theme }) => theme.flexBC};\n    flex-wrap: wrap;\n\n    .item {\n      width: 32%;\n      padding: 10px 0;\n\n      .content {\n        width: 100%;\n        box-shadow: 0.4375rem 0.125rem 1.625rem 0 rgba(0, 0, 0, 0.06);\n        background-color: ${({ theme }) => theme.contentBg};\n        border-radius: 10px;\n        padding: 1rem 2.5rem;\n        min-height: 20vh;\n\n        .title {\n          font-size: 18px;\n          color: ${({ theme }) => theme.text4};\n          margin: 0 0 15px;\n          font-weight: bold;\n          white-space: nowrap;\n          text-align: center;\n\n          ${({ theme }) => theme.mediaWidth.upToSmall`\n            font-size: 10px;\n          `}\n        }\n\n        .value {\n          font-size: 12px;\n          color: ${({ theme }) => theme.textColorBold};\n          margin-bottom: 0;\n          font-weight: 400;\n          text-align: center;\n          white-space: nowrap;\n        }\n\n        .loading {\n          font-size: 14px;\n          color: ${({ theme }) => theme.text1};\n          margin-bottom: 0;\n          text-align: center;\n        }\n      }\n    }\n  }\n\n  ${({ theme }) => theme.mediaWidth.upToMedium`\n    .list {\n      .item {\n        width: 48%;\n\n        .content {\n          padding: 1rem 1rem;\n\n          .title {\n            white-space: nowrap;\n          }\n        }\n      }\n    }\n  `}\n`\n\nconst TokenTableLogoWrapper = styled(TokenTableLogo)`\n  img {\n    max-width: 100%;\n    max-height: 100%;\n  }\n`\n\nexport default function Vest () {\n  const { t } = useTranslation()\n  const { account, chainId } = useActiveWeb3React()\n  const {setUserSelectNetwork} = useUserSelectChainId()\n\n  const {getVeshareNFTs, useVeshareRewardToken} = useVeshare()\n\n  const [vestNFTs, setvestNFTs] = useState<any>()\n  const [veshareNFTs, setVeshareNFTs] = useState<any>()\n  const [modalOpen, setModalOpen] = useState(false)\n  const [claimRewardId, setClaimRewardId] = useState<any>()\n  const [loadingStatus, setLoadingStatus] = useState<any>(0)\n\n  const [veMultiTotalSupply, setVeMultiTotalSupply] = useState<any>()\n  const [LockedMULTI, setLockedMULTI] = useState<any>()\n  const [circulatingsupply, setCirculatingsupply] = useState<any>()\n  const [curEpochInfo, setCurEpochInfo] = useState<any>()\n  const [totalPower, setTotalPower] = useState<any>()\n  const [epochId, setEpochId] = useState<any>()\n  const [rewardList, setRewardList] = useState<any>()\n  const [latestEpochInfo, setlatestEpochInfo] = useState<any>()\n  const [price, setPrice] = useState<any>(12)\n  const [nftLogoModel, setNftLogoModel] = useState<any>(false)\n  const [nftLogo, setNftLogo] = useState<any>()\n  const [totalAPR, setTotalAPR] = useState<any>()\n\n  const [disabled, setDisabled] = useState(false)\n  // const viewDatas = useRef<any>({})\n\n  const supportChainList = useMemo(() => {\n    const arr:any = []\n    for (const c in veSHARE) {\n      if (arr.includes(c)) continue\n      arr.push(c)\n    }\n    for (const c in veMULTI) {\n      if (arr.includes(c)) continue\n      arr.push(c)\n    }\n    return arr\n  }, [veSHARE, veMULTI])\n   //console.log(supportChainList)\n\n  const useVeMultiToken = useMemo(() => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (chainId && veMULTI[chainId]) return veMULTI[chainId]\n    return undefined\n  }, [chainId])\n  \n  const useVeMultiRewardToken = useMemo(() => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (chainId && REWARD[chainId]) return REWARD[chainId]\n    return undefined\n  }, [chainId])\n\n  const useRewardToken = useMemo(() => {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (chainId && REWARD_TOKEN[chainId]) return REWARD_TOKEN[chainId]\n    return undefined\n  }, [chainId])\n\n  const useLockToken:any = useMemo(() => {\n    // console.log(MULTI_TOKEN)\n    // console.log(chainId)\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (chainId && MULTI_TOKEN[chainId]) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      return MULTI_TOKEN[chainId]\n    }\n    return undefined\n  }, [chainId])\n  // console.log(useLockToken)\n\n  const rewardInfo = useMemo(() => {\n    if (\n      claimRewardId?.id && rewardList && rewardList[claimRewardId?.id]\n    ) {\n      setLoadingStatus(1)\n      return {...rewardList[claimRewardId?.id], id: claimRewardId?.id}\n    }\n    setLoadingStatus(0)\n    return undefined\n  }, [claimRewardId, rewardList])\n\n  // const isSupport = useMemo(() => {\n  //   if (!useLockToken) {\n  //     return false\n  //   }\n  //   return true\n  // }, [useLockToken])\n\n  const nftList = useMemo(() => {\n    const arr = []\n    if (vestNFTs) {\n      arr.push(...vestNFTs)\n    }\n    if (veshareNFTs) {\n      arr.push(...veshareNFTs)\n    }\n    return arr\n  }, [veshareNFTs, vestNFTs])\n\n  const contract = useVeMULTIContract(useVeMultiToken?.address)\n  const rewardContract = useVeMULTIRewardContract(useVeMultiRewardToken?.address)\n  const ercContract = useTokenContract(useLockToken?.address)\n  // const multicallContract = useMulticallContract()\n\n\n  const {execute: onWrap} = useClaimRewardCallback(\n    useVeMultiRewardToken?.address,\n    rewardInfo?.id,\n    rewardInfo?.list\n  )\n\n  const {execute: onVeshareWrap} = useClaimVeshareRewardCallback(claimRewardId)\n\n  const {execute: onWithdrarWrap} = useWithdrawCallback(\n    useVeMultiToken?.address\n  )\n  const rewardEpochIdList = useRef<any>({})\n  // const [approval, approveCallback] = useApproveCallback(formatInputBridgeValue ?? undefined, useVeMultiToken)\n  const getPendingReward = useCallback(async(nfts) => {\n    if (rewardContract && nfts?.id && epochId) {\n      // console.log(nfts.id)\n      const arr = []\n      let totalReward:any = ''\n      const limit = 30\n      // const limit = 10\n      const len = Number(epochId) + 1\n      const initStart = rewardEpochIdList?.current && rewardEpochIdList?.current[nfts?.id] ? rewardEpochIdList.current[nfts?.id] : 0\n      for (let i = initStart; i < len; i+=limit) {\n        const nextIndex = i + limit > len ? len : i + limit\n        // console.log(nfts.id, i, nextIndex - 1)\n        try {\n          let data = await rewardContract.pendingReward(nfts.id, i, nextIndex - 1)\n          data = data && data[0] ? data[0] : ''\n          if (!data) continue\n          if (!totalReward && data.reward) {\n            // console.log(1)\n            totalReward = data.reward\n          } else if (data.reward) {\n            // console.log(2)\n            totalReward = totalReward.add(data.reward)\n          }\n          arr.push({\n            startEpoch: data.startEpoch.toString(),\n            endEpoch: data.endEpoch.toString(),\n            reward: data.reward.toString(),\n          })\n        } catch (error) {\n          // console.log(i)\n          if (!rewardEpochIdList.current[nfts?.id]) rewardEpochIdList.current[nfts?.id] = nextIndex\n          else rewardEpochIdList.current[nfts?.id] = nextIndex\n        }\n      }\n      const arr1 = []\n      for (const item of arr) {\n        if (arr1.length === 0) {\n          arr1.push({startEpoch: item.startEpoch, endEpoch: item.endEpoch})\n        } else {\n          const len = arr1.length -1\n          const obj = arr1[len]\n          if ((Number(obj.endEpoch)) === Number(item.startEpoch) -1) {\n            if (Number(item.endEpoch) - Number(arr1[len].startEpoch) <= limit) {\n              arr1[len].endEpoch = item.endEpoch\n            } else if (Number(item.endEpoch) - Number(arr1[len].startEpoch) > limit) {\n              const a1s:any = Number(arr1[len].startEpoch)\n              arr1[len].endEpoch = a1s + limit - 1 + ''\n              arr1.push({startEpoch: a1s + limit + '', endEpoch: item.endEpoch})\n            } else {\n              arr1.push({startEpoch: item.startEpoch, endEpoch: item.endEpoch})\n            }\n          } else {\n            arr1.push({startEpoch: item.startEpoch, endEpoch: item.endEpoch})\n          }\n        }\n      }\n      return {list: arr1, totalReward: totalReward?.toString()}\n    }\n    return undefined\n  }, [rewardContract, epochId])\n\n  const getAllRewards = useCallback(async() => {\n    if (\n      epochId\n      && vestNFTs\n      && vestNFTs.length > 0\n    ) {\n      const list:any = {}\n      for (const obj of vestNFTs) {\n        const data:any = await getPendingReward(obj)\n        if (data) {\n          list[obj.id] = data\n        }\n      }\n      console.log(list)\n      setRewardList(list)\n    }\n  }, [epochId, vestNFTs])\n  useEffect(() => {\n    getAllRewards()\n  }, [epochId, vestNFTs])\n\n  const getVestNFTs = useCallback(async() => {\n    // console.log(useVeMultiToken)\n    if (\n      contract\n      && account\n      && useLockToken\n    ) {\n      // console.log(contract)\n      // console.log(account)\n      const nftsLength = await contract.balanceOf(account)\n      const totalSupply = await contract.totalSupply()\n      // viewDatas.current['veMultiTotalSupply'] = totalSupply?.toString()\n      // setViewDatas({\n      //   ...viewDatas,\n      //   veMultiTotalSupply: totalSupply?.toString()\n      // })\n      setVeMultiTotalSupply(totalSupply?.toString())\n      // console.log('totalSupply',totalSupply.toString())\n      const arr = Array.from({length: parseInt(nftsLength)}, (v, i) => i)\n      // console.log(nftsLength)\n      // console.log(arr)\n      try {\n        const nfts = await Promise.all(\n          arr.map(async (idx) => {\n    \n            const tokenIndex = await contract.tokenOfOwnerByIndex(account, idx)\n            const locked = await contract.locked(tokenIndex)\n            const lockValue = await contract.balanceOfNFT(tokenIndex)\n            const tokenURI = await contract.tokenURI(tokenIndex)\n            const {data} = await axios.get(tokenURI)\n            // console.log(tokenURI)\n            // console.log(data)\n            // probably do some decimals math before returning info. Maybe get more info. I don't know what it returns.\n            return {\n              ...data,\n              index: idx,\n              id: tokenIndex?.toString(),\n              lockEnds: locked.end.toNumber(),\n              lockAmount: BigAmount.format(useLockToken.decimals, locked.amount).toExact(),\n              lockValue: BigAmount.format(useVeMultiToken.decimals, lockValue).toExact(),\n              type: 'VEDELTA'\n            }\n          })\n        )\n        console.log(nfts)\n        setvestNFTs(nfts)\n      } catch (error) {\n        console.log(error)\n      }\n      \n    }\n    \n    getVeshareNFTs().then(res => {\n      // console.log(res)\n      setVeshareNFTs(res)\n    })\n  }, [contract, account, useLockToken])\n\n  const getAllNft = useCallback(() => {\n    getVestNFTs()\n    getVeshareNFTs().then(res => {\n      // console.log(res)\n      setVeshareNFTs(res)\n    })\n  }, [getVeshareNFTs, getVestNFTs])\n\n  useEffect(() => {\n    getAllNft()\n  }, [contract, account, useLockToken])\n  \n  useInterval(getAllNft, 1000 * 10)\n\n  const getCurrentEpochId = useCallback(() => {\n    console.log(rewardContract)\n    if (rewardContract) {\n      rewardContract.getCurrentEpochId().then((res:any) => {\n        console.log(res.toString())\n        setEpochId(res.toString())\n      }).catch((err:any) => {\n        console.log(err)\n        setEpochId('0')\n      })\n    }\n  }, [rewardContract])\n  useEffect(() => {\n    getCurrentEpochId()\n  }, [rewardContract])\n  useInterval(getCurrentEpochId, 1000 * 10)\n\n  const getCirc = useCallback(() => {\n    axios.get(`https://evm.planq.network/api?module=stats&action=tokensupply&contractaddress=0x6aF48997671584672e084Bf2296473677598ee58`).then((res:any) => {\n      console.log(res)\n      if (res.data) {\n        setCirculatingsupply(res.data)\n      }\n    })\n  }, [])\n  useEffect(() => {\n    getCirc()\n  }, [])\n\n  useEffect(() => {\n    if (useLockToken?.label) {\n      getLabelPrice(useLockToken?.label).then(res => {\n        // console.log(useLockToken)\n        // console.log(res)\n        if (res) {\n          setPrice(res)\n        }\n      })\n    }\n  }, [useLockToken])\n\n  const DataList = useMemo(() => {\n    const list = []\n    if (veMultiTotalSupply && useVeMultiToken) {\n      list.push({\n        name: 'veDELTA Supply',\n        value: thousandBit(BigAmount.format(useVeMultiToken.decimals, veMultiTotalSupply).toExact(), 2),\n        loading: false\n      })\n    } else {\n      list.push({\n        name: 'veDELTA Supply',\n        value: '',\n        loading: true\n      })\n    }\n    if (LockedMULTI && useLockToken) {\n      // console.log(BigAmount.format(0,'10').toExact())\n      const value = BigAmount.format(useLockToken.decimals,LockedMULTI).toExact()\n      list.push({\n        name: 'Locked DELTA',\n        value: thousandBit(value, 2),\n        // value: value.toString().replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,').toLocaleString(),\n        loading: false\n      })\n    } else {\n      list.push({\n        name: 'Locked DELTA',\n        value: '',\n        loading: true\n      })\n    }\n    if (LockedMULTI && circulatingsupply && useLockToken) {\n      const value:any = Number(BigAmount.format(useLockToken.decimals,LockedMULTI).toExact()) / circulatingsupply\n      list.push({\n        name: '% Circ. DELTA Locked',\n        value: thousandBit(value * 100, 2) + '%',\n        loading: false\n      })\n    } else {\n      list.push({\n        name: '% Circ. DELTA Locked',\n        value: '',\n        loading: true\n      })\n    }\n    if (veMultiTotalSupply && LockedMULTI && useVeMultiToken && useLockToken) {\n    // if (totalPower && LockedMULTI) {\n      // const tp = BigAmount.format(useVeMultiToken.decimals, totalPower)\n      // const lm = BigAmount.format(useLockToken.decimals, LockedMULTI)\n      // const fourYear:any = 60*60*24*1460\n      // const oneYear = BigAmount.format(0, (60*60*24*365) + '')\n      // const value = tp.divide(lm).multiply(BigAmount.format(1, fourYear)).divide(oneYear)\n      const vms = BigAmount.format(useVeMultiToken.decimals, veMultiTotalSupply)\n      const lm = BigAmount.format(useLockToken.decimals, LockedMULTI)\n      const fourYear:any = BigAmount.format(0, (60*60*24*1460) + '')\n      const oneYear = BigAmount.format(0, (60*60*24*365) + '')\n      const value = vms.divide(lm).multiply(fourYear).divide(oneYear)\n      list.push({\n        name: 'Avg. Lock Time (years)',\n        value: value.toSignificant(2),\n        loading: false\n      })\n    } else {\n      list.push({\n        name: 'Avg. Lock Time (years)',\n        value: '',\n        loading: true\n      })\n    }\n    if (curEpochInfo && useRewardToken) {\n      // const oneYear = BigAmount.format(1, (60*60*24*365) + '')\n      // console.log(curEpochInfo)\n      const time = Number(curEpochInfo.endTime) - Number(curEpochInfo.startTime)\n      const weektime = 60*60*24*7\n      const per = weektime / time\n      const value = BigAmount.format(useRewardToken.decimals, curEpochInfo.totalReward).toExact()\n      // console.log(time)\n      // console.log(per)\n      list.push({\n        name: 'Est. Yield Per Week',\n        value: thousandBit(Number(value) * per, 2) + ' ' +  useRewardToken.symbol,\n        loading: false\n      })\n    } else {\n      list.push({\n        name: 'Est. Yield Per Week',\n        value: '',\n        loading: true\n      })\n    }\n    if ((latestEpochInfo || curEpochInfo) && totalPower && price && useRewardToken && useVeMultiToken) {\n      const usrEpochInfo = latestEpochInfo && latestEpochInfo?.totalReward !== '0' ? latestEpochInfo : curEpochInfo\n      const tr = BigAmount.format(useRewardToken.decimals, usrEpochInfo?.totalReward ? usrEpochInfo?.totalReward : '0')\n      const tp = BigAmount.format(useVeMultiToken.decimals, totalPower)\n      const tokenPrice = BigAmount.format(0, parseInt(price) + '')\n      const oneYear = BigAmount.format(0, (60*60*24*365) + '')\n      const time = BigAmount.format(0, usrEpochInfo?.endTime ? (Number(usrEpochInfo.endTime)-Number(usrEpochInfo.startTime)) + '' : '0')\n      const per = BigAmount.format(0, '100')\n      // console.log(latestEpochInfo)\n      // console.log(curEpochInfo)\n      // console.log(tr.toExact())\n      // console.log(tp.toExact())\n      if (\n        tr.greaterThan('0')\n        && tokenPrice.greaterThan('0')\n        && time.greaterThan('0')\n        && tp.greaterThan('0')\n      ) {\n        const apr = tr.divide(tokenPrice).multiply(oneYear).divide(time).divide(tp).multiply(per)\n        list.push({\n          name: 'APR',\n          value: apr.toSignificant(2) + '%',\n          loading: false,\n          question: 'Assumes 1 veDELTA = 1 DELTA (1 DELTA locked 4 years)'\n        })\n        setTotalAPR(apr.toSignificant(2) + '%')\n      } else {\n        list.push({\n          name: 'APR',\n          value: '- %',\n          loading: false,\n          question: 'Assumes 1 veDELTA = 1 DELTA (1 DELTA locked 4 years)'\n        })\n      }\n    } else {\n      list.push({\n        name: 'APR',\n        value: '',\n        loading: true,\n        question: 'Assumes veDELTA = 1 DELTA (1 DELTA locked 4 years)'\n      })\n    }\n    // console.log(list)\n    return list\n  }, [totalPower, curEpochInfo, circulatingsupply, LockedMULTI, veMultiTotalSupply, latestEpochInfo, price, useVeMultiToken, useLockToken])\n\n  const getMultiInfo = useCallback(() => {\n    if (ercContract) {\n      if (useVeMultiToken?.address) {\n        ercContract.balanceOf(useVeMultiToken?.address).then((res:any) => {\n          setLockedMULTI(res?.toString())\n        })\n      }\n    }\n  }, [ercContract, useVeMultiToken])\n\n  useEffect(() => {\n    getMultiInfo()\n  }, [ercContract])\n\n  useInterval(getMultiInfo, 1000 * 10)\n\n  const getEpochInfo = useCallback(async() => {\n    console.log(epochId)\n    if (\n      rewardContract\n      && epochId\n    ) {\n      // const EpochId = await rewardContract.getCurrentEpochId()\n      rewardContract.getEpochInfo(epochId).then((res:any) => {\n        // console.log(res)\n        const data = {\n          startTime: res[0].toString(),\n          endTime: res[1].toString(),\n          totalReward: res[2].toString(),\n        }\n        setCurEpochInfo(data)\n        setlatestEpochInfo(data)\n      }).catch((err:any) => {\n        console.log(err)\n        setCurEpochInfo('')\n      })\n      // rewardContract.getEpochInfo(Number(epochId) === 0 ? 0 : Number(epochId) + 1).then((res:any) => {\n      //   // console.log(res)\n      //   setlatestEpochInfo({\n      //     startTime: res[0].toString(),\n      //     endTime: res[1].toString(),\n      //     totalReward: res[2].toString(),\n      //   })\n      // }).catch((err:any) => {\n      //   console.log(err)\n      // })\n      rewardContract.getEpochTotalPower(epochId).then((res:any) => {\n        // console.log(res)\n        setTotalPower(res.toString())\n      }).catch((err:any) => {\n        console.log(err)\n        setTotalPower('')\n      })\n      \n    }\n  }, [rewardContract, epochId])\n  useEffect(() => {\n    getEpochInfo()\n  }, [rewardContract, epochId])\n\n  useInterval(getEpochInfo, 1000 * 10)\n\n  function getUserAPR (UserPower:any, UserMulti:any) {\n    // const usrEpochInfo = latestEpochInfo ? latestEpochInfo : curEpochInfo\n    const usrEpochInfo = latestEpochInfo && latestEpochInfo?.totalReward !== '0' ? latestEpochInfo : curEpochInfo\n    const tr = usrEpochInfo?.totalReward && useRewardToken.decimals ? BigAmount.format(useRewardToken.decimals, usrEpochInfo.totalReward).toExact() : ''\n    const time = usrEpochInfo ? Number(usrEpochInfo.endTime)-Number(usrEpochInfo.startTime) : ''\n    const tokenPrice = price ? Number(price) : ''\n    const tp = totalPower && useVeMultiToken.decimals ? BigAmount.format(useVeMultiToken.decimals, totalPower).toExact() : ''\n    const oneYear = 60*60*24*365\n    if (\n      tr\n      && tokenPrice\n      && tp\n      && Number(tp) > 0\n      && UserPower\n      && UserMulti\n      && time\n    ) {\n      const apr = (((Number(tr) / tokenPrice) * Number(UserPower) / Number(tp))*oneYear/time/Number(UserMulti)) * 100\n      // console.log(apr)\n      return thousandBit(apr, 2) + '%'\n    }\n    return '-'\n  }\n\n  function ClaimView (stutus:number) {\n    if (claimRewardId?.type === 'VESHARE') {\n      const totalReward = claimRewardId?.reward && useVeshareRewardToken ? thousandBit(claimRewardId?.reward,2) : ''\n      console.log(totalReward)\n      if (!totalReward || !Number(totalReward)) {\n        return (\n          <>\n            <RewardLoading>{t('No reward.')}</RewardLoading>\n          </>\n        )\n      }\n      return (\n        <>\n          <LogoBox>\n            <TokenLogo symbol={useVeshareRewardToken?.symbol} size={'3rem'}></TokenLogo>\n          </LogoBox>\n          <RewardView>{totalReward} {useVeshareRewardToken?.symbol}</RewardView>\n          <BottomGrouping>\n            <ButtonPrimary disabled={disabled} onClick={() => {\n              if (onVeshareWrap) {\n                setDisabled(true)\n                onVeshareWrap().then(() => {\n                  setDisabled(false)\n                  setModalOpen(false)\n                })\n              }\n            }}>\n              {t('Claim Reward')}\n            </ButtonPrimary>\n          </BottomGrouping>\n        </>\n      )\n    }\n    if (stutus === 0) {\n      return (\n        <>\n          <RewardLoading>{t('Reward query in progress...')}</RewardLoading>\n        </>\n      )\n    } else if (stutus === 2) {\n      return (\n        <>Error</>\n      )\n    } else {\n      const totalReward = rewardInfo?.totalReward && useRewardToken ? BigAmount.format(useRewardToken?.decimals, rewardInfo?.totalReward).toSignificant(6) : ''\n      if (latestEpochInfo?.startTime && !totalReward) {\n        const time = Number(latestEpochInfo?.startTime) - parseInt(Date.now() / 1000 + '')\n        let timeView = ''\n        if (time < 60 && time > 0) {\n          timeView = time + 's'\n        } else if (time >= 60 && time < 60 * 60) {\n          timeView = (time / 60).toFixed(2) + 'min'\n        } else if (time >= 60 * 60 && time < 60 * 60 * 24) {\n          timeView = (time / (60 * 60)).toFixed(2) + 'h'\n        } else if (time >= 60 * 60 * 24) {\n          timeView = (time / (60 * 60 * 24)).toFixed(2) + 'D'\n        }\n        if (!timeView) {\n          return (\n            <>\n              <RewardLoading>{t('No reward.')}</RewardLoading>\n            </>\n          )\n        }\n        return (\n          <>\n            <RewardLoading>Remaining time for next collection:{timeView}</RewardLoading>\n          </>\n        )\n      } else if (!totalReward) {\n        return (\n          <>\n            <RewardLoading>{t('No reward.')}</RewardLoading>\n          </>\n        )\n      }\n      return (\n        <>\n        <LogoBox>\n          <TokenLogo symbol={useRewardToken?.symbol} size={'3rem'}></TokenLogo>\n        </LogoBox>\n          <RewardView>{totalReward} {useRewardToken?.symbol}</RewardView>\n          <BottomGrouping>\n            <ButtonPrimary disabled={disabled} onClick={() => {\n              if (onWrap) {\n                setDisabled(true)\n                onWrap().then(() => {\n                  setDisabled(false)\n                  setModalOpen(false)\n                })\n              }\n            }}>\n              {t('Claim Reward')}\n            </ButtonPrimary>\n          </BottomGrouping>\n        </>\n      )\n    }\n  }\n  return (\n    <AppBody>\n      {/* <img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0IiB2aWV3Qm94PSIwIDAgMzUwIDM1MCI+PHN0eWxlPi5iYXNlIHsgZmlsbDogd2hpdGU7IGZvbnQtZmFtaWx5OiBzZXJpZjsgZm9udC1zaXplOiAxNHB4OyB9PC9zdHlsZT48ZGVmcz48cGF0dGVybiBpZD0iaW1nMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSI+PGltYWdlIHhsaW5rOmhyZWY9Imh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9nYW96aGVuZ3hpbi9hc3NldHMvbWFpbi9NYXJrZXRpbmdORlQuZ2lmIiB3aWR0aD0iNDUlIiBoZWlnaHQ9IjQ1JSIgLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjaW1nMSkiIC8+PHRleHQgeD0iNSIgeT0iMTUwIiBjbGFzcz0iYmFzZSI+NDwvdGV4dD48L3N2Zz4=\" />\n\n      <img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiIHZpZXdCb3g9IjAgMCAzNTAgMzUwIj48c3R5bGU+LmJhc2UgeyBmaWxsOiB3aGl0ZTsgZm9udC1mYW1pbHk6IHNlcmlmOyBmb250LXNpemU6IDE0cHg7IH08L3N0eWxlPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9ImJsYWNrIiAvPjx0ZXh0IHg9IjEwIiB5PSIyMCIgY2xhc3M9ImJhc2UiPnRva2VuIDE0NzwvdGV4dD48dGV4dCB4PSIxMCIgeT0iNDAiIGNsYXNzPSJiYXNlIj5iYWxhbmNlT2YgMDwvdGV4dD48dGV4dCB4PSIxMCIgeT0iNjAiIGNsYXNzPSJiYXNlIj5sb2NrZWRfZW5kIDE2NTcxNTIwMDA8L3RleHQ+PHRleHQgeD0iMTAiIHk9IjgwIiBjbGFzcz0iYmFzZSI+dmFsdWUgMTAwMDAwMDAwMDAwMDAwMDAwMDwvdGV4dD48L3N2Zz4=\" /> */}\n\n      {/* <GifIon /> */}\n      <ModalContent\n        isOpen={modalOpen}\n        onDismiss={() => {\n          setClaimRewardId('')\n          setModalOpen(false)\n        }}\n        title={t('Claim Reward')}\n      >\n        {/* {rewardInfo?.id} */}\n        {ClaimView(loadingStatus)}\n      </ModalContent>\n\n      <ModalContent\n        isOpen={nftLogoModel}\n        onDismiss={() => {\n          setNftLogo('')\n          setNftLogoModel(false)\n        }}\n        title={t('NFT')}\n      >\n        <img src={nftLogo} style={{width: '100%'}} />\n      </ModalContent>\n\n      <DataViews>\n        <div className=\"list\">\n          {\n            DataList.map((item:any, index:any) => {\n              return (\n                <div className=\"item\" key={index}>\n                   <div className=\"content\">\n                    <h3 className=\"title\">{item.name}{item.question ? <QuestionHelper text={item.question} /> : ''}</h3>\n                    {\n                      item.loading ? (\n                        <p className=\"loading\">Loading..</p>\n                      ) : (\n                        <p className=\"value\">{item.value}</p>\n                      )\n                    }\n                  </div>\n                </div>\n              )\n            })\n          }\n        </div>\n      </DataViews>\n      <VestContent>\n        {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          (!chainId || !supportChainList.includes(chainId.toString())) ? (\n            <>\n              {\n                supportChainList.slice(0, 1).map((item:any, index:any) => {\n                  return <CreateLock1 key={index} onClick={() => {\n                    if (setUserSelectNetwork) {\n                      setUserSelectNetwork({\n                        chainId: config.getCurChainInfo(item).chainID,\n                        label: config.getCurChainInfo(item)?.chainType\n                      })\n                    }\n                    selectNetwork(item).then((res: any) => {\n                      console.log(res)\n                      if (res.msg === 'Error') {\n                        alert(t('changeMetamaskNetwork', {label: config.getCurChainInfo(item).networkName}))\n                      }\n                    })\n                  }}>{t('ConnectedWith') + ' ' + config.getCurChainInfo(item).name}</CreateLock1>\n                })\n              }\n            </>\n          ) : (\n            <CreateLock to={'/vest/create'}>{t('Create Lock')}</CreateLock>\n          )\n        }\n        {/* <CreateLock to={'/vest/veshare'}>{t('Claim veMULTI')}</CreateLock> */}\n      </VestContent>\n\n      <MyBalanceBox>\n        <DBTables>\n          <DBThead>\n            <tr>\n              <DBTh className=\"l\">{t('NFT ID')}</DBTh>\n              <DBTh className=\"l\">{t('Vest Amount')}</DBTh>\n              <DBTh className=\"l\">{t('Vest Value')}</DBTh>\n              <DBTh className=\"c\">{t('Vest Expires')}</DBTh>\n              <DBTh className=\"c\">{t('APR')}</DBTh>\n              <DBTh className=\"c\">{t('Action')}</DBTh>\n            </tr>\n          </DBThead>\n          <DBTbody>\n            {\n              // vestNFTs && vestNFTs.map((item:any, index:any) => {\n              nftList.length > 0 ? (\n              nftList.map((item:any, index:any) => {\n                return <tr key={index}>\n                  <DBTd>\n                    <TokenTableCoinBox>\n                      <TokenTableLogoWrapper onClick={() => {\n                        setNftLogo(item?.image)\n                        setNftLogoModel(true)\n                      }} style={{cursor: 'pointer'}}>\n                        <img src={item?.image} />\n                      </TokenTableLogoWrapper>\n                      <TokenNameBox>\n                        <h3>{item.id}</h3>\n                        {/* <p>{config.getBaseCoin(item?.name, chainId, 1)}</p> */}\n                      </TokenNameBox>\n                    </TokenTableCoinBox>\n                  </DBTd>\n                  <DBTd className=\"l\">{item.lockAmount ? thousandBit(item.lockAmount, 2) : '-'}</DBTd>\n                  <DBTd className=\"l\">{item.lockValue ? thousandBit(item.lockValue, 2) : '-'}</DBTd>\n                  <DBTd className=\"c\">{item.lockEnds ? moment.unix(item.lockEnds).format('YYYY-MM-DD') : ''}</DBTd>\n                  <DBTd className=\"l\">{item.type === 'VEDELTA' ? getUserAPR(item.lockValue, item.lockAmount) : (totalAPR ? totalAPR : '-')}</DBTd>\n                  <DBTd className=\"c\" width={'260px'}>\n                    <Flex>\n                      <TokenActionBtn2 className={item.type === 'VESHARE' ? 'disabled' : ''} to={item.type === 'VESHARE' ? \"/vest\" : \"/vest/manger?id=\" + item.index}>Manage</TokenActionBtn2>\n                      <TokenActionBtn1 onClick={() => {\n                        setClaimRewardId(item)\n                        setModalOpen(true)\n                      }}>{t('Claim')}</TokenActionBtn1>\n                      <TokenActionBtn1 disabled={parseInt(Date.now() / 1000 + '') < Number(item.lockEnds) || disabled || item.type === 'VESHARE'} onClick={() => {\n                        // console.log(rewardList)\n                        // console.log(item)\n                        const rewardCount = useVeMultiToken?.decimals && rewardList?.[item.id]?.totalReward? BigAmount.format(useVeMultiToken.decimals, rewardList[item.id].totalReward).toExact() : ''\n                        if (rewardCount && Number(rewardCount) >= 0.001) {\n                          console.log(rewardCount)\n                          alert('Please claim the reward first')\n                        } else if (\n                          !rewardList\n                          || !rewardList[item.id]\n                          || parseInt(Date.now() / 1000 + '') < Number(item.lockEnds)\n                        ) {\n                          alert('Loading')\n                        } else {\n                          const now = parseInt(Date.now() / 1000 + '')\n                          if (now >= Number(item.lockEnds)) {\n                            if (onWithdrarWrap) {\n                              // console.log(1)\n                              setDisabled(true)\n                              onWithdrarWrap(item.id).then(() => {\n                                setDisabled(false)\n                              })\n                            }\n                          }\n                        }\n                      }}>{t('Withdraw')}</TokenActionBtn1>\n                    </Flex>\n                  </DBTd>\n                </tr>\n              })):(\n                <tr>\n                  <DBTd colSpan={6} style={{ textAlign: 'center', padding: '20px', fontSize: '12px'}}>No NFTs to display.</DBTd>\n                </tr>\n              )\n            }\n          </DBTbody>\n        </DBTables>\n      </MyBalanceBox>\n    </AppBody>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
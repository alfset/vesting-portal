{"ast":null,"code":"\"use strict\";\n\nvar axios = require(\"axios\");\nvar debugLog = false;\nvar HttpRequest = function (host, timeout, apiVersion) {\n  this.host = host || \"http://localhost:8685\";\n  this.timeout = timeout || 0;\n  this.apiVersion = apiVersion || \"v1\";\n};\nHttpRequest.prototype.setHost = function (host) {\n  this.host = host;\n};\nHttpRequest.prototype.setAPIVersion = function (apiVersion) {\n  this.apiVersion = apiVersion;\n};\nHttpRequest.prototype.createUrl = function (api) {\n  return this.host + \"/\" + this.apiVersion + api;\n};\nHttpRequest.prototype.request = function (method, api, payload, axiosOptions) {\n  if (debugLog) {\n    console.log(\"[debug] HttpRequest: \" + method + \" \" + this.createUrl(api) + \" \" + JSON.stringify(payload));\n  }\n  var axiosParams = {\n    method: method,\n    url: this.createUrl(api),\n    data: payload\n  };\n  if (axiosOptions && typeof axiosOptions.onDownloadProgress === 'function') {\n    axiosParams.onDownloadProgress = axiosOptions.onDownloadProgress;\n  }\n  return axios(axiosParams).then(function (resp) {\n    if (\"text/html; charset=UTF-8\" === resp.headers['content-type']) {\n      throw new Error(resp.status + ' - ' + resp.statusText);\n    }\n    if (typeof resp.data === \"string\") {\n      try {\n        resp.data = JSON.parse(resp.data);\n      } catch (e) {\n        throw new Error('Response is invalid json');\n      }\n    }\n    return resp.data.result || resp.data;\n  }).catch(function (e) {\n    if (typeof e.response !== \"undefined\") {\n      if (typeof e.response.data === 'object') {\n        //400 error\n        throw new Error(e.response.data.error);\n      } else {\n        //500 error\n        var err = e.response.status + ' - ' + e.response.statusText;\n        err += \"\\n\" + api + \" \" + JSON.stringify(payload);\n        throw new Error(err);\n      }\n    } else {\n      throw new Error(e.message);\n    }\n  });\n};\nHttpRequest.prototype.asyncRequest = function (method, api, payload, callback) {\n  return this.request(method, api, payload).then(function (data) {\n    callback(data);\n  }).catch(function (err) {\n    callback(err);\n  });\n};\nmodule.exports = HttpRequest;","map":{"version":3,"names":["axios","require","debugLog","HttpRequest","host","timeout","apiVersion","prototype","setHost","setAPIVersion","createUrl","api","request","method","payload","axiosOptions","console","log","JSON","stringify","axiosParams","url","data","onDownloadProgress","then","resp","headers","Error","status","statusText","parse","e","result","catch","response","error","err","message","asyncRequest","callback","module","exports"],"sources":["/workspace/Planq-Dapps/vesting-portal/node_modules/nebulas/lib/httprequest.js"],"sourcesContent":["\"use strict\";\n\nvar axios = require(\"axios\");\n\nvar debugLog = false;\n\nvar HttpRequest = function (host, timeout, apiVersion) {\n\tthis.host = host || \"http://localhost:8685\";\n\tthis.timeout = timeout || 0;\n\tthis.apiVersion = apiVersion || \"v1\";\n};\n\nHttpRequest.prototype.setHost = function (host) {\n\tthis.host = host;\n};\n\nHttpRequest.prototype.setAPIVersion = function (apiVersion) {\n\tthis.apiVersion = apiVersion;\n};\n\nHttpRequest.prototype.createUrl = function (api) {\n\treturn this.host + \"/\" + this.apiVersion + api;\n};\n\nHttpRequest.prototype.request = function (method, api, payload, axiosOptions) {\n\tif (debugLog) {\n\t\tconsole.log(\"[debug] HttpRequest: \" + method + \" \" + this.createUrl(api) + \" \" + JSON.stringify(payload));\n\t}\n\n\tvar axiosParams = {\n\t\tmethod: method,\n\t\turl: this.createUrl(api),\n\t\tdata: payload,\n\t};\n\tif (axiosOptions && typeof axiosOptions.onDownloadProgress === 'function') {\n\t\taxiosParams.onDownloadProgress = axiosOptions.onDownloadProgress;\n\t}\n\treturn axios(axiosParams).then(function (resp) {\n\t\tif(\"text/html; charset=UTF-8\" === resp.headers['content-type']){\n\t\t\tthrow new Error(resp.status+' - '+resp.statusText);\n\t\t}\n\t\tif(typeof(resp.data) === \"string\"){\n\t\t\ttry{\n\t\t\t\tresp.data = JSON.parse(resp.data);\n\t\t\t} catch(e){\n\t\t\t\tthrow new Error('Response is invalid json');\n\t\t\t}\n\t\t}\n\t\treturn resp.data.result || resp.data;\n\t}).catch(function (e) {\n\t\tif (typeof e.response !== \"undefined\") {\n\t\t    if(typeof(e.response.data) === 'object'){   //400 error\n                throw new Error(e.response.data.error);\n            }else {     //500 error\n                var err = e.response.status + ' - ' + e.response.statusText;\n                err += \"\\n\" + api + \" \" + JSON.stringify(payload);\n                throw new Error(err);\n            }\n\n\t\t} else {\n\t\t\tthrow new Error(e.message);\n\t\t}\n\t});\n};\n\nHttpRequest.prototype.asyncRequest = function (method, api, payload, callback) {\n\treturn this.request(method, api, payload).then(function (data) {\n\t\tcallback(data);\n\t}).catch(function (err) {\n\t\tcallback(err);\n\t});\n};\n\nmodule.exports = HttpRequest;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
{"ast":null,"code":"import{useEffect}from'react';import{useDispatch}from'react-redux';import{useActiveReact}from'../../hooks/useActiveReact';import{updateMatchesDarkMode,removeTokenToWallet}from'./actions';import{useChangeTokenOnWallet}from'./hooks';import{addToken}from'../../config/tools/methods';export default function Updater(){const dispatch=useDispatch();const{chainId}=useActiveReact();const{tokeninfo}=useChangeTokenOnWallet();// keep dark mode in sync with the system\nuseEffect(()=>{var _window;const darkHandler=match=>{dispatch(updateMatchesDarkMode({matchesDarkMode:match.matches}));};const match=(_window=window)===null||_window===void 0?void 0:_window.matchMedia('(prefers-color-scheme: dark)');dispatch(updateMatchesDarkMode({matchesDarkMode:match.matches}));if(match===null||match===void 0?void 0:match.addListener){match===null||match===void 0?void 0:match.addListener(darkHandler);}else if(match===null||match===void 0?void 0:match.addEventListener){match===null||match===void 0?void 0:match.addEventListener('change',darkHandler);}// console.log(tokeninfo)\n// console.log(chainId)\nif(tokeninfo&&chainId&&tokeninfo.chainId.toString()===chainId.toString()){addToken(tokeninfo.address,tokeninfo.symbol,tokeninfo.decimals,tokeninfo===null||tokeninfo===void 0?void 0:tokeninfo.logoUrl).then(()=>{dispatch(removeTokenToWallet({}));});}return()=>{if(match===null||match===void 0?void 0:match.removeListener){match===null||match===void 0?void 0:match.removeListener(darkHandler);}else if(match===null||match===void 0?void 0:match.removeEventListener){match===null||match===void 0?void 0:match.removeEventListener('change',darkHandler);}};},[dispatch,chainId,tokeninfo]);return null;}","map":{"version":3,"names":["useEffect","useDispatch","useActiveReact","updateMatchesDarkMode","removeTokenToWallet","useChangeTokenOnWallet","addToken","Updater","dispatch","chainId","tokeninfo","_window","darkHandler","match","matchesDarkMode","matches","window","matchMedia","addListener","addEventListener","toString","address","symbol","decimals","logoUrl","then","removeListener","removeEventListener"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/state/user/updater.tsx"],"sourcesContent":["import { useEffect } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useActiveReact } from '../../hooks/useActiveReact'\nimport { AppDispatch } from '../index'\nimport { updateMatchesDarkMode, removeTokenToWallet } from './actions'\nimport { useChangeTokenOnWallet } from './hooks'\nimport { addToken } from '../../config/tools/methods'\n\nexport default function Updater(): null {\n  const dispatch = useDispatch<AppDispatch>()\n  const {chainId} = useActiveReact()\n  const {tokeninfo} = useChangeTokenOnWallet()\n  // keep dark mode in sync with the system\n  useEffect(() => {\n    const darkHandler = (match: MediaQueryListEvent) => {\n      dispatch(updateMatchesDarkMode({ matchesDarkMode: match.matches }))\n    }\n\n    const match = window?.matchMedia('(prefers-color-scheme: dark)')\n    dispatch(updateMatchesDarkMode({ matchesDarkMode: match.matches }))\n\n    if (match?.addListener) {\n      match?.addListener(darkHandler)\n    } else if (match?.addEventListener) {\n      match?.addEventListener('change', darkHandler)\n    }\n\n    // console.log(tokeninfo)\n    // console.log(chainId)\n    if (tokeninfo && chainId && tokeninfo.chainId.toString() === chainId.toString()) {\n      addToken(tokeninfo.address, tokeninfo.symbol, tokeninfo.decimals, tokeninfo?.logoUrl).then(() => {\n        dispatch(removeTokenToWallet({}))\n      })\n    }\n\n    return () => {\n      if (match?.removeListener) {\n        match?.removeListener(darkHandler)\n      } else if (match?.removeEventListener) {\n        match?.removeEventListener('change', darkHandler)\n      }\n    }\n  }, [dispatch, chainId, tokeninfo])\n\n  return null\n}\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,cAAc,KAAQ,4BAA4B,CAE3D,OAASC,qBAAqB,CAAEC,mBAAmB,KAAQ,WAAW,CACtE,OAASC,sBAAsB,KAAQ,SAAS,CAChD,OAASC,QAAQ,KAAQ,4BAA4B,CAErD,cAAe,SAAS,CAAAC,OAAOA,CAAA,CAAS,CACtC,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAc,CAAC,CAC3C,KAAM,CAACQ,OAAO,CAAC,CAAGP,cAAc,CAAC,CAAC,CAClC,KAAM,CAACQ,SAAS,CAAC,CAAGL,sBAAsB,CAAC,CAAC,CAC5C;AACAL,SAAS,CAAC,IAAM,KAAAW,OAAA,CACd,KAAM,CAAAC,WAAW,CAAIC,KAA0B,EAAK,CAClDL,QAAQ,CAACL,qBAAqB,CAAC,CAAEW,eAAe,CAAED,KAAK,CAACE,OAAQ,CAAC,CAAC,CAAC,CACrE,CAAC,CAED,KAAM,CAAAF,KAAK,EAAAF,OAAA,CAAGK,MAAM,UAAAL,OAAA,iBAANA,OAAA,CAAQM,UAAU,CAAC,8BAA8B,CAAC,CAChET,QAAQ,CAACL,qBAAqB,CAAC,CAAEW,eAAe,CAAED,KAAK,CAACE,OAAQ,CAAC,CAAC,CAAC,CAEnE,GAAIF,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEK,WAAW,CAAE,CACtBL,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEK,WAAW,CAACN,WAAW,CAAC,CACjC,CAAC,IAAM,IAAIC,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEM,gBAAgB,CAAE,CAClCN,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEM,gBAAgB,CAAC,QAAQ,CAAEP,WAAW,CAAC,CAChD,CAEA;AACA;AACA,GAAIF,SAAS,EAAID,OAAO,EAAIC,SAAS,CAACD,OAAO,CAACW,QAAQ,CAAC,CAAC,GAAKX,OAAO,CAACW,QAAQ,CAAC,CAAC,CAAE,CAC/Ed,QAAQ,CAACI,SAAS,CAACW,OAAO,CAAEX,SAAS,CAACY,MAAM,CAAEZ,SAAS,CAACa,QAAQ,CAAEb,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEc,OAAO,CAAC,CAACC,IAAI,CAAC,IAAM,CAC/FjB,QAAQ,CAACJ,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CACnC,CAAC,CAAC,CACJ,CAEA,MAAO,IAAM,CACX,GAAIS,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEa,cAAc,CAAE,CACzBb,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEa,cAAc,CAACd,WAAW,CAAC,CACpC,CAAC,IAAM,IAAIC,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEc,mBAAmB,CAAE,CACrCd,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEc,mBAAmB,CAAC,QAAQ,CAAEf,WAAW,CAAC,CACnD,CACF,CAAC,CACH,CAAC,CAAE,CAACJ,QAAQ,CAAEC,OAAO,CAAEC,SAAS,CAAC,CAAC,CAElC,MAAO,KAAI,CACb"},"metadata":{},"sourceType":"module","externalDependencies":[]}
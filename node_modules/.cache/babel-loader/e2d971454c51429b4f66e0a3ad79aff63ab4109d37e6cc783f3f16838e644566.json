{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AminoTypes = void 0;\nfunction isAminoConverter(converter) {\n  return typeof converter[1] !== \"string\";\n}\n/**\n * A map from Stargate message types as used in the messages's `Any` type\n * to Amino types.\n */\nclass AminoTypes {\n  constructor(types) {\n    this.register = types;\n  }\n  toAmino(_ref) {\n    let {\n      typeUrl,\n      value\n    } = _ref;\n    const converter = this.register[typeUrl];\n    if (converter === \"not_supported_by_chain\") {\n      throw new Error(\"The message type '\".concat(typeUrl, \"' cannot be signed using the Amino JSON sign mode because this is not supported by chain.\"));\n    }\n    if (!converter) {\n      throw new Error(\"Type URL '\".concat(typeUrl, \"' does not exist in the Amino message type register. \") + \"If you need support for this message type, you can pass in additional entries to the AminoTypes constructor. \" + \"If you think this message type should be included by default, please open an issue at https://github.com/cosmos/cosmjs/issues.\");\n    }\n    return {\n      type: converter.aminoType,\n      value: converter.toAmino(value)\n    };\n  }\n  fromAmino(_ref2) {\n    let {\n      type,\n      value\n    } = _ref2;\n    const matches = Object.entries(this.register).filter(isAminoConverter).filter(_ref3 => {\n      let [_typeUrl, {\n        aminoType\n      }] = _ref3;\n      return aminoType === type;\n    });\n    switch (matches.length) {\n      case 0:\n        {\n          throw new Error(\"Amino type identifier '\".concat(type, \"' does not exist in the Amino message type register. \") + \"If you need support for this message type, you can pass in additional entries to the AminoTypes constructor. \" + \"If you think this message type should be included by default, please open an issue at https://github.com/cosmos/cosmjs/issues.\");\n        }\n      case 1:\n        {\n          const [typeUrl, converter] = matches[0];\n          return {\n            typeUrl: typeUrl,\n            value: converter.fromAmino(value)\n          };\n        }\n      default:\n        throw new Error(\"Multiple types are registered with Amino type identifier '\".concat(type, \"': '\") + matches.map(_ref4 => {\n          let [key, _value] = _ref4;\n          return key;\n        }).sort().join(\"', '\") + \"'. Thus fromAmino cannot be performed.\");\n    }\n  }\n}\nexports.AminoTypes = AminoTypes;","map":{"version":3,"names":["isAminoConverter","converter","AminoTypes","constructor","types","register","toAmino","_ref","typeUrl","value","Error","concat","type","aminoType","fromAmino","_ref2","matches","Object","entries","filter","_ref3","_typeUrl","length","map","_ref4","key","_value","sort","join","exports"],"sources":["../src/aminotypes.ts"],"sourcesContent":[null],"mappings":";;;;;;AAaA,SAASA,gBAAgBA,CACvBC,SAA8D;EAE9D,OAAO,OAAOA,SAAS,CAAC,CAAC,CAAC,KAAK,QAAQ;AACzC;AAEA;;;;AAIA,MAAaC,UAAU;EAOrBC,YAAmBC,KAAsB;IACvC,IAAI,CAACC,QAAQ,GAAGD,KAAK;EACvB;EAEOE,OAAOA,CAAAC,IAAA,EAAiC;IAAA,IAAhC;MAAEC,OAAO;MAAEC;IAAK,CAAgB,GAAAF,IAAA;IAC7C,MAAMN,SAAS,GAAG,IAAI,CAACI,QAAQ,CAACG,OAAO,CAAC;IACxC,IAAIP,SAAS,KAAK,wBAAwB,EAAE;MAC1C,MAAM,IAAIS,KAAK,sBAAAC,MAAA,CACQH,OAAO,8FAA2F,CACxH;;IAEH,IAAI,CAACP,SAAS,EAAE;MACd,MAAM,IAAIS,KAAK,CACb,aAAAC,MAAA,CAAaH,OAAO,6DAClB,+GAA+G,GAC/G,gIAAgI,CACnI;;IAEH,OAAO;MACLI,IAAI,EAAEX,SAAS,CAACY,SAAS;MACzBJ,KAAK,EAAER,SAAS,CAACK,OAAO,CAACG,KAAK;KAC/B;EACH;EAEOK,SAASA,CAAAC,KAAA,EAA0B;IAAA,IAAzB;MAAEH,IAAI;MAAEH;IAAK,CAAY,GAAAM,KAAA;IACxC,MAAMC,OAAO,GAAGC,MAAM,CAACC,OAAO,CAAC,IAAI,CAACb,QAAQ,CAAC,CAC1Cc,MAAM,CAACnB,gBAAgB,CAAC,CACxBmB,MAAM,CAACC,KAAA;MAAA,IAAC,CAACC,QAAQ,EAAE;QAAER;MAAS,CAAE,CAAC,GAAAO,KAAA;MAAA,OAAKP,SAAS,KAAKD,IAAI;IAAA,EAAC;IAE5D,QAAQI,OAAO,CAACM,MAAM;MACpB,KAAK,CAAC;QAAE;UACN,MAAM,IAAIZ,KAAK,CACb,0BAAAC,MAAA,CAA0BC,IAAI,6DAC5B,+GAA+G,GAC/G,gIAAgI,CACnI;;MAEH,KAAK,CAAC;QAAE;UACN,MAAM,CAACJ,OAAO,EAAEP,SAAS,CAAC,GAAGe,OAAO,CAAC,CAAC,CAAC;UACvC,OAAO;YACLR,OAAO,EAAEA,OAAO;YAChBC,KAAK,EAAER,SAAS,CAACa,SAAS,CAACL,KAAK;WACjC;;MAEH;QACE,MAAM,IAAIC,KAAK,CACb,6DAAAC,MAAA,CAA6DC,IAAI,YAC/DI,OAAO,CACJO,GAAG,CAACC,KAAA;UAAA,IAAC,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAAF,KAAA;UAAA,OAAKC,GAAG;QAAA,EAAC,CAC3BE,IAAI,EAAE,CACNC,IAAI,CAAC,MAAM,CAAC,GACf,wCAAwC,CAC3C;;EAEP;;AA7DFC,OAAA,CAAA3B,UAAA,GAAAA,UAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}
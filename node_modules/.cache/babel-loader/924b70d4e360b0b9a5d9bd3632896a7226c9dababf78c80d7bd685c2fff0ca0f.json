{"ast":null,"code":"var _jsxFileName = \"/workspace/Planq-Dapps/vesting-portal/src/components/Lazyload/LazyImage.tsx\";\nimport React, { useState, useEffect, createRef } from 'react';\nimport LazyloadService from './LazyloadService';\nexport function LazyImage(_ref) {\n  let {\n    style,\n    checkUrl,\n    className,\n    observe,\n    children\n  } = _ref;\n  const child = children;\n  const [loaded, setLoaded] = useState(checkUrl ? LazyloadService.checkLoadedUrl(checkUrl) : false);\n  const [loadService, setLoadService] = useState();\n  const placeholder = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAADUExURd3d3e7fjoIAAAAKSURBVAjXY2AAAAACAAHiIbwzAAAAAElFTkSuQmCC';\n  const watchRef = createRef();\n  useEffect(() => {\n    const service = observe || LazyloadService.getInstance();\n    setLoadService(service);\n    return () => {\n      if (service) {\n        service.disconnect();\n        setLoadService(undefined);\n      }\n    };\n  }, []);\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    let unsubscribe;\n    if (!loaded && watchRef.current && loadService) {\n      unsubscribe = loadService.subscribe(watchRef.current, e => {\n        if (e && e.intersectionRatio) {\n          if (checkUrl) {\n            LazyloadService.addLoadedUrl(checkUrl);\n          }\n          unsubscribe && unsubscribe();\n          unsubscribe = null;\n          setLoaded(true);\n        }\n      });\n    }\n    return () => {\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    };\n  }, [loadService, loaded, watchRef]);\n  return loaded ? child : /*#__PURE__*/React.createElement(\"img\", {\n    style: style,\n    ref: watchRef,\n    src: placeholder,\n    className: className,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 28\n    }\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","createRef","LazyloadService","LazyImage","_ref","style","checkUrl","className","observe","children","child","loaded","setLoaded","checkLoadedUrl","loadService","setLoadService","placeholder","watchRef","service","getInstance","disconnect","undefined","unsubscribe","current","subscribe","e","intersectionRatio","addLoadedUrl","createElement","ref","src","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/components/Lazyload/LazyImage.tsx"],"sourcesContent":["import React, { useState, useEffect, PropsWithChildren, createRef } from 'react';\nimport LazyloadService from './LazyloadService';\n\ntype Props = {\n  width?: number;\n  height?: number;\n  style?: any;\n  checkUrl?: string;\n  observe?: LazyloadService;\n  className?: string;\n}\n\nexport function LazyImage({ style, checkUrl, className, observe, children }: PropsWithChildren<Props>) {\n  const child: any = children;\n  const [loaded, setLoaded] = useState(\n    checkUrl ? LazyloadService.checkLoadedUrl(checkUrl) : false\n  );\n  const [loadService, setLoadService] = useState<LazyloadService>();\n  const placeholder = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAADUExURd3d3e7fjoIAAAAKSURBVAjXY2AAAAACAAHiIbwzAAAAAElFTkSuQmCC';\n  const watchRef = createRef<any>();\n\n  useEffect(() => {\n    const service: LazyloadService = observe || LazyloadService.getInstance();\n    setLoadService(service);\n    return () => {\n      if (service) {\n        service.disconnect();\n        setLoadService(undefined);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    let unsubscribe: Function | null;\n    if (!loaded && watchRef.current && loadService) {\n      unsubscribe = loadService.subscribe(watchRef.current, (e: any) => {\n        if (e && e.intersectionRatio) {\n          if (checkUrl) {\n            LazyloadService.addLoadedUrl(checkUrl);\n          }\n          unsubscribe && unsubscribe();\n          unsubscribe = null;\n          setLoaded(true);\n        }\n      })\n    }\n    return () => {\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    }\n  }, [loadService, loaded, watchRef]);\n\n  return (loaded ? child : <img style={ style } ref={ watchRef } src={ placeholder } className={ className } />);\n}\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAqBC,SAAS,QAAQ,OAAO;AAChF,OAAOC,eAAe,MAAM,mBAAmB;AAW/C,OAAO,SAASC,SAASA,CAAAC,IAAA,EAA8E;EAAA,IAA7E;IAAEC,KAAK;IAAEC,QAAQ;IAAEC,SAAS;IAAEC,OAAO;IAAEC;EAAmC,CAAC,GAAAL,IAAA;EACnG,MAAMM,KAAU,GAAGD,QAAQ;EAC3B,MAAM,CAACE,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAClCO,QAAQ,GAAGJ,eAAe,CAACW,cAAc,CAACP,QAAQ,CAAC,GAAG,KACxD,CAAC;EACD,MAAM,CAACQ,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAkB,CAAC;EACjE,MAAMiB,WAAW,GAAG,4KAA4K;EAChM,MAAMC,QAAQ,GAAGhB,SAAS,CAAM,CAAC;EAEjCD,SAAS,CAAC,MAAM;IACd,MAAMkB,OAAwB,GAAGV,OAAO,IAAIN,eAAe,CAACiB,WAAW,CAAC,CAAC;IACzEJ,cAAc,CAACG,OAAO,CAAC;IACvB,OAAO,MAAM;MACX,IAAIA,OAAO,EAAE;QACXA,OAAO,CAACE,UAAU,CAAC,CAAC;QACpBL,cAAc,CAACM,SAAS,CAAC;MAC3B;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAENrB,SAAS,CAAC,MAAM;IACd;IACA,IAAIsB,WAA4B;IAChC,IAAI,CAACX,MAAM,IAAIM,QAAQ,CAACM,OAAO,IAAIT,WAAW,EAAE;MAC9CQ,WAAW,GAAGR,WAAW,CAACU,SAAS,CAACP,QAAQ,CAACM,OAAO,EAAGE,CAAM,IAAK;QAChE,IAAIA,CAAC,IAAIA,CAAC,CAACC,iBAAiB,EAAE;UAC5B,IAAIpB,QAAQ,EAAE;YACZJ,eAAe,CAACyB,YAAY,CAACrB,QAAQ,CAAC;UACxC;UACAgB,WAAW,IAAIA,WAAW,CAAC,CAAC;UAC5BA,WAAW,GAAG,IAAI;UAClBV,SAAS,CAAC,IAAI,CAAC;QACjB;MACF,CAAC,CAAC;IACJ;IACA,OAAO,MAAM;MACX,IAAIU,WAAW,EAAE;QACfA,WAAW,CAAC,CAAC;MACf;IACF,CAAC;EACH,CAAC,EAAE,CAACR,WAAW,EAAEH,MAAM,EAAEM,QAAQ,CAAC,CAAC;EAEnC,OAAQN,MAAM,GAAGD,KAAK,gBAAGZ,KAAA,CAAA8B,aAAA;IAAKvB,KAAK,EAAGA,KAAO;IAACwB,GAAG,EAAGZ,QAAU;IAACa,GAAG,EAAGd,WAAa;IAACT,SAAS,EAAGA,SAAW;IAAAwB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAAC;AAC/G"},"metadata":{},"sourceType":"module","externalDependencies":[]}
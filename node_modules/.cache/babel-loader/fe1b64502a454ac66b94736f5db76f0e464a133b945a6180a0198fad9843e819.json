{"ast":null,"code":"import _taggedTemplateLiteral from\"/workspace/Planq-Dapps/vesting-portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5;import React,{useMemo}from'react';import styled from'styled-components';import{CheckCircle,Triangle}from'react-feather';// import { useActiveWeb3React } from '../../hooks'\nimport{useTxnsDtilOpen}from'../../state/application/hooks';import{useActiveReact}from'../../hooks/useActiveReact';import{getEtherscanLink}from'../../utils';import{ExternalLink}from'../../theme';import{useAllTransactions}from'../../state/transactions/hooks';import{RowFixed}from'../Row';import Loader from'../Loader';import{Status,getStatus}from'../../config/status';const TransactionWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));const TransactionStatusText=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin-right: 0.5rem;\\n  display: flex;\\n  align-items: center;\\n  color: \",\";\\n  :hover {\\n    text-decoration: underline;\\n  }\\n\"])),_ref=>{let{theme}=_ref;return theme.text1;});const TransactionState=styled(ExternalLink)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  text-decoration: none !important;\\n  border-radius: 0.5rem;\\n  padding: 0.25rem 0rem;\\n  font-weight: 500;\\n  font-size: 0.825rem;\\n  color: \",\";\\n\"])),_ref2=>{let{theme}=_ref2;return theme.primary1;});const TransactionState1=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  text-decoration: none !important;\\n  border-radius: 0.5rem;\\n  padding: 0.25rem 0rem;\\n  font-weight: 500;\\n  font-size: 0.825rem;\\n  color: \",\";\\n  cursor:pointer;\\n\"])),_ref3=>{let{theme}=_ref3;return theme.primary1;});const IconWrapper=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  color: \",\";\\n\"])),_ref4=>{let{pending,success,theme}=_ref4;return pending?theme.primary1:success?theme.green1:theme.red1;});export default function Transaction(_ref5){let{hash}=_ref5;// const { chainId } = useActiveWeb3React()\nconst{chainId}=useActiveReact();const{onChangeViewDtil}=useTxnsDtilOpen();const allTransactions=useAllTransactions();// console.log(allTransactions)\nconst tx=allTransactions===null||allTransactions===void 0?void 0:allTransactions[hash];const summary=tx===null||tx===void 0?void 0:tx.summary;const fromStatus=useMemo(()=>{if(tx){var _tx$receipt,_tx$receipt2;if(!tx.receipt){return Status.Pending;}else if(((_tx$receipt=tx.receipt)===null||_tx$receipt===void 0?void 0:_tx$receipt.status)===1||typeof((_tx$receipt2=tx.receipt)===null||_tx$receipt2===void 0?void 0:_tx$receipt2.status)==='undefined'){return Status.Success;}else{return Status.Failure;}}else{return Status.Null;}},[tx]);const toStatus=useMemo(()=>{// console.log(tx)\nif(tx){if(fromStatus===Status.Failure){return Status.Failure;}else if(!tx.info){return null;}else{var _tx$info,_tx$info2;const status=(_tx$info=tx.info)===null||_tx$info===void 0?void 0:_tx$info.status;const statusType=getStatus(status,tx===null||tx===void 0?void 0:(_tx$info2=tx.info)===null||_tx$info2===void 0?void 0:_tx$info2.confirmations);return statusType;// return Status.Failure\n}}else{return null;}},[tx,fromStatus]);// const pending = !tx?.receipt\nconst pending=useMemo(()=>{if(tx===null||tx===void 0?void 0:tx.version){// if (!toStatus || [Status.Pending, Status.Confirming, Status.Crosschaining].includes(toStatus)) {\n//   return true\n// }\n// return false\nif(toStatus&&[Status.Failure,Status.Success].includes(toStatus)){return false;}return true;}else{return!(tx===null||tx===void 0?void 0:tx.receipt);}},[tx,toStatus]);// const success = !pending && tx && (tx.receipt?.status === 1 || typeof tx.receipt?.status === 'undefined')\nconst success=useMemo(()=>{if(tx===null||tx===void 0?void 0:tx.version){if(toStatus===Status.Success){return true;}return false;}else{var _tx$receipt3,_tx$receipt4;return!pending&&tx&&(((_tx$receipt3=tx.receipt)===null||_tx$receipt3===void 0?void 0:_tx$receipt3.status)===1||typeof((_tx$receipt4=tx.receipt)===null||_tx$receipt4===void 0?void 0:_tx$receipt4.status)==='undefined');}},[toStatus]);// console.log(tx)\nif(!chainId)return null;return/*#__PURE__*/React.createElement(TransactionWrapper,null,(tx===null||tx===void 0?void 0:tx.version)?/*#__PURE__*/React.createElement(TransactionState1,{onClick:()=>{// console.log(hash)\nonChangeViewDtil(hash,true);}},/*#__PURE__*/React.createElement(RowFixed,null,/*#__PURE__*/React.createElement(TransactionStatusText,null,summary!==null&&summary!==void 0?summary:hash,\" \\u2197\")),/*#__PURE__*/React.createElement(IconWrapper,{pending:pending,success:success},pending?/*#__PURE__*/React.createElement(Loader,{stroke:\"#5f6bfb\"}):success?/*#__PURE__*/React.createElement(CheckCircle,{size:\"16\"}):/*#__PURE__*/React.createElement(Triangle,{size:\"16\"}))):/*#__PURE__*/React.createElement(TransactionState,{href:getEtherscanLink(chainId,hash,'transaction'),pending:pending,success:success},/*#__PURE__*/React.createElement(RowFixed,null,/*#__PURE__*/React.createElement(TransactionStatusText,null,summary!==null&&summary!==void 0?summary:hash,\" \\u2197\")),/*#__PURE__*/React.createElement(IconWrapper,{pending:pending,success:success},pending?/*#__PURE__*/React.createElement(Loader,{stroke:\"#5f6bfb\"}):success?/*#__PURE__*/React.createElement(CheckCircle,{size:\"16\"}):/*#__PURE__*/React.createElement(Triangle,{size:\"16\"}))));}","map":{"version":3,"names":["React","useMemo","styled","CheckCircle","Triangle","useTxnsDtilOpen","useActiveReact","getEtherscanLink","ExternalLink","useAllTransactions","RowFixed","Loader","Status","getStatus","TransactionWrapper","div","_templateObject","_taggedTemplateLiteral","TransactionStatusText","_templateObject2","_ref","theme","text1","TransactionState","_templateObject3","_ref2","primary1","TransactionState1","_templateObject4","_ref3","IconWrapper","_templateObject5","_ref4","pending","success","green1","red1","Transaction","_ref5","hash","chainId","onChangeViewDtil","allTransactions","tx","summary","fromStatus","_tx$receipt","_tx$receipt2","receipt","Pending","status","Success","Failure","Null","toStatus","info","_tx$info","_tx$info2","statusType","confirmations","version","includes","_tx$receipt3","_tx$receipt4","createElement","onClick","stroke","size","href"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/components/AccountDetails/Transaction.tsx"],"sourcesContent":["import React, { useMemo } from 'react'\nimport styled from 'styled-components'\nimport { CheckCircle, Triangle } from 'react-feather'\n\n// import { useActiveWeb3React } from '../../hooks'\nimport {useTxnsDtilOpen} from '../../state/application/hooks'\nimport {useActiveReact} from '../../hooks/useActiveReact'\nimport { getEtherscanLink } from '../../utils'\nimport { ExternalLink } from '../../theme'\nimport { useAllTransactions } from '../../state/transactions/hooks'\nimport { RowFixed } from '../Row'\nimport Loader from '../Loader'\nimport {Status, getStatus} from '../../config/status'\n\nconst TransactionWrapper = styled.div``\n\nconst TransactionStatusText = styled.div`\n  margin-right: 0.5rem;\n  display: flex;\n  align-items: center;\n  color: ${({ theme }) => theme.text1};\n  :hover {\n    text-decoration: underline;\n  }\n`\n\nconst TransactionState = styled(ExternalLink)<{ pending: boolean; success?: boolean }>`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  text-decoration: none !important;\n  border-radius: 0.5rem;\n  padding: 0.25rem 0rem;\n  font-weight: 500;\n  font-size: 0.825rem;\n  color: ${({ theme }) => theme.primary1};\n`\n\nconst TransactionState1 = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  text-decoration: none !important;\n  border-radius: 0.5rem;\n  padding: 0.25rem 0rem;\n  font-weight: 500;\n  font-size: 0.825rem;\n  color: ${({ theme }) => theme.primary1};\n  cursor:pointer;\n`\n\nconst IconWrapper = styled.div<{ pending: boolean; success?: boolean }>`\n  color: ${({ pending, success, theme }) => (pending ? theme.primary1 : success ? theme.green1 : theme.red1)};\n`\n\nexport default function Transaction({ hash }: { hash: string }) {\n  // const { chainId } = useActiveWeb3React()\n  const { chainId } = useActiveReact()\n  const {onChangeViewDtil} = useTxnsDtilOpen()\n  \n  const allTransactions = useAllTransactions()\n  // console.log(allTransactions)\n  const tx = allTransactions?.[hash]\n  const summary = tx?.summary\n  const fromStatus = useMemo(() => {\n    if (tx) {\n      if (!tx.receipt) {\n        return Status.Pending\n      } else if (tx.receipt?.status === 1 || typeof tx.receipt?.status === 'undefined') {\n        return Status.Success\n      } else {\n        return Status.Failure\n      }\n    } else {\n      return Status.Null\n    }\n  }, [tx])\n  const toStatus:any = useMemo(() => {\n    // console.log(tx)\n    if (tx) {\n      if (fromStatus === Status.Failure) {\n        return Status.Failure\n      } else if (!tx.info) {\n        return null\n      }  else {\n        const status = tx.info?.status\n        const statusType = getStatus(status, tx?.info?.confirmations)\n        return statusType\n        // return Status.Failure\n      }\n    } else {\n      return null\n    }\n  }, [tx, fromStatus])\n  // const pending = !tx?.receipt\n  const pending = useMemo(() => {\n    if (tx?.version) {\n      // if (!toStatus || [Status.Pending, Status.Confirming, Status.Crosschaining].includes(toStatus)) {\n      //   return true\n      // }\n      // return false\n      if (toStatus && [Status.Failure, Status.Success].includes(toStatus)) {\n        return false\n      }\n      return true\n    } else {\n      return !tx?.receipt\n    }\n  }, [tx, toStatus])\n  // const success = !pending && tx && (tx.receipt?.status === 1 || typeof tx.receipt?.status === 'undefined')\n  const success = useMemo(() => {\n    if (tx?.version) {\n      if (toStatus === Status.Success) {\n        return true\n      }\n      return false\n    } else {\n      return !pending && tx && (tx.receipt?.status === 1 || typeof tx.receipt?.status === 'undefined')\n    }\n  }, [toStatus])\n  // console.log(tx)\n  if (!chainId) return null\n\n  return (\n    <TransactionWrapper>\n      {\n        tx?.version ? (\n          <TransactionState1 onClick={() => {\n            // console.log(hash)\n            onChangeViewDtil(hash, true)\n          }}>\n            <RowFixed>\n              <TransactionStatusText>{summary ?? hash} ↗</TransactionStatusText>\n            </RowFixed>\n            <IconWrapper pending={pending} success={success}>\n              {pending ? <Loader stroke=\"#5f6bfb\" /> : success ? <CheckCircle size=\"16\" /> : <Triangle size=\"16\" />}\n            </IconWrapper>\n          </TransactionState1>\n        ) : (\n          <TransactionState href={getEtherscanLink(chainId, hash, 'transaction')} pending={pending} success={success}>\n            <RowFixed>\n              <TransactionStatusText>{summary ?? hash} ↗</TransactionStatusText>\n            </RowFixed>\n            <IconWrapper pending={pending} success={success}>\n              {pending ? <Loader stroke=\"#5f6bfb\" /> : success ? <CheckCircle size=\"16\" /> : <Triangle size=\"16\" />}\n            </IconWrapper>\n          </TransactionState>\n        )\n      }\n    </TransactionWrapper>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
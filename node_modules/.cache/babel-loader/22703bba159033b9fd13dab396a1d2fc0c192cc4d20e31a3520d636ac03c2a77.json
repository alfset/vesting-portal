{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Plan = void 0;\nvar json_1 = require(\"../../util/json\");\nvar upgrade_1 = require(\"@terra-money/terra.proto/cosmos/upgrade/v1beta1/upgrade\");\nvar long_1 = __importDefault(require(\"long\"));\n/*\n * Plan specifies information about a planned upgrade and when it should occur.\n */\nvar Plan = /** @class */function (_super) {\n  __extends(Plan, _super);\n  /**\n   * @param name This name will be used by the upgraded  version of the software to apply any special \"on-upgrade\" commands during the first BeginBlock method after the upgrade is applied.\n   * @param time Deprecated\n   * @param height  The height at which the upgrade must be performed. Only used if Time is not set.\n   * @param info Any application specific upgrade info to be included on-chain such as a git commit that validators could automatically upgrade to\n   * @param upgraded_client_state Deprecated\n   */\n  function Plan(name, time, height, info, upgraded_client_state) {\n    var _this = _super.call(this) || this;\n    _this.name = name;\n    _this.time = time;\n    _this.height = height;\n    _this.info = info;\n    _this.upgraded_client_state = upgraded_client_state;\n    return _this;\n  }\n  Plan.fromAmino = function (data) {\n    var name = data.name,\n      time = data.time,\n      height = data.height,\n      info = data.info,\n      upgraded_client_state = data.upgraded_client_state;\n    return new Plan(name, time ? new Date(time) : undefined, height, info, upgraded_client_state);\n  };\n  Plan.prototype.toAmino = function () {\n    var _a = this,\n      name = _a.name,\n      time = _a.time,\n      height = _a.height,\n      info = _a.info,\n      upgraded_client_state = _a.upgraded_client_state;\n    var res = {\n      name: name,\n      time: time ? time.toISOString().replace(/\\.000Z$/, 'Z') : undefined,\n      height: height,\n      info: info,\n      upgraded_client_state: upgraded_client_state\n    };\n    return res;\n  };\n  Plan.fromData = function (data) {\n    var name = data.name,\n      time = data.time,\n      height = data.height,\n      info = data.info,\n      upgraded_client_state = data.upgraded_client_state;\n    return new Plan(name, time ? new Date(time) : undefined, height, info, upgraded_client_state);\n  };\n  Plan.prototype.toData = function () {\n    var _a = this,\n      name = _a.name,\n      time = _a.time,\n      height = _a.height,\n      info = _a.info,\n      upgraded_client_state = _a.upgraded_client_state;\n    var res = {\n      name: name,\n      time: time ? time.toISOString().replace(/\\.000Z$/, 'Z') : undefined,\n      height: height,\n      info: info,\n      upgraded_client_state: upgraded_client_state\n    };\n    return res;\n  };\n  Plan.fromProto = function (proto) {\n    return new Plan(proto.name, proto.time, proto.height.toString(), proto.info, proto.upgradedClientState);\n  };\n  Plan.prototype.toProto = function () {\n    var _a = this,\n      name = _a.name,\n      time = _a.time,\n      height = _a.height,\n      info = _a.info,\n      upgraded_client_state = _a.upgraded_client_state;\n    return upgrade_1.Plan.fromPartial({\n      name: name,\n      time: time,\n      height: long_1.default.fromString(height),\n      info: info,\n      upgradedClientState: upgraded_client_state\n    });\n  };\n  return Plan;\n}(json_1.JSONSerializable);\nexports.Plan = Plan;","map":{"version":3,"names":["json_1","require","upgrade_1","long_1","__importDefault","Plan","_super","__extends","name","time","height","info","upgraded_client_state","_this","call","fromAmino","data","Date","undefined","prototype","toAmino","_a","res","toISOString","replace","fromData","toData","fromProto","proto","toString","upgradedClientState","toProto","fromPartial","default","fromString","JSONSerializable","exports"],"sources":["../../../src/core/upgrade/Plan.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
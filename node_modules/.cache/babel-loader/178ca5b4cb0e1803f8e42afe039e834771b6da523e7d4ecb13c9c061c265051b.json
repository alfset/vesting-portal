{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nconst typeFields_1 = require('../../typeFields');\nconst tools_1 = require('../tools');\nconst varuint = require('../varint');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.WITNESS_UTXO) {\n    throw new Error('Decode Error: could not decode witnessUtxo with key 0x' + keyVal.key.toString('hex'));\n  }\n  const value = tools_1.readUInt64LE(keyVal.value, 0);\n  let _offset = 8;\n  const scriptLen = varuint.decode(keyVal.value, _offset);\n  _offset += varuint.encodingLength(scriptLen);\n  const script = keyVal.value.slice(_offset);\n  if (script.length !== scriptLen) {\n    throw new Error('Decode Error: WITNESS_UTXO script is not proper length');\n  }\n  return {\n    script,\n    value\n  };\n}\nexports.decode = decode;\nfunction encode(data) {\n  const {\n    script,\n    value\n  } = data;\n  const varintLen = varuint.encodingLength(script.length);\n  const result = Buffer.allocUnsafe(8 + varintLen + script.length);\n  tools_1.writeUInt64LE(result, value, 0);\n  varuint.encode(script.length, result, 8);\n  script.copy(result, 8 + varintLen);\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.WITNESS_UTXO]),\n    value: result\n  };\n}\nexports.encode = encode;\nexports.expected = '{ script: Buffer; value: number; }';\nfunction check(data) {\n  return Buffer.isBuffer(data.script) && typeof data.value === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.witnessUtxo === undefined;\n}\nexports.canAdd = canAdd;","map":{"version":3,"names":["Object","defineProperty","exports","value","typeFields_1","require","tools_1","varuint","decode","keyVal","key","InputTypes","WITNESS_UTXO","Error","toString","readUInt64LE","_offset","scriptLen","encodingLength","script","slice","length","encode","data","varintLen","result","Buffer","allocUnsafe","writeUInt64LE","copy","from","expected","check","isBuffer","canAdd","currentData","newData","witnessUtxo","undefined"],"sources":["/workspace/Planq-Dapps/vesting-portal/node_modules/bip174/src/lib/converter/input/witnessUtxo.js"],"sourcesContent":["'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst tools_1 = require('../tools');\nconst varuint = require('../varint');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode witnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const value = tools_1.readUInt64LE(keyVal.value, 0);\n  let _offset = 8;\n  const scriptLen = varuint.decode(keyVal.value, _offset);\n  _offset += varuint.encodingLength(scriptLen);\n  const script = keyVal.value.slice(_offset);\n  if (script.length !== scriptLen) {\n    throw new Error('Decode Error: WITNESS_UTXO script is not proper length');\n  }\n  return {\n    script,\n    value,\n  };\n}\nexports.decode = decode;\nfunction encode(data) {\n  const { script, value } = data;\n  const varintLen = varuint.encodingLength(script.length);\n  const result = Buffer.allocUnsafe(8 + varintLen + script.length);\n  tools_1.writeUInt64LE(result, value, 0);\n  varuint.encode(script.length, result, 8);\n  script.copy(result, 8 + varintLen);\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.WITNESS_UTXO]),\n    value: result,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ script: Buffer; value: number; }';\nfunction check(data) {\n  return Buffer.isBuffer(data.script) && typeof data.value === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.witnessUtxo === undefined;\n}\nexports.canAdd = canAdd;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D,MAAMC,YAAY,GAAGC,OAAO,CAAC,kBAAkB,CAAC;AAChD,MAAMC,OAAO,GAAGD,OAAO,CAAC,UAAU,CAAC;AACnC,MAAME,OAAO,GAAGF,OAAO,CAAC,WAAW,CAAC;AACpC,SAASG,MAAMA,CAACC,MAAM,EAAE;EACtB,IAAIA,MAAM,CAACC,GAAG,CAAC,CAAC,CAAC,KAAKN,YAAY,CAACO,UAAU,CAACC,YAAY,EAAE;IAC1D,MAAM,IAAIC,KAAK,CACb,wDAAwD,GACtDJ,MAAM,CAACC,GAAG,CAACI,QAAQ,CAAC,KAAK,CAC7B,CAAC;EACH;EACA,MAAMX,KAAK,GAAGG,OAAO,CAACS,YAAY,CAACN,MAAM,CAACN,KAAK,EAAE,CAAC,CAAC;EACnD,IAAIa,OAAO,GAAG,CAAC;EACf,MAAMC,SAAS,GAAGV,OAAO,CAACC,MAAM,CAACC,MAAM,CAACN,KAAK,EAAEa,OAAO,CAAC;EACvDA,OAAO,IAAIT,OAAO,CAACW,cAAc,CAACD,SAAS,CAAC;EAC5C,MAAME,MAAM,GAAGV,MAAM,CAACN,KAAK,CAACiB,KAAK,CAACJ,OAAO,CAAC;EAC1C,IAAIG,MAAM,CAACE,MAAM,KAAKJ,SAAS,EAAE;IAC/B,MAAM,IAAIJ,KAAK,CAAC,wDAAwD,CAAC;EAC3E;EACA,OAAO;IACLM,MAAM;IACNhB;EACF,CAAC;AACH;AACAD,OAAO,CAACM,MAAM,GAAGA,MAAM;AACvB,SAASc,MAAMA,CAACC,IAAI,EAAE;EACpB,MAAM;IAAEJ,MAAM;IAAEhB;EAAM,CAAC,GAAGoB,IAAI;EAC9B,MAAMC,SAAS,GAAGjB,OAAO,CAACW,cAAc,CAACC,MAAM,CAACE,MAAM,CAAC;EACvD,MAAMI,MAAM,GAAGC,MAAM,CAACC,WAAW,CAAC,CAAC,GAAGH,SAAS,GAAGL,MAAM,CAACE,MAAM,CAAC;EAChEf,OAAO,CAACsB,aAAa,CAACH,MAAM,EAAEtB,KAAK,EAAE,CAAC,CAAC;EACvCI,OAAO,CAACe,MAAM,CAACH,MAAM,CAACE,MAAM,EAAEI,MAAM,EAAE,CAAC,CAAC;EACxCN,MAAM,CAACU,IAAI,CAACJ,MAAM,EAAE,CAAC,GAAGD,SAAS,CAAC;EAClC,OAAO;IACLd,GAAG,EAAEgB,MAAM,CAACI,IAAI,CAAC,CAAC1B,YAAY,CAACO,UAAU,CAACC,YAAY,CAAC,CAAC;IACxDT,KAAK,EAAEsB;EACT,CAAC;AACH;AACAvB,OAAO,CAACoB,MAAM,GAAGA,MAAM;AACvBpB,OAAO,CAAC6B,QAAQ,GAAG,oCAAoC;AACvD,SAASC,KAAKA,CAACT,IAAI,EAAE;EACnB,OAAOG,MAAM,CAACO,QAAQ,CAACV,IAAI,CAACJ,MAAM,CAAC,IAAI,OAAOI,IAAI,CAACpB,KAAK,KAAK,QAAQ;AACvE;AACAD,OAAO,CAAC8B,KAAK,GAAGA,KAAK;AACrB,SAASE,MAAMA,CAACC,WAAW,EAAEC,OAAO,EAAE;EACpC,OAAO,CAAC,CAACD,WAAW,IAAI,CAAC,CAACC,OAAO,IAAID,WAAW,CAACE,WAAW,KAAKC,SAAS;AAC5E;AACApC,OAAO,CAACgC,MAAM,GAAGA,MAAM"},"metadata":{},"sourceType":"script","externalDependencies":[]}
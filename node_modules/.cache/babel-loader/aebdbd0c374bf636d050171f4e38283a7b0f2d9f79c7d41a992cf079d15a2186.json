{"ast":null,"code":"import { AbstractConnector } from \"@web3-react/abstract-connector\";\nimport warning from \"tiny-warning\";\n\n// import { SendReturnResult, SendReturn, Send, SendOld } from \"./types\";\n\nfunction parseSendReturn(sendReturn) {\n  return sendReturn.hasOwnProperty(\"result\") ? sendReturn.result : sendReturn;\n}\nexport class NoBitKeepProviderError extends Error {\n  constructor() {\n    var _this$constructor$nam, _this$constructor;\n    super();\n    this.name = (_this$constructor$nam = this === null || this === void 0 ? void 0 : (_this$constructor = this.constructor) === null || _this$constructor === void 0 ? void 0 : _this$constructor.name) !== null && _this$constructor$nam !== void 0 ? _this$constructor$nam : '';\n    this.message = \"No BitKeep provider was found on window.bitkeep.\";\n  }\n}\nexport class UserRejectedRequestError extends Error {\n  constructor() {\n    var _this$constructor$nam2, _this$constructor2;\n    super();\n    this.name = (_this$constructor$nam2 = this === null || this === void 0 ? void 0 : (_this$constructor2 = this.constructor) === null || _this$constructor2 === void 0 ? void 0 : _this$constructor2.name) !== null && _this$constructor$nam2 !== void 0 ? _this$constructor$nam2 : '';\n    this.message = \"The user rejected the request.\";\n  }\n}\nexport class BitKeepConnector extends AbstractConnector {\n  constructor(kwargs) {\n    super(kwargs);\n    this.handleNetworkChanged = this.handleNetworkChanged.bind(this);\n    this.handleChainChanged = this.handleChainChanged.bind(this);\n    this.handleAccountsChanged = this.handleAccountsChanged.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n  }\n  handleChainChanged(chainId) {\n    if (__DEV__) {\n      console.log(\"Handling 'chainChanged' event with payload\", chainId);\n    }\n    this.emitUpdate({\n      chainId,\n      provider: window.bitkeep.ethereum\n    });\n  }\n  handleAccountsChanged(accounts) {\n    if (__DEV__) {\n      console.log(\"Handling 'accountsChanged' event with payload\", accounts);\n    }\n    if (accounts.length === 0) {\n      this.emitDeactivate();\n    } else {\n      this.emitUpdate({\n        account: accounts[0]\n      });\n    }\n  }\n  handleClose(code, reason) {\n    if (__DEV__) {\n      console.log(\"Handling 'close' event with payload\", code, reason);\n    }\n    this.emitDeactivate();\n  }\n  handleNetworkChanged(networkId) {\n    if (__DEV__) {\n      console.log(\"Handling 'networkChanged' event with payload\", networkId);\n    }\n    this.emitUpdate({\n      chainId: networkId,\n      provider: window.bitkeep.ethereum\n    });\n  }\n  async activate() {\n    var _window, _window$bitkeep, _window6, _window6$bitkeep, _window10, _window10$bitkeep;\n    if (!((_window = window) === null || _window === void 0 ? void 0 : (_window$bitkeep = _window.bitkeep) === null || _window$bitkeep === void 0 ? void 0 : _window$bitkeep.ethereum)) {\n      throw new NoBitKeepProviderError();\n    }\n    if (window.bitkeep.ethereum.on) {\n      var _window2, _window2$bitkeep, _window3, _window3$bitkeep, _window4, _window4$bitkeep, _window5, _window5$bitkeep;\n      (_window2 = window) === null || _window2 === void 0 ? void 0 : (_window2$bitkeep = _window2.bitkeep) === null || _window2$bitkeep === void 0 ? void 0 : _window2$bitkeep.ethereum.on(\"chainChanged\", this.handleChainChanged);\n      (_window3 = window) === null || _window3 === void 0 ? void 0 : (_window3$bitkeep = _window3.bitkeep) === null || _window3$bitkeep === void 0 ? void 0 : _window3$bitkeep.ethereum.on(\"accountsChanged\", this.handleAccountsChanged);\n      (_window4 = window) === null || _window4 === void 0 ? void 0 : (_window4$bitkeep = _window4.bitkeep) === null || _window4$bitkeep === void 0 ? void 0 : _window4$bitkeep.ethereum.on(\"close\", this.handleClose);\n      (_window5 = window) === null || _window5 === void 0 ? void 0 : (_window5$bitkeep = _window5.bitkeep) === null || _window5$bitkeep === void 0 ? void 0 : _window5$bitkeep.ethereum.on(\"networkChanged\", this.handleNetworkChanged);\n    }\n    if (((_window6 = window) === null || _window6 === void 0 ? void 0 : (_window6$bitkeep = _window6.bitkeep) === null || _window6$bitkeep === void 0 ? void 0 : _window6$bitkeep.ethereum).isMetaMask) {\n      var _window7, _window7$bitkeep;\n      ((_window7 = window) === null || _window7 === void 0 ? void 0 : (_window7$bitkeep = _window7.bitkeep) === null || _window7$bitkeep === void 0 ? void 0 : _window7$bitkeep.ethereum).autoRefreshOnNetworkChange = false;\n    }\n\n    // try to activate + get account via eth_requestAccounts\n    let account;\n    try {\n      var _window8, _window8$bitkeep;\n      account = await ((_window8 = window) === null || _window8 === void 0 ? void 0 : (_window8$bitkeep = _window8.bitkeep) === null || _window8$bitkeep === void 0 ? void 0 : _window8$bitkeep.ethereum.send)(\"eth_requestAccounts\").then(sendReturn => parseSendReturn(sendReturn)[0]);\n    } catch (error) {\n      if (error.code === 4001) {\n        throw new UserRejectedRequestError();\n      }\n      warning(false, \"eth_requestAccounts was unsuccessful, falling back to enable\");\n    }\n\n    // if unsuccessful, try enable\n    if (!account) {\n      var _window9, _window9$bitkeep;\n      // if enable is successful but doesn't return accounts, fall back to getAccount (not happy i have to do this...)\n      account = await ((_window9 = window) === null || _window9 === void 0 ? void 0 : (_window9$bitkeep = _window9.bitkeep) === null || _window9$bitkeep === void 0 ? void 0 : _window9$bitkeep.ethereum.enable().then(sendReturn => sendReturn && parseSendReturn(sendReturn)[0]));\n    }\n    return {\n      provider: (_window10 = window) === null || _window10 === void 0 ? void 0 : (_window10$bitkeep = _window10.bitkeep) === null || _window10$bitkeep === void 0 ? void 0 : _window10$bitkeep.ethereum,\n      ...(account ? {\n        account\n      } : {})\n    };\n  }\n  async getProvider() {\n    var _window11, _window11$bitkeep;\n    return (_window11 = window) === null || _window11 === void 0 ? void 0 : (_window11$bitkeep = _window11.bitkeep) === null || _window11$bitkeep === void 0 ? void 0 : _window11$bitkeep.ethereum;\n  }\n  async getChainId() {\n    var _window12, _window12$bitkeep;\n    if (!((_window12 = window) === null || _window12 === void 0 ? void 0 : (_window12$bitkeep = _window12.bitkeep) === null || _window12$bitkeep === void 0 ? void 0 : _window12$bitkeep.ethereum)) {\n      throw new NoBitKeepProviderError();\n    }\n    let chainId;\n    try {\n      var _window13, _window13$bitkeep;\n      chainId = await ((_window13 = window) === null || _window13 === void 0 ? void 0 : (_window13$bitkeep = _window13.bitkeep) === null || _window13$bitkeep === void 0 ? void 0 : _window13$bitkeep.ethereum.send)(\"eth_chainId\").then(parseSendReturn);\n    } catch {\n      warning(false, \"eth_chainId was unsuccessful, falling back to net_version\");\n    }\n    if (!chainId) {\n      try {\n        var _window14, _window14$bitkeep;\n        // window?.bitkeep?.ethereum.send('net_version').then((res:any) => {\n        //   console.log(res)\n        // })\n        // chainId = await (window?.bitkeep?.ethereum.send as Send)(\"net_version\").then(\n        //   parseSendReturn\n        // );\n        chainId = await ((_window14 = window) === null || _window14 === void 0 ? void 0 : (_window14$bitkeep = _window14.bitkeep) === null || _window14$bitkeep === void 0 ? void 0 : _window14$bitkeep.ethereum.send('net_version'));\n      } catch {\n        warning(false, \"net_version was unsuccessful, falling back to net version v2\");\n      }\n    }\n    if (!chainId) {\n      try {\n        var _window15, _window15$bitkeep;\n        // chainId = parseSendReturn(\n        //   (window?.bitkeep?.ethereum.send as any)({ method: \"net_version\" })\n        // );\n        chainId = await ((_window15 = window) === null || _window15 === void 0 ? void 0 : (_window15$bitkeep = _window15.bitkeep) === null || _window15$bitkeep === void 0 ? void 0 : _window15$bitkeep.ethereum.send('net_version'));\n      } catch {\n        warning(false, \"net_version v2 was unsuccessful, falling back to manual matches and static properties\");\n      }\n    }\n    if (!chainId) {\n      var _window16, _window16$bitkeep;\n      if (((_window16 = window) === null || _window16 === void 0 ? void 0 : (_window16$bitkeep = _window16.bitkeep) === null || _window16$bitkeep === void 0 ? void 0 : _window16$bitkeep.ethereum).isDapper) {\n        var _window17, _window17$bitkeep;\n        chainId = parseSendReturn(((_window17 = window) === null || _window17 === void 0 ? void 0 : (_window17$bitkeep = _window17.bitkeep) === null || _window17$bitkeep === void 0 ? void 0 : _window17$bitkeep.ethereum).cachedResults.net_version);\n      } else {\n        var _window18, _window18$bitkeep, _window19, _window19$bitkeep, _window20, _window20$bitkeep, _window21, _window21$bitkeep;\n        chainId = ((_window18 = window) === null || _window18 === void 0 ? void 0 : (_window18$bitkeep = _window18.bitkeep) === null || _window18$bitkeep === void 0 ? void 0 : _window18$bitkeep.ethereum).chainId || ((_window19 = window) === null || _window19 === void 0 ? void 0 : (_window19$bitkeep = _window19.bitkeep) === null || _window19$bitkeep === void 0 ? void 0 : _window19$bitkeep.ethereum).netVersion || ((_window20 = window) === null || _window20 === void 0 ? void 0 : (_window20$bitkeep = _window20.bitkeep) === null || _window20$bitkeep === void 0 ? void 0 : _window20$bitkeep.ethereum).networkVersion || ((_window21 = window) === null || _window21 === void 0 ? void 0 : (_window21$bitkeep = _window21.bitkeep) === null || _window21$bitkeep === void 0 ? void 0 : _window21$bitkeep.ethereum)._chainId;\n      }\n    }\n    return chainId;\n  }\n  async getAccount() {\n    var _window22, _window22$bitkeep;\n    if (!((_window22 = window) === null || _window22 === void 0 ? void 0 : (_window22$bitkeep = _window22.bitkeep) === null || _window22$bitkeep === void 0 ? void 0 : _window22$bitkeep.ethereum)) {\n      throw new NoBitKeepProviderError();\n    }\n    let account;\n    try {\n      var _window23, _window23$bitkeep;\n      // account = await (window?.bitkeep?.ethereum.send as Send)(\"eth_accounts\").then(\n      //   (sendReturn) => parseSendReturn(sendReturn)[0]\n      // );\n      account = await ((_window23 = window) === null || _window23 === void 0 ? void 0 : (_window23$bitkeep = _window23.bitkeep) === null || _window23$bitkeep === void 0 ? void 0 : _window23$bitkeep.ethereum.send('eth_accounts'));\n    } catch {\n      warning(false, \"eth_accounts was unsuccessful, falling back to enable\");\n    }\n    if (!account) {\n      try {\n        var _window24, _window24$bitkeep;\n        account = await ((_window24 = window) === null || _window24 === void 0 ? void 0 : (_window24$bitkeep = _window24.bitkeep) === null || _window24$bitkeep === void 0 ? void 0 : _window24$bitkeep.ethereum.enable().then(sendReturn => parseSendReturn(sendReturn)[0]));\n      } catch {\n        warning(false, \"enable was unsuccessful, falling back to eth_accounts v2\");\n      }\n    }\n    if (!account) {\n      var _window25, _window25$bitkeep;\n      account = parseSendReturn(((_window25 = window) === null || _window25 === void 0 ? void 0 : (_window25$bitkeep = _window25.bitkeep) === null || _window25$bitkeep === void 0 ? void 0 : _window25$bitkeep.ethereum.send)({\n        method: \"eth_accounts\"\n      }))[0];\n    }\n    return account;\n  }\n  deactivate() {\n    var _window26, _window26$bitkeep, _window27, _window27$bitkeep;\n    if (((_window26 = window) === null || _window26 === void 0 ? void 0 : (_window26$bitkeep = _window26.bitkeep) === null || _window26$bitkeep === void 0 ? void 0 : _window26$bitkeep.ethereum) && ((_window27 = window) === null || _window27 === void 0 ? void 0 : (_window27$bitkeep = _window27.bitkeep) === null || _window27$bitkeep === void 0 ? void 0 : _window27$bitkeep.ethereum.removeListener)) {\n      var _window28, _window28$bitkeep, _window29, _window29$bitkeep, _window30, _window30$bitkeep, _window31, _window31$bitkeep;\n      (_window28 = window) === null || _window28 === void 0 ? void 0 : (_window28$bitkeep = _window28.bitkeep) === null || _window28$bitkeep === void 0 ? void 0 : _window28$bitkeep.ethereum.removeListener(\"chainChanged\", this.handleChainChanged);\n      (_window29 = window) === null || _window29 === void 0 ? void 0 : (_window29$bitkeep = _window29.bitkeep) === null || _window29$bitkeep === void 0 ? void 0 : _window29$bitkeep.ethereum.removeListener(\"accountsChanged\", this.handleAccountsChanged);\n      (_window30 = window) === null || _window30 === void 0 ? void 0 : (_window30$bitkeep = _window30.bitkeep) === null || _window30$bitkeep === void 0 ? void 0 : _window30$bitkeep.ethereum.removeListener(\"close\", this.handleClose);\n      (_window31 = window) === null || _window31 === void 0 ? void 0 : (_window31$bitkeep = _window31.bitkeep) === null || _window31$bitkeep === void 0 ? void 0 : _window31$bitkeep.ethereum.removeListener(\"networkChanged\", this.handleNetworkChanged);\n    }\n  }\n  async isAuthorized() {\n    var _window32, _window32$bitkeep;\n    if (!((_window32 = window) === null || _window32 === void 0 ? void 0 : (_window32$bitkeep = _window32.bitkeep) === null || _window32$bitkeep === void 0 ? void 0 : _window32$bitkeep.ethereum)) {\n      return false;\n    }\n    try {\n      var _window33, _window33$bitkeep;\n      return await ((_window33 = window) === null || _window33 === void 0 ? void 0 : (_window33$bitkeep = _window33.bitkeep) === null || _window33$bitkeep === void 0 ? void 0 : _window33$bitkeep.ethereum.send)(\"eth_accounts\").then(sendReturn => {\n        if (parseSendReturn(sendReturn).length > 0) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n    } catch {\n      return false;\n    }\n  }\n}","map":{"version":3,"names":["AbstractConnector","warning","parseSendReturn","sendReturn","hasOwnProperty","result","NoBitKeepProviderError","Error","constructor","_this$constructor$nam","_this$constructor","name","message","UserRejectedRequestError","_this$constructor$nam2","_this$constructor2","BitKeepConnector","kwargs","handleNetworkChanged","bind","handleChainChanged","handleAccountsChanged","handleClose","chainId","__DEV__","console","log","emitUpdate","provider","window","bitkeep","ethereum","accounts","length","emitDeactivate","account","code","reason","networkId","activate","_window","_window$bitkeep","_window6","_window6$bitkeep","_window10","_window10$bitkeep","on","_window2","_window2$bitkeep","_window3","_window3$bitkeep","_window4","_window4$bitkeep","_window5","_window5$bitkeep","isMetaMask","_window7","_window7$bitkeep","autoRefreshOnNetworkChange","_window8","_window8$bitkeep","send","then","error","_window9","_window9$bitkeep","enable","getProvider","_window11","_window11$bitkeep","getChainId","_window12","_window12$bitkeep","_window13","_window13$bitkeep","_window14","_window14$bitkeep","_window15","_window15$bitkeep","_window16","_window16$bitkeep","isDapper","_window17","_window17$bitkeep","cachedResults","net_version","_window18","_window18$bitkeep","_window19","_window19$bitkeep","_window20","_window20$bitkeep","_window21","_window21$bitkeep","netVersion","networkVersion","_chainId","getAccount","_window22","_window22$bitkeep","_window23","_window23$bitkeep","_window24","_window24$bitkeep","_window25","_window25$bitkeep","method","deactivate","_window26","_window26$bitkeep","_window27","_window27$bitkeep","removeListener","_window28","_window28$bitkeep","_window29","_window29$bitkeep","_window30","_window30$bitkeep","_window31","_window31$bitkeep","isAuthorized","_window32","_window32$bitkeep","_window33","_window33$bitkeep"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/connectors/bitkeep/index.ts"],"sourcesContent":["import { AbstractConnectorArguments, ConnectorUpdate } from \"@web3-react/types\";\nimport { AbstractConnector } from \"@web3-react/abstract-connector\";\nimport warning from \"tiny-warning\";\n\n// import { SendReturnResult, SendReturn, Send, SendOld } from \"./types\";\nexport type SendReturnResult = { result: any }\nexport type SendReturn = any\n\nexport type Send = (method: string, params?: any[]) => Promise<SendReturnResult | SendReturn>\nexport type SendOld = ({ method }: { method: string }) => Promise<SendReturnResult | SendReturn>\n\nfunction parseSendReturn(sendReturn: SendReturnResult | SendReturn): any {\n  return sendReturn.hasOwnProperty(\"result\") ? sendReturn.result : sendReturn;\n}\n\nexport class NoBitKeepProviderError extends Error {\n  public constructor() {\n    super();\n    this.name = this?.constructor?.name ?? '';\n    this.message = \"No BitKeep provider was found on window.bitkeep.\";\n  }\n}\n\nexport class UserRejectedRequestError extends Error {\n  public constructor() {\n    super();\n    this.name = this?.constructor?.name ?? '';\n    this.message = \"The user rejected the request.\";\n  }\n}\n\nexport class BitKeepConnector extends AbstractConnector {\n  constructor(kwargs: AbstractConnectorArguments) {\n    super(kwargs);\n\n    this.handleNetworkChanged = this.handleNetworkChanged.bind(this);\n    this.handleChainChanged = this.handleChainChanged.bind(this);\n    this.handleAccountsChanged = this.handleAccountsChanged.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  private handleChainChanged(chainId: string | number): void {\n    if (__DEV__) {\n      console.log(\"Handling 'chainChanged' event with payload\", chainId);\n    }\n    this.emitUpdate({ chainId, provider: window.bitkeep.ethereum });\n  }\n\n  private handleAccountsChanged(accounts: string[]): void {\n    if (__DEV__) {\n      console.log(\"Handling 'accountsChanged' event with payload\", accounts);\n    }\n    if (accounts.length === 0) {\n      this.emitDeactivate();\n    } else {\n      this.emitUpdate({ account: accounts[0] });\n    }\n  }\n\n  private handleClose(code: number, reason: string): void {\n    if (__DEV__) {\n      console.log(\"Handling 'close' event with payload\", code, reason);\n    }\n    this.emitDeactivate();\n  }\n\n  private handleNetworkChanged(networkId: string | number): void {\n    if (__DEV__) {\n      console.log(\"Handling 'networkChanged' event with payload\", networkId);\n    }\n    this.emitUpdate({ chainId: networkId, provider: window.bitkeep.ethereum });\n  }\n\n  public async activate(): Promise<ConnectorUpdate> {\n    if (!window?.bitkeep?.ethereum) {\n      throw new NoBitKeepProviderError();\n    }\n\n    if (window.bitkeep.ethereum.on) {\n      window?.bitkeep?.ethereum.on(\"chainChanged\", this.handleChainChanged);\n      window?.bitkeep?.ethereum.on(\"accountsChanged\", this.handleAccountsChanged);\n      window?.bitkeep?.ethereum.on(\"close\", this.handleClose);\n      window?.bitkeep?.ethereum.on(\"networkChanged\", this.handleNetworkChanged);\n    }\n\n    if ((window?.bitkeep?.ethereum as any).isMetaMask) {\n      (window?.bitkeep?.ethereum as any).autoRefreshOnNetworkChange = false;\n    }\n\n    // try to activate + get account via eth_requestAccounts\n    let account;\n    try {\n      account = await (window?.bitkeep?.ethereum.send as Send)(\n        \"eth_requestAccounts\"\n      ).then((sendReturn) => parseSendReturn(sendReturn)[0]);\n    } catch (error) {\n      if ((error as any).code === 4001) {\n        throw new UserRejectedRequestError();\n      }\n      warning(\n        false,\n        \"eth_requestAccounts was unsuccessful, falling back to enable\"\n      );\n    }\n\n    // if unsuccessful, try enable\n    if (!account) {\n      // if enable is successful but doesn't return accounts, fall back to getAccount (not happy i have to do this...)\n      account = await window?.bitkeep?.ethereum.enable().then(\n        (sendReturn:any) => sendReturn && parseSendReturn(sendReturn)[0]\n      );\n    }\n\n    return { provider: window?.bitkeep?.ethereum, ...(account ? { account } : {}) };\n  }\n\n  public async getProvider(): Promise<any> {\n    return window?.bitkeep?.ethereum;\n  }\n\n  public async getChainId(): Promise<number | string> {\n    if (!window?.bitkeep?.ethereum) {\n      throw new NoBitKeepProviderError();\n    }\n\n    let chainId;\n    try {\n      chainId = await (window?.bitkeep?.ethereum.send as Send)(\"eth_chainId\").then(\n        parseSendReturn\n      );\n    } catch {\n      warning(\n        false,\n        \"eth_chainId was unsuccessful, falling back to net_version\"\n      );\n    }\n\n    if (!chainId) {\n      try {\n        // window?.bitkeep?.ethereum.send('net_version').then((res:any) => {\n        //   console.log(res)\n        // })\n        // chainId = await (window?.bitkeep?.ethereum.send as Send)(\"net_version\").then(\n        //   parseSendReturn\n        // );\n        chainId = await window?.bitkeep?.ethereum.send('net_version')\n      } catch {\n        warning(\n          false,\n          \"net_version was unsuccessful, falling back to net version v2\"\n        );\n      }\n    }\n\n    if (!chainId) {\n      try {\n        // chainId = parseSendReturn(\n        //   (window?.bitkeep?.ethereum.send as any)({ method: \"net_version\" })\n        // );\n        chainId = await window?.bitkeep?.ethereum.send('net_version')\n      } catch {\n        warning(\n          false,\n          \"net_version v2 was unsuccessful, falling back to manual matches and static properties\"\n        );\n      }\n    }\n\n    if (!chainId) {\n      if ((window?.bitkeep?.ethereum as any).isDapper) {\n        chainId = parseSendReturn(\n          (window?.bitkeep?.ethereum as any).cachedResults.net_version\n        );\n      } else {\n        chainId =\n          (window?.bitkeep?.ethereum as any).chainId ||\n          (window?.bitkeep?.ethereum as any).netVersion ||\n          (window?.bitkeep?.ethereum as any).networkVersion ||\n          (window?.bitkeep?.ethereum as any)._chainId;\n      }\n    }\n\n    return chainId;\n  }\n\n  public async getAccount(): Promise<null | string> {\n    if (!window?.bitkeep?.ethereum) {\n      throw new NoBitKeepProviderError();\n    }\n\n    let account;\n    try {\n      // account = await (window?.bitkeep?.ethereum.send as Send)(\"eth_accounts\").then(\n      //   (sendReturn) => parseSendReturn(sendReturn)[0]\n      // );\n      account = await window?.bitkeep?.ethereum.send('eth_accounts')\n    } catch {\n      warning(false, \"eth_accounts was unsuccessful, falling back to enable\");\n    }\n\n    if (!account) {\n      try {\n        account = await window?.bitkeep?.ethereum.enable().then(\n          (sendReturn:any) => parseSendReturn(sendReturn)[0]\n        );\n      } catch {\n        warning(\n          false,\n          \"enable was unsuccessful, falling back to eth_accounts v2\"\n        );\n      }\n    }\n\n    if (!account) {\n      account = parseSendReturn(\n        (window?.bitkeep?.ethereum.send as SendOld)({ method: \"eth_accounts\" })\n      )[0];\n    }\n\n    return account;\n  }\n\n  public deactivate() {\n    if (window?.bitkeep?.ethereum && window?.bitkeep?.ethereum.removeListener) {\n      window?.bitkeep?.ethereum.removeListener(\n        \"chainChanged\",\n        this.handleChainChanged\n      );\n      window?.bitkeep?.ethereum.removeListener(\n        \"accountsChanged\",\n        this.handleAccountsChanged\n      );\n      window?.bitkeep?.ethereum.removeListener(\"close\", this.handleClose);\n      window?.bitkeep?.ethereum.removeListener(\n        \"networkChanged\",\n        this.handleNetworkChanged\n      );\n    }\n  }\n\n  public async isAuthorized(): Promise<boolean> {\n    if (!window?.bitkeep?.ethereum) {\n      return false;\n    }\n\n    try {\n      return await (window?.bitkeep?.ethereum.send as Send)(\"eth_accounts\").then(\n        (sendReturn) => {\n          if (parseSendReturn(sendReturn).length > 0) {\n            return true;\n          } else {\n            return false;\n          }\n        }\n      );\n    } catch {\n      return false;\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
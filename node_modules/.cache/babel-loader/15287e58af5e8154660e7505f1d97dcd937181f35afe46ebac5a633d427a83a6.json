{"ast":null,"code":"import axios from 'axios';\n// import config from '../../config'\n\nfunction getApiUrlData(url, token, address) {\n  return new Promise(resolve => {\n    axios.get(url).then(res => {\n      if (res && res.data && res.status === 200) {\n        // let price = res.data[0].current_price\n        window.localStorage.setItem(token, JSON.stringify({\n          timestamp: Date.now(),\n          data: res.data,\n          address: address\n        }));\n        resolve({\n          msg: 'Success',\n          data: res.data\n        });\n      } else {\n        window.localStorage.setItem(token, '');\n        resolve({\n          msg: 'Error',\n          data: ''\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n      window.localStorage.setItem(token, '');\n      resolve({\n        msg: 'Error',\n        data: ''\n      });\n    });\n  });\n}\nfunction getApiData(url, token, intarval, address) {\n  const localData = window.localStorage.getItem(token);\n  return new Promise(resolve => {\n    if (localData) {\n      const localObj = JSON.parse(localData);\n      if (Date.now() - Number(localObj.timestamp) > intarval || !localObj.data || address && address !== localObj.address) {\n        getApiUrlData(url, token, address).then(res => {\n          // console.log(res)\n          if (res.msg === 'Success') {\n            resolve(res.data);\n          } else {\n            resolve('');\n          }\n        });\n      } else {\n        resolve(localObj.data);\n      }\n    } else {\n      getApiUrlData(url, token, address).then(res => {\n        // console.log(res)\n        if (res.msg === 'Success') {\n          resolve(res.data);\n        } else {\n          resolve('');\n        }\n      });\n    }\n  });\n}\nexport const getPrice = coin => {\n  return new Promise(resolve => {\n    // coin = coin ? coin : config.symbol\n    let url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=fsn';\n    // if (true) {\n    if (coin === 'BNB') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=binancecoin';\n    } else if (coin === 'HT') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=huobi-token';\n    } else if (coin === 'FTM') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=fantom';\n    } else if (coin === 'ANY') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=anyswap';\n    } else if (coin === 'DEP') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=deapcoin';\n    } else if (coin === 'HERO') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=hero';\n    } else if (coin === 'PLAY') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=polyplay';\n    } else if (coin === 'BACON') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=bacondao';\n    } else if (coin === 'KABY') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=kaby-arena';\n    } else if (coin === 'MULTI') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=multichain';\n    } else if (coin === 'ARB') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=arbitrum';\n    }\n    // console.log(url)\n    getApiData(url, coin + '_PRICE', 1000 * 60 * 60).then(res => {\n      if (res && res.length > 0) {\n        const price = res[0].current_price;\n        resolve(price);\n      } else {\n        resolve('');\n      }\n    });\n  });\n};\nexport const getLabelPrice = label => {\n  return new Promise(resolve => {\n    // coin = coin ? coin : config.symbol\n    const url = \"https://bridgeapi.deltaswap.io/token/price?label=\".concat(label);\n    // console.log(url)\n    getApiData(url, label + '_PRICE', 1000 * 60 * 60).then(res => {\n      // console.log(res)\n      if (res.usd) {\n        const price = res.usd;\n        resolve(price);\n      } else {\n        resolve('');\n      }\n    });\n  });\n};","map":{"version":3,"names":["axios","getApiUrlData","url","token","address","Promise","resolve","get","then","res","data","status","window","localStorage","setItem","JSON","stringify","timestamp","Date","now","msg","catch","err","console","log","getApiData","intarval","localData","getItem","localObj","parse","Number","getPrice","coin","length","price","current_price","getLabelPrice","label","concat","usd"],"sources":["/workspace/Planq-Dapps/vesting-portal/src/utils/tools/getPrice.ts"],"sourcesContent":["import axios from 'axios'\n// import config from '../../config'\n\n\nfunction getApiUrlData (url:string, token:string, address?:string) {\n  return new Promise(resolve => {\n    axios.get(url).then((res:any) => {\n      if (res && res.data && res.status === 200) {\n        // let price = res.data[0].current_price\n        window.localStorage.setItem(token, JSON.stringify({\n          timestamp: Date.now(),\n          data: res.data,\n          address: address\n        }))\n        resolve({\n          msg: 'Success',\n          data: res.data\n        })\n      } else {\n        window.localStorage.setItem(token, '')\n        resolve({\n          msg: 'Error',\n          data: ''\n        })\n      }\n    }).catch((err:any) => {\n      console.log(err)\n      window.localStorage.setItem(token, '')\n      resolve({\n        msg: 'Error',\n        data: ''\n      })\n    })\n  })\n}\n\nfunction getApiData (url:string, token:string, intarval:number, address?:string) {\n  const localData = window.localStorage.getItem(token)\n  return new Promise(resolve => {\n    if (localData) {\n      const localObj = JSON.parse(localData)\n      if (\n        (Date.now() - Number(localObj.timestamp) > intarval)\n        || !localObj.data\n        || (address && address !== localObj.address)\n      ) {\n        getApiUrlData(url, token, address).then((res:any) => {\n          // console.log(res)\n          if (res.msg === 'Success') {\n            resolve(res.data)\n          } else {\n            resolve('')\n          }\n        })\n      } else {\n        resolve(localObj.data)\n      }\n    } else {\n      getApiUrlData(url, token, address).then((res:any) => {\n        // console.log(res)\n        if (res.msg === 'Success') {\n          resolve(res.data)\n        } else {\n          resolve('')\n        }\n      })\n    }\n  })\n}\nexport const getPrice = (coin:string) => {\n  return new Promise(resolve => {\n    // coin = coin ? coin : config.symbol\n    let url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=fsn'\n    // if (true) {\n    if (coin === 'BNB') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=binancecoin'\n    } else if (coin === 'HT') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=huobi-token'\n    } else if (coin === 'FTM') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=fantom'\n    } else if (coin === 'ANY') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=anyswap'\n    } else if (coin === 'DEP') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=deapcoin'\n    } else if (coin === 'HERO') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=hero'\n    } else if (coin === 'PLAY') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=polyplay'\n    } else if (coin === 'BACON') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=bacondao'\n    } else if (coin === 'KABY') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=kaby-arena'\n    } else if (coin === 'MULTI') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=multichain'\n    } else if (coin === 'ARB') {\n      url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=arbitrum'\n    }\n    // console.log(url)\n    getApiData(url, coin + '_PRICE', 1000 * 60 * 60).then((res:any) => {\n      if (res && res.length > 0) {\n        const price = res[0].current_price\n        resolve(price)\n      } else {\n        resolve('')\n      }\n    })\n  })\n}\n\nexport const getLabelPrice = (label:string) => {\n  return new Promise(resolve => {\n    // coin = coin ? coin : config.symbol\n    const url = `https://bridgeapi.deltaswap.io/token/price?label=${label}`\n    // console.log(url)\n    getApiData(url, label + '_PRICE', 1000 * 60 * 60).then((res:any) => {\n      // console.log(res)\n      if (res.usd) {\n        const price = res.usd\n        resolve(price)\n      } else {\n        resolve('')\n      }\n    })\n  })\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
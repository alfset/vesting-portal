{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createGovAminoConverters = exports.isAminoMsgDeposit = exports.isAminoMsgVoteWeighted = exports.isAminoMsgVote = exports.isAminoMsgSubmitProposal = void 0;\nconst math_1 = require(\"@cosmjs/math\");\nconst utils_1 = require(\"@cosmjs/utils\");\nconst gov_1 = require(\"cosmjs-types/cosmos/gov/v1beta1/gov\");\nconst any_1 = require(\"cosmjs-types/google/protobuf/any\");\nconst long_1 = __importDefault(require(\"long\"));\nconst queryclient_1 = require(\"../../queryclient\");\nfunction isAminoMsgSubmitProposal(msg) {\n  return msg.type === \"cosmos-sdk/MsgSubmitProposal\";\n}\nexports.isAminoMsgSubmitProposal = isAminoMsgSubmitProposal;\nfunction isAminoMsgVote(msg) {\n  return msg.type === \"cosmos-sdk/MsgVote\";\n}\nexports.isAminoMsgVote = isAminoMsgVote;\nfunction isAminoMsgVoteWeighted(msg) {\n  return msg.type === \"cosmos-sdk/MsgVoteWeighted\";\n}\nexports.isAminoMsgVoteWeighted = isAminoMsgVoteWeighted;\nfunction isAminoMsgDeposit(msg) {\n  return msg.type === \"cosmos-sdk/MsgDeposit\";\n}\nexports.isAminoMsgDeposit = isAminoMsgDeposit;\nfunction createGovAminoConverters() {\n  return {\n    \"/cosmos.gov.v1beta1.MsgDeposit\": {\n      aminoType: \"cosmos-sdk/MsgDeposit\",\n      toAmino: _ref => {\n        let {\n          amount,\n          depositor,\n          proposalId\n        } = _ref;\n        return {\n          amount,\n          depositor,\n          proposal_id: proposalId.toString()\n        };\n      },\n      fromAmino: _ref2 => {\n        let {\n          amount,\n          depositor,\n          proposal_id\n        } = _ref2;\n        return {\n          amount: Array.from(amount),\n          depositor,\n          proposalId: long_1.default.fromString(proposal_id)\n        };\n      }\n    },\n    \"/cosmos.gov.v1beta1.MsgVote\": {\n      aminoType: \"cosmos-sdk/MsgVote\",\n      toAmino: _ref3 => {\n        let {\n          option,\n          proposalId,\n          voter\n        } = _ref3;\n        return {\n          option: option,\n          proposal_id: proposalId.toString(),\n          voter: voter\n        };\n      },\n      fromAmino: _ref4 => {\n        let {\n          option,\n          proposal_id,\n          voter\n        } = _ref4;\n        return {\n          option: (0, gov_1.voteOptionFromJSON)(option),\n          proposalId: long_1.default.fromString(proposal_id),\n          voter: voter\n        };\n      }\n    },\n    \"/cosmos.gov.v1beta1.MsgVoteWeighted\": {\n      aminoType: \"cosmos-sdk/MsgVoteWeighted\",\n      toAmino: _ref5 => {\n        let {\n          options,\n          proposalId,\n          voter\n        } = _ref5;\n        return {\n          options: options.map(o => ({\n            option: o.option,\n            // Weight is between 0 and 1, so we always have 20 characters when printing all trailing\n            // zeros (e.g. \"0.700000000000000000\" or \"1.000000000000000000\")\n            weight: (0, queryclient_1.decodeCosmosSdkDecFromProto)(o.weight).toString().padEnd(20, \"0\")\n          })),\n          proposal_id: proposalId.toString(),\n          voter: voter\n        };\n      },\n      fromAmino: _ref6 => {\n        let {\n          options,\n          proposal_id,\n          voter\n        } = _ref6;\n        return {\n          proposalId: long_1.default.fromString(proposal_id),\n          voter: voter,\n          options: options.map(o => ({\n            option: (0, gov_1.voteOptionFromJSON)(o.option),\n            weight: math_1.Decimal.fromUserInput(o.weight, 18).atomics\n          }))\n        };\n      }\n    },\n    \"/cosmos.gov.v1beta1.MsgSubmitProposal\": {\n      aminoType: \"cosmos-sdk/MsgSubmitProposal\",\n      toAmino: _ref7 => {\n        let {\n          initialDeposit,\n          proposer,\n          content\n        } = _ref7;\n        (0, utils_1.assertDefinedAndNotNull)(content);\n        let proposal;\n        switch (content.typeUrl) {\n          case \"/cosmos.gov.v1beta1.TextProposal\":\n            {\n              const textProposal = gov_1.TextProposal.decode(content.value);\n              proposal = {\n                type: \"cosmos-sdk/TextProposal\",\n                value: {\n                  description: textProposal.description,\n                  title: textProposal.title\n                }\n              };\n              break;\n            }\n          default:\n            throw new Error(\"Unsupported proposal type: '\".concat(content.typeUrl, \"'\"));\n        }\n        return {\n          initial_deposit: initialDeposit,\n          proposer: proposer,\n          content: proposal\n        };\n      },\n      fromAmino: _ref8 => {\n        let {\n          initial_deposit,\n          proposer,\n          content\n        } = _ref8;\n        let any_content;\n        switch (content.type) {\n          case \"cosmos-sdk/TextProposal\":\n            {\n              const {\n                value\n              } = content;\n              (0, utils_1.assert)((0, utils_1.isNonNullObject)(value));\n              const {\n                title,\n                description\n              } = value;\n              (0, utils_1.assert)(typeof title === \"string\");\n              (0, utils_1.assert)(typeof description === \"string\");\n              any_content = any_1.Any.fromPartial({\n                typeUrl: \"/cosmos.gov.v1beta1.TextProposal\",\n                value: gov_1.TextProposal.encode(gov_1.TextProposal.fromPartial({\n                  title: title,\n                  description: description\n                })).finish()\n              });\n              break;\n            }\n          default:\n            throw new Error(\"Unsupported proposal type: '\".concat(content.type, \"'\"));\n        }\n        return {\n          initialDeposit: Array.from(initial_deposit),\n          proposer: proposer,\n          content: any_content\n        };\n      }\n    }\n  };\n}\nexports.createGovAminoConverters = createGovAminoConverters;","map":{"version":3,"names":["math_1","require","utils_1","gov_1","any_1","long_1","__importDefault","queryclient_1","isAminoMsgSubmitProposal","msg","type","exports","isAminoMsgVote","isAminoMsgVoteWeighted","isAminoMsgDeposit","createGovAminoConverters","aminoType","toAmino","_ref","amount","depositor","proposalId","proposal_id","toString","fromAmino","_ref2","Array","from","default","fromString","_ref3","option","voter","_ref4","voteOptionFromJSON","_ref5","options","map","o","weight","decodeCosmosSdkDecFromProto","padEnd","_ref6","Decimal","fromUserInput","atomics","_ref7","initialDeposit","proposer","content","assertDefinedAndNotNull","proposal","typeUrl","textProposal","TextProposal","decode","value","description","title","Error","concat","initial_deposit","_ref8","any_content","assert","isNonNullObject","Any","fromPartial","encode","finish"],"sources":["../../../src/modules/gov/aminomessages.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
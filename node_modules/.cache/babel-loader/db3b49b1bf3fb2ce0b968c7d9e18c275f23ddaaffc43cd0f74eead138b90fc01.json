{"ast":null,"code":"var parse = require('url').parse;\nvar events = require('events');\nvar https = require('https');\nvar http = require('http');\nvar util = require('util');\nvar httpsOptions = ['pfx', 'key', 'passphrase', 'cert', 'ca', 'ciphers', 'rejectUnauthorized', 'secureProtocol', 'servername', 'checkServerIdentity'];\nvar bom = [239, 187, 191];\nvar colon = 58;\nvar space = 32;\nvar lineFeed = 10;\nvar carriageReturn = 13;\nfunction hasBom(buf) {\n  return bom.every(function (charCode, index) {\n    return buf[index] === charCode;\n  });\n}\n\n/**\n * Creates a new EventSource object\n *\n * @param {String} url the URL to which to connect\n * @param {Object} [eventSourceInitDict] extra init params. See README for details.\n * @api public\n **/\nfunction EventSource(url, eventSourceInitDict) {\n  var readyState = EventSource.CONNECTING;\n  var headers = eventSourceInitDict && eventSourceInitDict.headers;\n  var hasNewOrigin = false;\n  Object.defineProperty(this, 'readyState', {\n    get: function () {\n      return readyState;\n    }\n  });\n  Object.defineProperty(this, 'url', {\n    get: function () {\n      return url;\n    }\n  });\n  var self = this;\n  self.reconnectInterval = 1000;\n  self.connectionInProgress = false;\n  function onConnectionClosed(message) {\n    if (readyState === EventSource.CLOSED) return;\n    readyState = EventSource.CONNECTING;\n    _emit('error', new Event('error', {\n      message: message\n    }));\n\n    // The url may have been changed by a temporary redirect. If that's the case,\n    // revert it now, and flag that we are no longer pointing to a new origin\n    if (reconnectUrl) {\n      url = reconnectUrl;\n      reconnectUrl = null;\n      hasNewOrigin = false;\n    }\n    setTimeout(function () {\n      if (readyState !== EventSource.CONNECTING || self.connectionInProgress) {\n        return;\n      }\n      self.connectionInProgress = true;\n      connect();\n    }, self.reconnectInterval);\n  }\n  var req;\n  var lastEventId = '';\n  if (headers && headers['Last-Event-ID']) {\n    lastEventId = headers['Last-Event-ID'];\n    delete headers['Last-Event-ID'];\n  }\n  var discardTrailingNewline = false;\n  var data = '';\n  var eventName = '';\n  var reconnectUrl = null;\n  function connect() {\n    var options = parse(url);\n    var isSecure = options.protocol === 'https:';\n    options.headers = {\n      'Cache-Control': 'no-cache',\n      'Accept': 'text/event-stream'\n    };\n    if (lastEventId) options.headers['Last-Event-ID'] = lastEventId;\n    if (headers) {\n      var reqHeaders = hasNewOrigin ? removeUnsafeHeaders(headers) : headers;\n      for (var i in reqHeaders) {\n        var header = reqHeaders[i];\n        if (header) {\n          options.headers[i] = header;\n        }\n      }\n    }\n\n    // Legacy: this should be specified as `eventSourceInitDict.https.rejectUnauthorized`,\n    // but for now exists as a backwards-compatibility layer\n    options.rejectUnauthorized = !(eventSourceInitDict && !eventSourceInitDict.rejectUnauthorized);\n    if (eventSourceInitDict && eventSourceInitDict.createConnection !== undefined) {\n      options.createConnection = eventSourceInitDict.createConnection;\n    }\n\n    // If specify http proxy, make the request to sent to the proxy server,\n    // and include the original url in path and Host headers\n    var useProxy = eventSourceInitDict && eventSourceInitDict.proxy;\n    if (useProxy) {\n      var proxy = parse(eventSourceInitDict.proxy);\n      isSecure = proxy.protocol === 'https:';\n      options.protocol = isSecure ? 'https:' : 'http:';\n      options.path = url;\n      options.headers.Host = options.host;\n      options.hostname = proxy.hostname;\n      options.host = proxy.host;\n      options.port = proxy.port;\n    }\n\n    // If https options are specified, merge them into the request options\n    if (eventSourceInitDict && eventSourceInitDict.https) {\n      for (var optName in eventSourceInitDict.https) {\n        if (httpsOptions.indexOf(optName) === -1) {\n          continue;\n        }\n        var option = eventSourceInitDict.https[optName];\n        if (option !== undefined) {\n          options[optName] = option;\n        }\n      }\n    }\n\n    // Pass this on to the XHR\n    if (eventSourceInitDict && eventSourceInitDict.withCredentials !== undefined) {\n      options.withCredentials = eventSourceInitDict.withCredentials;\n    }\n    req = (isSecure ? https : http).request(options, function (res) {\n      self.connectionInProgress = false;\n      // Handle HTTP errors\n      if (res.statusCode === 500 || res.statusCode === 502 || res.statusCode === 503 || res.statusCode === 504) {\n        _emit('error', new Event('error', {\n          status: res.statusCode,\n          message: res.statusMessage\n        }));\n        onConnectionClosed();\n        return;\n      }\n\n      // Handle HTTP redirects\n      if (res.statusCode === 301 || res.statusCode === 302 || res.statusCode === 307) {\n        var location = res.headers.location;\n        if (!location) {\n          // Server sent redirect response without Location header.\n          _emit('error', new Event('error', {\n            status: res.statusCode,\n            message: res.statusMessage\n          }));\n          return;\n        }\n        var prevOrigin = getOrigin(url);\n        var nextOrigin = getOrigin(location);\n        hasNewOrigin = prevOrigin !== nextOrigin;\n        if (res.statusCode === 307) reconnectUrl = url;\n        url = location;\n        process.nextTick(connect);\n        return;\n      }\n      if (res.statusCode !== 200) {\n        _emit('error', new Event('error', {\n          status: res.statusCode,\n          message: res.statusMessage\n        }));\n        return self.close();\n      }\n      readyState = EventSource.OPEN;\n      res.on('close', function () {\n        res.removeAllListeners('close');\n        res.removeAllListeners('end');\n        onConnectionClosed();\n      });\n      res.on('end', function () {\n        res.removeAllListeners('close');\n        res.removeAllListeners('end');\n        onConnectionClosed();\n      });\n      _emit('open', new Event('open'));\n\n      // text/event-stream parser adapted from webkit's\n      // Source/WebCore/page/EventSource.cpp\n      var isFirst = true;\n      var buf;\n      var startingPos = 0;\n      var startingFieldLength = -1;\n      res.on('data', function (chunk) {\n        buf = buf ? Buffer.concat([buf, chunk]) : chunk;\n        if (isFirst && hasBom(buf)) {\n          buf = buf.slice(bom.length);\n        }\n        isFirst = false;\n        var pos = 0;\n        var length = buf.length;\n        while (pos < length) {\n          if (discardTrailingNewline) {\n            if (buf[pos] === lineFeed) {\n              ++pos;\n            }\n            discardTrailingNewline = false;\n          }\n          var lineLength = -1;\n          var fieldLength = startingFieldLength;\n          var c;\n          for (var i = startingPos; lineLength < 0 && i < length; ++i) {\n            c = buf[i];\n            if (c === colon) {\n              if (fieldLength < 0) {\n                fieldLength = i - pos;\n              }\n            } else if (c === carriageReturn) {\n              discardTrailingNewline = true;\n              lineLength = i - pos;\n            } else if (c === lineFeed) {\n              lineLength = i - pos;\n            }\n          }\n          if (lineLength < 0) {\n            startingPos = length - pos;\n            startingFieldLength = fieldLength;\n            break;\n          } else {\n            startingPos = 0;\n            startingFieldLength = -1;\n          }\n          parseEventStreamLine(buf, pos, fieldLength, lineLength);\n          pos += lineLength + 1;\n        }\n        if (pos === length) {\n          buf = void 0;\n        } else if (pos > 0) {\n          buf = buf.slice(pos);\n        }\n      });\n    });\n    req.on('error', function (err) {\n      self.connectionInProgress = false;\n      onConnectionClosed(err.message);\n    });\n    if (req.setNoDelay) req.setNoDelay(true);\n    req.end();\n  }\n  connect();\n  function _emit() {\n    if (self.listeners(arguments[0]).length > 0) {\n      self.emit.apply(self, arguments);\n    }\n  }\n  this._close = function () {\n    if (readyState === EventSource.CLOSED) return;\n    readyState = EventSource.CLOSED;\n    if (req.abort) req.abort();\n    if (req.xhr && req.xhr.abort) req.xhr.abort();\n  };\n  function parseEventStreamLine(buf, pos, fieldLength, lineLength) {\n    if (lineLength === 0) {\n      if (data.length > 0) {\n        var type = eventName || 'message';\n        _emit(type, new MessageEvent(type, {\n          data: data.slice(0, -1),\n          // remove trailing newline\n          lastEventId: lastEventId,\n          origin: getOrigin(url)\n        }));\n        data = '';\n      }\n      eventName = void 0;\n    } else if (fieldLength > 0) {\n      var noValue = fieldLength < 0;\n      var step = 0;\n      var field = buf.slice(pos, pos + (noValue ? lineLength : fieldLength)).toString();\n      if (noValue) {\n        step = lineLength;\n      } else if (buf[pos + fieldLength + 1] !== space) {\n        step = fieldLength + 1;\n      } else {\n        step = fieldLength + 2;\n      }\n      pos += step;\n      var valueLength = lineLength - step;\n      var value = buf.slice(pos, pos + valueLength).toString();\n      if (field === 'data') {\n        data += value + '\\n';\n      } else if (field === 'event') {\n        eventName = value;\n      } else if (field === 'id') {\n        lastEventId = value;\n      } else if (field === 'retry') {\n        var retry = parseInt(value, 10);\n        if (!Number.isNaN(retry)) {\n          self.reconnectInterval = retry;\n        }\n      }\n    }\n  }\n}\nmodule.exports = EventSource;\nutil.inherits(EventSource, events.EventEmitter);\nEventSource.prototype.constructor = EventSource; // make stacktraces readable\n\n['open', 'error', 'message'].forEach(function (method) {\n  Object.defineProperty(EventSource.prototype, 'on' + method, {\n    /**\n     * Returns the current listener\n     *\n     * @return {Mixed} the set function or undefined\n     * @api private\n     */\n    get: function get() {\n      var listener = this.listeners(method)[0];\n      return listener ? listener._listener ? listener._listener : listener : undefined;\n    },\n    /**\n     * Start listening for events\n     *\n     * @param {Function} listener the listener\n     * @return {Mixed} the set function or undefined\n     * @api private\n     */\n    set: function set(listener) {\n      this.removeAllListeners(method);\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\n/**\n * Ready states\n */\nObject.defineProperty(EventSource, 'CONNECTING', {\n  enumerable: true,\n  value: 0\n});\nObject.defineProperty(EventSource, 'OPEN', {\n  enumerable: true,\n  value: 1\n});\nObject.defineProperty(EventSource, 'CLOSED', {\n  enumerable: true,\n  value: 2\n});\nEventSource.prototype.CONNECTING = 0;\nEventSource.prototype.OPEN = 1;\nEventSource.prototype.CLOSED = 2;\n\n/**\n * Closes the connection, if one is made, and sets the readyState attribute to 2 (closed)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventSource/close\n * @api public\n */\nEventSource.prototype.close = function () {\n  this._close();\n};\n\n/**\n * Emulates the W3C Browser based WebSocket interface using addEventListener.\n *\n * @param {String} type A string representing the event type to listen out for\n * @param {Function} listener callback\n * @see https://developer.mozilla.org/en/DOM/element.addEventListener\n * @see http://dev.w3.org/html5/websockets/#the-websocket-interface\n * @api public\n */\nEventSource.prototype.addEventListener = function addEventListener(type, listener) {\n  if (typeof listener === 'function') {\n    // store a reference so we can return the original function again\n    listener._listener = listener;\n    this.on(type, listener);\n  }\n};\n\n/**\n * Emulates the W3C Browser based WebSocket interface using dispatchEvent.\n *\n * @param {Event} event An event to be dispatched\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n * @api public\n */\nEventSource.prototype.dispatchEvent = function dispatchEvent(event) {\n  if (!event.type) {\n    throw new Error('UNSPECIFIED_EVENT_TYPE_ERR');\n  }\n  // if event is instance of an CustomEvent (or has 'details' property),\n  // send the detail object as the payload for the event\n  this.emit(event.type, event.detail);\n};\n\n/**\n * Emulates the W3C Browser based WebSocket interface using removeEventListener.\n *\n * @param {String} type A string representing the event type to remove\n * @param {Function} listener callback\n * @see https://developer.mozilla.org/en/DOM/element.removeEventListener\n * @see http://dev.w3.org/html5/websockets/#the-websocket-interface\n * @api public\n */\nEventSource.prototype.removeEventListener = function removeEventListener(type, listener) {\n  if (typeof listener === 'function') {\n    listener._listener = undefined;\n    this.removeListener(type, listener);\n  }\n};\n\n/**\n * W3C Event\n *\n * @see http://www.w3.org/TR/DOM-Level-3-Events/#interface-Event\n * @api private\n */\nfunction Event(type, optionalProperties) {\n  Object.defineProperty(this, 'type', {\n    writable: false,\n    value: type,\n    enumerable: true\n  });\n  if (optionalProperties) {\n    for (var f in optionalProperties) {\n      if (optionalProperties.hasOwnProperty(f)) {\n        Object.defineProperty(this, f, {\n          writable: false,\n          value: optionalProperties[f],\n          enumerable: true\n        });\n      }\n    }\n  }\n}\n\n/**\n * W3C MessageEvent\n *\n * @see http://www.w3.org/TR/webmessaging/#event-definitions\n * @api private\n */\nfunction MessageEvent(type, eventInitDict) {\n  Object.defineProperty(this, 'type', {\n    writable: false,\n    value: type,\n    enumerable: true\n  });\n  for (var f in eventInitDict) {\n    if (eventInitDict.hasOwnProperty(f)) {\n      Object.defineProperty(this, f, {\n        writable: false,\n        value: eventInitDict[f],\n        enumerable: true\n      });\n    }\n  }\n}\n\n/**\n * Returns a new object of headers that does not include any authorization and cookie headers\n *\n * @param {Object} headers An object of headers ({[headerName]: headerValue})\n * @return {Object} a new object of headers\n * @api private\n */\nfunction removeUnsafeHeaders(headers) {\n  var safe = {};\n  for (var key in headers) {\n    if (/^(cookie|authorization)$/i.test(key)) {\n      continue;\n    }\n    safe[key] = headers[key];\n  }\n  return safe;\n}\n\n/**\n * Transform an URL to a valid origin value.\n *\n * @param {String|Object} url URL to transform to it's origin.\n * @returns {String} The origin.\n * @api private\n */\nfunction getOrigin(url) {\n  if (typeof url === 'string') url = parse(url);\n  if (!url.protocol || !url.hostname) return 'null';\n  return (url.protocol + '//' + url.host).toLowerCase();\n}","map":{"version":3,"names":["parse","require","events","https","http","util","httpsOptions","bom","colon","space","lineFeed","carriageReturn","hasBom","buf","every","charCode","index","EventSource","url","eventSourceInitDict","readyState","CONNECTING","headers","hasNewOrigin","Object","defineProperty","get","self","reconnectInterval","connectionInProgress","onConnectionClosed","message","CLOSED","_emit","Event","reconnectUrl","setTimeout","connect","req","lastEventId","discardTrailingNewline","data","eventName","options","isSecure","protocol","reqHeaders","removeUnsafeHeaders","i","header","rejectUnauthorized","createConnection","undefined","useProxy","proxy","path","Host","host","hostname","port","optName","indexOf","option","withCredentials","request","res","statusCode","status","statusMessage","location","prevOrigin","getOrigin","nextOrigin","process","nextTick","close","OPEN","on","removeAllListeners","isFirst","startingPos","startingFieldLength","chunk","Buffer","concat","slice","length","pos","lineLength","fieldLength","c","parseEventStreamLine","err","setNoDelay","end","listeners","arguments","emit","apply","_close","abort","xhr","type","MessageEvent","origin","noValue","step","field","toString","valueLength","value","retry","parseInt","Number","isNaN","module","exports","inherits","EventEmitter","prototype","constructor","forEach","method","listener","_listener","set","addEventListener","enumerable","dispatchEvent","event","Error","detail","removeEventListener","removeListener","optionalProperties","writable","f","hasOwnProperty","eventInitDict","safe","key","test","toLowerCase"],"sources":["/workspace/Planq-Dapps/vesting-portal/node_modules/eventsource/lib/eventsource.js"],"sourcesContent":["var parse = require('url').parse\nvar events = require('events')\nvar https = require('https')\nvar http = require('http')\nvar util = require('util')\n\nvar httpsOptions = [\n  'pfx', 'key', 'passphrase', 'cert', 'ca', 'ciphers',\n  'rejectUnauthorized', 'secureProtocol', 'servername', 'checkServerIdentity'\n]\n\nvar bom = [239, 187, 191]\nvar colon = 58\nvar space = 32\nvar lineFeed = 10\nvar carriageReturn = 13\n\nfunction hasBom (buf) {\n  return bom.every(function (charCode, index) {\n    return buf[index] === charCode\n  })\n}\n\n/**\n * Creates a new EventSource object\n *\n * @param {String} url the URL to which to connect\n * @param {Object} [eventSourceInitDict] extra init params. See README for details.\n * @api public\n **/\nfunction EventSource (url, eventSourceInitDict) {\n  var readyState = EventSource.CONNECTING\n  var headers = eventSourceInitDict && eventSourceInitDict.headers\n  var hasNewOrigin = false\n  Object.defineProperty(this, 'readyState', {\n    get: function () {\n      return readyState\n    }\n  })\n\n  Object.defineProperty(this, 'url', {\n    get: function () {\n      return url\n    }\n  })\n\n  var self = this\n  self.reconnectInterval = 1000\n  self.connectionInProgress = false\n\n  function onConnectionClosed (message) {\n    if (readyState === EventSource.CLOSED) return\n    readyState = EventSource.CONNECTING\n    _emit('error', new Event('error', {message: message}))\n\n    // The url may have been changed by a temporary redirect. If that's the case,\n    // revert it now, and flag that we are no longer pointing to a new origin\n    if (reconnectUrl) {\n      url = reconnectUrl\n      reconnectUrl = null\n      hasNewOrigin = false\n    }\n    setTimeout(function () {\n      if (readyState !== EventSource.CONNECTING || self.connectionInProgress) {\n        return\n      }\n      self.connectionInProgress = true\n      connect()\n    }, self.reconnectInterval)\n  }\n\n  var req\n  var lastEventId = ''\n  if (headers && headers['Last-Event-ID']) {\n    lastEventId = headers['Last-Event-ID']\n    delete headers['Last-Event-ID']\n  }\n\n  var discardTrailingNewline = false\n  var data = ''\n  var eventName = ''\n\n  var reconnectUrl = null\n\n  function connect () {\n    var options = parse(url)\n    var isSecure = options.protocol === 'https:'\n    options.headers = { 'Cache-Control': 'no-cache', 'Accept': 'text/event-stream' }\n    if (lastEventId) options.headers['Last-Event-ID'] = lastEventId\n    if (headers) {\n      var reqHeaders = hasNewOrigin ? removeUnsafeHeaders(headers) : headers\n      for (var i in reqHeaders) {\n        var header = reqHeaders[i]\n        if (header) {\n          options.headers[i] = header\n        }\n      }\n    }\n\n    // Legacy: this should be specified as `eventSourceInitDict.https.rejectUnauthorized`,\n    // but for now exists as a backwards-compatibility layer\n    options.rejectUnauthorized = !(eventSourceInitDict && !eventSourceInitDict.rejectUnauthorized)\n\n    if (eventSourceInitDict && eventSourceInitDict.createConnection !== undefined) {\n      options.createConnection = eventSourceInitDict.createConnection\n    }\n\n    // If specify http proxy, make the request to sent to the proxy server,\n    // and include the original url in path and Host headers\n    var useProxy = eventSourceInitDict && eventSourceInitDict.proxy\n    if (useProxy) {\n      var proxy = parse(eventSourceInitDict.proxy)\n      isSecure = proxy.protocol === 'https:'\n\n      options.protocol = isSecure ? 'https:' : 'http:'\n      options.path = url\n      options.headers.Host = options.host\n      options.hostname = proxy.hostname\n      options.host = proxy.host\n      options.port = proxy.port\n    }\n\n    // If https options are specified, merge them into the request options\n    if (eventSourceInitDict && eventSourceInitDict.https) {\n      for (var optName in eventSourceInitDict.https) {\n        if (httpsOptions.indexOf(optName) === -1) {\n          continue\n        }\n\n        var option = eventSourceInitDict.https[optName]\n        if (option !== undefined) {\n          options[optName] = option\n        }\n      }\n    }\n\n    // Pass this on to the XHR\n    if (eventSourceInitDict && eventSourceInitDict.withCredentials !== undefined) {\n      options.withCredentials = eventSourceInitDict.withCredentials\n    }\n\n    req = (isSecure ? https : http).request(options, function (res) {\n      self.connectionInProgress = false\n      // Handle HTTP errors\n      if (res.statusCode === 500 || res.statusCode === 502 || res.statusCode === 503 || res.statusCode === 504) {\n        _emit('error', new Event('error', {status: res.statusCode, message: res.statusMessage}))\n        onConnectionClosed()\n        return\n      }\n\n      // Handle HTTP redirects\n      if (res.statusCode === 301 || res.statusCode === 302 || res.statusCode === 307) {\n        var location = res.headers.location\n        if (!location) {\n          // Server sent redirect response without Location header.\n          _emit('error', new Event('error', {status: res.statusCode, message: res.statusMessage}))\n          return\n        }\n        var prevOrigin = getOrigin(url)\n        var nextOrigin = getOrigin(location)\n        hasNewOrigin = prevOrigin !== nextOrigin\n        if (res.statusCode === 307) reconnectUrl = url\n        url = location\n        process.nextTick(connect)\n        return\n      }\n\n      if (res.statusCode !== 200) {\n        _emit('error', new Event('error', {status: res.statusCode, message: res.statusMessage}))\n        return self.close()\n      }\n\n      readyState = EventSource.OPEN\n      res.on('close', function () {\n        res.removeAllListeners('close')\n        res.removeAllListeners('end')\n        onConnectionClosed()\n      })\n\n      res.on('end', function () {\n        res.removeAllListeners('close')\n        res.removeAllListeners('end')\n        onConnectionClosed()\n      })\n      _emit('open', new Event('open'))\n\n      // text/event-stream parser adapted from webkit's\n      // Source/WebCore/page/EventSource.cpp\n      var isFirst = true\n      var buf\n      var startingPos = 0\n      var startingFieldLength = -1\n      res.on('data', function (chunk) {\n        buf = buf ? Buffer.concat([buf, chunk]) : chunk\n        if (isFirst && hasBom(buf)) {\n          buf = buf.slice(bom.length)\n        }\n\n        isFirst = false\n        var pos = 0\n        var length = buf.length\n\n        while (pos < length) {\n          if (discardTrailingNewline) {\n            if (buf[pos] === lineFeed) {\n              ++pos\n            }\n            discardTrailingNewline = false\n          }\n\n          var lineLength = -1\n          var fieldLength = startingFieldLength\n          var c\n\n          for (var i = startingPos; lineLength < 0 && i < length; ++i) {\n            c = buf[i]\n            if (c === colon) {\n              if (fieldLength < 0) {\n                fieldLength = i - pos\n              }\n            } else if (c === carriageReturn) {\n              discardTrailingNewline = true\n              lineLength = i - pos\n            } else if (c === lineFeed) {\n              lineLength = i - pos\n            }\n          }\n\n          if (lineLength < 0) {\n            startingPos = length - pos\n            startingFieldLength = fieldLength\n            break\n          } else {\n            startingPos = 0\n            startingFieldLength = -1\n          }\n\n          parseEventStreamLine(buf, pos, fieldLength, lineLength)\n\n          pos += lineLength + 1\n        }\n\n        if (pos === length) {\n          buf = void 0\n        } else if (pos > 0) {\n          buf = buf.slice(pos)\n        }\n      })\n    })\n\n    req.on('error', function (err) {\n      self.connectionInProgress = false\n      onConnectionClosed(err.message)\n    })\n\n    if (req.setNoDelay) req.setNoDelay(true)\n    req.end()\n  }\n\n  connect()\n\n  function _emit () {\n    if (self.listeners(arguments[0]).length > 0) {\n      self.emit.apply(self, arguments)\n    }\n  }\n\n  this._close = function () {\n    if (readyState === EventSource.CLOSED) return\n    readyState = EventSource.CLOSED\n    if (req.abort) req.abort()\n    if (req.xhr && req.xhr.abort) req.xhr.abort()\n  }\n\n  function parseEventStreamLine (buf, pos, fieldLength, lineLength) {\n    if (lineLength === 0) {\n      if (data.length > 0) {\n        var type = eventName || 'message'\n        _emit(type, new MessageEvent(type, {\n          data: data.slice(0, -1), // remove trailing newline\n          lastEventId: lastEventId,\n          origin: getOrigin(url)\n        }))\n        data = ''\n      }\n      eventName = void 0\n    } else if (fieldLength > 0) {\n      var noValue = fieldLength < 0\n      var step = 0\n      var field = buf.slice(pos, pos + (noValue ? lineLength : fieldLength)).toString()\n\n      if (noValue) {\n        step = lineLength\n      } else if (buf[pos + fieldLength + 1] !== space) {\n        step = fieldLength + 1\n      } else {\n        step = fieldLength + 2\n      }\n      pos += step\n\n      var valueLength = lineLength - step\n      var value = buf.slice(pos, pos + valueLength).toString()\n\n      if (field === 'data') {\n        data += value + '\\n'\n      } else if (field === 'event') {\n        eventName = value\n      } else if (field === 'id') {\n        lastEventId = value\n      } else if (field === 'retry') {\n        var retry = parseInt(value, 10)\n        if (!Number.isNaN(retry)) {\n          self.reconnectInterval = retry\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = EventSource\n\nutil.inherits(EventSource, events.EventEmitter)\nEventSource.prototype.constructor = EventSource; // make stacktraces readable\n\n['open', 'error', 'message'].forEach(function (method) {\n  Object.defineProperty(EventSource.prototype, 'on' + method, {\n    /**\n     * Returns the current listener\n     *\n     * @return {Mixed} the set function or undefined\n     * @api private\n     */\n    get: function get () {\n      var listener = this.listeners(method)[0]\n      return listener ? (listener._listener ? listener._listener : listener) : undefined\n    },\n\n    /**\n     * Start listening for events\n     *\n     * @param {Function} listener the listener\n     * @return {Mixed} the set function or undefined\n     * @api private\n     */\n    set: function set (listener) {\n      this.removeAllListeners(method)\n      this.addEventListener(method, listener)\n    }\n  })\n})\n\n/**\n * Ready states\n */\nObject.defineProperty(EventSource, 'CONNECTING', {enumerable: true, value: 0})\nObject.defineProperty(EventSource, 'OPEN', {enumerable: true, value: 1})\nObject.defineProperty(EventSource, 'CLOSED', {enumerable: true, value: 2})\n\nEventSource.prototype.CONNECTING = 0\nEventSource.prototype.OPEN = 1\nEventSource.prototype.CLOSED = 2\n\n/**\n * Closes the connection, if one is made, and sets the readyState attribute to 2 (closed)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventSource/close\n * @api public\n */\nEventSource.prototype.close = function () {\n  this._close()\n}\n\n/**\n * Emulates the W3C Browser based WebSocket interface using addEventListener.\n *\n * @param {String} type A string representing the event type to listen out for\n * @param {Function} listener callback\n * @see https://developer.mozilla.org/en/DOM/element.addEventListener\n * @see http://dev.w3.org/html5/websockets/#the-websocket-interface\n * @api public\n */\nEventSource.prototype.addEventListener = function addEventListener (type, listener) {\n  if (typeof listener === 'function') {\n    // store a reference so we can return the original function again\n    listener._listener = listener\n    this.on(type, listener)\n  }\n}\n\n/**\n * Emulates the W3C Browser based WebSocket interface using dispatchEvent.\n *\n * @param {Event} event An event to be dispatched\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n * @api public\n */\nEventSource.prototype.dispatchEvent = function dispatchEvent (event) {\n  if (!event.type) {\n    throw new Error('UNSPECIFIED_EVENT_TYPE_ERR')\n  }\n  // if event is instance of an CustomEvent (or has 'details' property),\n  // send the detail object as the payload for the event\n  this.emit(event.type, event.detail)\n}\n\n/**\n * Emulates the W3C Browser based WebSocket interface using removeEventListener.\n *\n * @param {String} type A string representing the event type to remove\n * @param {Function} listener callback\n * @see https://developer.mozilla.org/en/DOM/element.removeEventListener\n * @see http://dev.w3.org/html5/websockets/#the-websocket-interface\n * @api public\n */\nEventSource.prototype.removeEventListener = function removeEventListener (type, listener) {\n  if (typeof listener === 'function') {\n    listener._listener = undefined\n    this.removeListener(type, listener)\n  }\n}\n\n/**\n * W3C Event\n *\n * @see http://www.w3.org/TR/DOM-Level-3-Events/#interface-Event\n * @api private\n */\nfunction Event (type, optionalProperties) {\n  Object.defineProperty(this, 'type', { writable: false, value: type, enumerable: true })\n  if (optionalProperties) {\n    for (var f in optionalProperties) {\n      if (optionalProperties.hasOwnProperty(f)) {\n        Object.defineProperty(this, f, { writable: false, value: optionalProperties[f], enumerable: true })\n      }\n    }\n  }\n}\n\n/**\n * W3C MessageEvent\n *\n * @see http://www.w3.org/TR/webmessaging/#event-definitions\n * @api private\n */\nfunction MessageEvent (type, eventInitDict) {\n  Object.defineProperty(this, 'type', { writable: false, value: type, enumerable: true })\n  for (var f in eventInitDict) {\n    if (eventInitDict.hasOwnProperty(f)) {\n      Object.defineProperty(this, f, { writable: false, value: eventInitDict[f], enumerable: true })\n    }\n  }\n}\n\n/**\n * Returns a new object of headers that does not include any authorization and cookie headers\n *\n * @param {Object} headers An object of headers ({[headerName]: headerValue})\n * @return {Object} a new object of headers\n * @api private\n */\nfunction removeUnsafeHeaders (headers) {\n  var safe = {}\n  for (var key in headers) {\n    if (/^(cookie|authorization)$/i.test(key)) {\n      continue\n    }\n\n    safe[key] = headers[key]\n  }\n\n  return safe\n}\n\n/**\n * Transform an URL to a valid origin value.\n *\n * @param {String|Object} url URL to transform to it's origin.\n * @returns {String} The origin.\n * @api private\n */\nfunction getOrigin (url) {\n  if (typeof url === 'string') url = parse(url)\n  if (!url.protocol || !url.hostname) return 'null'\n  return (url.protocol + '//' + url.host).toLowerCase()\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}
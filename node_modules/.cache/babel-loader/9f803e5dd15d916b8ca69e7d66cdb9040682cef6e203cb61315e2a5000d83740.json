{"ast":null,"code":"\"use strict\";\n\nvar callbackMap = {};\nvar openExtension = function (params) {\n  if (params.listener) {\n    callbackMap[params.serialNumber] = params.listener;\n  }\n  //params.callback = undefined;     //postMessage can't contains a function attr\n  params.listener = undefined; //postMessage can't contains a function attr\n\n  window.postMessage({\n    \"src\": \"nebPay\",\n    \"logo\": \"nebulas\",\n    //to distinguish from other messages\n    \"params\": params\n  }, \"*\");\n};\nwindow.addEventListener('message', function (resp) {\n  // console.log(\"nebpay: received resp.data: \" + JSON.stringify(resp.data));\n  if (resp.data.src !== \"content\") return;\n  var key = resp.data.serialNumber;\n  var callback = callbackMap[key];\n  if (typeof callback === \"function\") {\n    callback(key, resp.data.resp);\n  }\n\n  //delete callbackMap[key];\n});\n\nmodule.exports = openExtension;","map":{"version":3,"names":["callbackMap","openExtension","params","listener","serialNumber","undefined","window","postMessage","addEventListener","resp","data","src","key","callback","module","exports"],"sources":["/workspace/Planq-Dapps/vesting-portal/node_modules/nebpay.js/libs/extensionHandler.js"],"sourcesContent":["\"use strict\";\n\nvar callbackMap = {};\n\nvar openExtension = function (params) {\n\n    if(params.listener){\n        callbackMap[params.serialNumber] = params.listener;\n    }\n    //params.callback = undefined;     //postMessage can't contains a function attr\n    params.listener = undefined;     //postMessage can't contains a function attr\n\n    window.postMessage({\n        \"src\" : \"nebPay\",\n        \"logo\" : \"nebulas\",  //to distinguish from other messages\n        \"params\" : params\n    },\"*\");\n\n};\n\nwindow.addEventListener('message', function(resp) {\n\n    // console.log(\"nebpay: received resp.data: \" + JSON.stringify(resp.data));\n    if(resp.data.src !== \"content\")\n        return;\n\n    var key = resp.data.serialNumber;\n    var callback = callbackMap[key];\n    if(typeof callback === \"function\"){\n        callback(key, resp.data.resp);\n    }\n\n    //delete callbackMap[key];\n\n});\n\n\nmodule.exports = openExtension;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,WAAW,GAAG,CAAC,CAAC;AAEpB,IAAIC,aAAa,GAAG,SAAAA,CAAUC,MAAM,EAAE;EAElC,IAAGA,MAAM,CAACC,QAAQ,EAAC;IACfH,WAAW,CAACE,MAAM,CAACE,YAAY,CAAC,GAAGF,MAAM,CAACC,QAAQ;EACtD;EACA;EACAD,MAAM,CAACC,QAAQ,GAAGE,SAAS,CAAC,CAAK;;EAEjCC,MAAM,CAACC,WAAW,CAAC;IACf,KAAK,EAAG,QAAQ;IAChB,MAAM,EAAG,SAAS;IAAG;IACrB,QAAQ,EAAGL;EACf,CAAC,EAAC,GAAG,CAAC;AAEV,CAAC;AAEDI,MAAM,CAACE,gBAAgB,CAAC,SAAS,EAAE,UAASC,IAAI,EAAE;EAE9C;EACA,IAAGA,IAAI,CAACC,IAAI,CAACC,GAAG,KAAK,SAAS,EAC1B;EAEJ,IAAIC,GAAG,GAAGH,IAAI,CAACC,IAAI,CAACN,YAAY;EAChC,IAAIS,QAAQ,GAAGb,WAAW,CAACY,GAAG,CAAC;EAC/B,IAAG,OAAOC,QAAQ,KAAK,UAAU,EAAC;IAC9BA,QAAQ,CAACD,GAAG,EAAEH,IAAI,CAACC,IAAI,CAACD,IAAI,CAAC;EACjC;;EAEA;AAEJ,CAAC,CAAC;;AAGFK,MAAM,CAACC,OAAO,GAAGd,aAAa"},"metadata":{},"sourceType":"script","externalDependencies":[]}